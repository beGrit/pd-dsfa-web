{"version":3,"sources":["webpack://platform/./designer/seat/util/eventBus.js","webpack://platform/./designer/seat/constant.js","webpack://platform/./designer/seat/func.js","webpack://platform/./node_modules/core-js/modules/es.object.get-own-property-names.js","webpack://platform/./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack://platform/./designer/seat/util/configBuilder.js","webpack://platform/./designer/seat/seatDesign/widthInput.vue?75ff","webpack://platform/designer/seat/seatDesign/widthInput.vue","webpack://platform/./designer/seat/seatDesign/widthInput.vue?ed8f","webpack://platform/./designer/seat/seatDesign/widthInput.vue","webpack://platform/./designer/seat/seatDesign.vue?c058","webpack://platform/./designer/seat/seatDesign.vue?cdb4","webpack://platform/./designer/seat/seatDesign.vue?e72a","webpack://platform/./designer/seat/seatDesign.vue?78e5","webpack://platform/./designer/seat/seatDesign/topTools.vue?8d79","webpack://platform/designer/seat/seatDesign/topTools.vue","webpack://platform/./designer/seat/seatDesign/topTools.vue?1661","webpack://platform/./designer/seat/seatDesign/topTools.vue","webpack://platform/./designer/seat/seatDesign/leftTools.vue?750e","webpack://platform/designer/seat/seatDesign/leftTools.vue","webpack://platform/./designer/seat/seatDesign/leftTools.vue?c48f","webpack://platform/./designer/seat/seatDesign/leftTools.vue","webpack://platform/./designer/seat/seatDesign/rightTools.vue?bd1f","webpack://platform/designer/seat/seatDesign/rightTools.vue","webpack://platform/./designer/seat/seatDesign/rightTools.vue?a163","webpack://platform/./designer/seat/seatDesign/rightTools.vue","webpack://platform/./designer/seat/seatDesign/canvas.vue?88c7","webpack://platform/./designer/seat/seatDesign/region.vue?3577","webpack://platform/designer/seat/seatDesign/region.vue","webpack://platform/./designer/seat/seatDesign/region.vue?a1f6","webpack://platform/./designer/seat/seatDesign/region.vue","webpack://platform/designer/seat/seatDesign/canvas.vue","webpack://platform/./designer/seat/seatDesign/canvas.vue?6164","webpack://platform/./designer/seat/seatDesign/canvas.vue","webpack://platform/./designer/seat/seatDesign/seatItem.vue?e150","webpack://platform/designer/seat/seatDesign/seatItem.vue","webpack://platform/./designer/seat/seatDesign/seatItem.vue?338c","webpack://platform/./designer/seat/seatDesign/seatItem.vue","webpack://platform/./designer/seat/seatDesign/seatPop.vue?fc2d","webpack://platform/designer/seat/seatDesign/seatPop.vue","webpack://platform/./designer/seat/seatDesign/seatPop.vue?bf9d","webpack://platform/./designer/seat/seatDesign/seatPop.vue","webpack://platform/designer/seat/seatDesign.vue","webpack://platform/./designer/seat/seatDesign.vue?f8bc","webpack://platform/./designer/seat/seatDesign.vue"],"names":["EventBus","this","events","event","callback","undefined","arr","_","isArray","push","params","eventDeal","forEach","a","Object","entries","eventBus","window","$simpleEventBus","uploadUrl","eventBusEvent","uploadImg","formData","self","config","headers","transformRequest","data","loadingIndex","dsf","layer","loading","$http","post","done","res","isDef","success","message","error","err","always","closeLoading","updateGroupMemberPosition","group","member","totalTop","height","rows","totalLeft","width","cols","eachTop","eachLeft","item","rowIndex","top","floor","colIndex","left","getMemberSpaceLeft","getMemberSpaceTop","forzenOtherItems","isForzenMemberSty","items","el","isFrozenSty","selectedItems","select","id","groups","length","isFrozenMemberSty","unForzenAllItems","createUploadFileInput","inputName","$","remove","upDOM","document","createElement","type","accept","style","display","name","body","appendChild","changePanelSizeForBgImage","isEmpty","postData","backgroundImage","bg_w","bg_h","box_w","canvasSet","scale","css","absolutePath","sysBindShortKey","keyStack","stopList","keyCode","keyNum2Str","on","evt","index","indexOf","keyStr","join","includes","stopPropagation","preventDefault","emit","KEY_CTRL_D","KEY_DELETE","pull","newRelative","seat","person","pid","parentId","belong","currentState","stateList","seatNum","fails","getOwnPropertyNames","f","FAILS_ON_PRIMITIVES","target","stat","forced","toIndexedObject","$getOwnPropertyNames","toString","windowNames","getWindowNames","it","slice","module","exports","call","ConfigBuilder","business","alert","key","msg","title","Error","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","inline","model","label","controls","precision","placeholder","value","$$v","$set","expression","disabled","hasBg","staticRenderFns","_withStripped","props","required","Boolean","watch","handler","$store","commit","val","deep","component","options","__file","content","i","locals","add","default","_b","saveLayout","scopedSlots","_u","fn","proxy","_l","layout","buttons","button","$index","icon","text","click","$event","Array","url","components","widthInput","normalButtons","numButtons","computed","$nextTick","temp","concat","switchNumSet","created","methods","backStep","setNum","numSave","numCancel","numClean","numClear","numObj","$emit","restoreLayout","compelPanelSize","panelSize","updateBG","files","append","result","setBgImage2Panel","image","src","getWebPath","relativePath","onload","naturalWidth","naturalHeight","onerror","leftMenu","activeName","staticStyle","padding","itemindex","_v","_s","originWidth","originHeight","mounted","draggable","addClasses","helper","cursor","cursorAt","stop","x","pageX","y","pageY","uuid","angle","showText","seatTxt","test","bgImg","assign","basic","statusKv","showTool","showGroup","groupVisible","placement","trigger","closeGroup","domProps","textContent","getInfoTypeName","info","size","change","v","min","updateWidth","updateHeight","max","memberWidth","upGroupMemberPos","memberHeight","memberSpaceTop","upGroupSize","memberSpaceLeft","_e","slot","infoIsSec","memberType","dormName","floorName","dormType","sexList","sex","s","txt","remark","roomNum","class","setNumber","e","dialogVisible","uploadSingle","getImagePath","alt","state","statusValue","uploadMultiple","img","statusText","visible","modal","saveStatus","defaultStateList","visiblePointer","oldVisibleStatus","activeId","cloneDeep","fill","multiple","file","pointer","some","split","map","str","replace","judge","sIndex","qIndex","queue","obj","couldSeat","defaultArr","diffArr","sort","saveStatusError","path","one","parseInt","canvasCss","mousedown","_k","preRegion","apply","arguments","regionVisible","region","regionRect","panelSty","_t","regionSty","addEventListener","handleScroll","ctrlKey","wheelAction","newS","Math","round","sw","sh","l","t","handleMouseMove","downPos","movePos","abs","handleMouseUp","off","verLine","verLineSty","horLine","horLineSty","selectPosition","selectSty","selectMove","selectRotate","selectScale","mitems","active","hideText","getItemSty","preMove","contextmenu","popMenu","dblclick","openEdit","preRotate","preScale","openSetNum","m","getMemberSty","setOrderNum","rectMinSize","maxOrderNum","filter","transform","newSeatItem","seatItem","newGroupItem","groupItem","regionPosition","restSelectPostion","allItems","getSelectPosition","seatInfo","getMaxOrderNum","beforeDestroy","b","sty","background","getBgSty","clearSelectedItems","handleScale","action","basePoint","afterScaleRect","handleUp","debounce","setRect2Active","handleMove","localPos","old_x","moveDir","old_y","isNumber","addClass","handleRotate","rotateRect","center","removeClass","p","math","getRotatedPiont","c","oldSeat","offsetAngle","seatObj","scaleRect","oldRect","newRect","mousePosition","newSeat","which","position","deleteActiveSeatItem","hasClass","textArea","_submit","bind","focus","input","last","seatNumArr","judgePos","regionLeft","anchor","regionTop","regionWid","regionHit","small_position","convertLocalCoordinate","large_position","d","getRectPoint","lt","lb","rt","rb","tar","pos","xCenter","yCenter","right","bottom","getRectBasePointByScale","rect","minSize","cos","dist","sin","w","h","sc","U","K","S","__parseIntSize","ceil","getRatioBySeat2SelectBox","seats","selectBox","ratio","getNewSize","oldSelectBox","newSelectBox","_seat","ratioSize","sc1","__roundSize","getRectCenter","getPointRange","rectPoints","forIn","min_x","max_x","min_y","max_y","getExtNum","num","getOtherSeatPoints","otherSeat","computeAlignLine","xy","otherXy","times","getPointsXy","points","uniqWith","isEqual","getGroupMinSize","getAbsolutePath","directives","rawName","popShow","popDialog","form","orderPosition","orderBegin","colNum","total","quickOrder","setGroup","setGroupBySeat","setGroupByGroup","rowNum","_width","_height","memberList","getMemberList","_left","_top","topTools","leftTools","rightTools","canvas","seatPop","_id","importFiles","layoutUrl","then","saveByPub","bindShortKey","saveByDev","purePostData","localStorage","setItem","$router","JSON","stringify","layoutConfig","saveLayoutUrl","getSeatInfo","getInfoPub","getInfoDev","getPurePostData"],"mappings":"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","file":"modules/platform/js/dsf-platform.seatDesign.js","sourcesContent":["class EventBus {\r\n  constructor() {\r\n    this.events = {};\r\n  }\r\n  \r\n  listen(event, callback){\r\n    if (this.events[event] === undefined){\r\n      this.events[event] = [callback];\r\n    }\r\n    else {\r\n      const arr = this.events[event];\r\n      if (!_.isArray(arr)){\r\n        console.log(`请使用 on 来监听 ${event} 事件`)\r\n        return\r\n      }\r\n      arr.push(callback)\r\n    }\r\n  }\r\n  dispatch(event, params){\r\n    const eventDeal = this.events[event];\r\n    if (!eventDeal){\r\n      console.log(event + \"未使用listen 注册\")\r\n      return;\r\n    }\r\n    \r\n    if (!_.isArray(eventDeal)){\r\n      console.log(event + \"被on注册, 应使用emit触发\")\r\n      return\r\n    }\r\n    eventDeal.forEach(a => {\r\n      a(params)\r\n    })\r\n  }\r\n\r\n  on(event, callback)  {\r\n    if (this.events[event] === undefined){\r\n      this.events[event] = callback\r\n    }\r\n    else if (_.isArray(this.events[event])){\r\n      console.log(`请使用 listen 来监听 ${event} 事件`);\r\n    }\r\n    else {\r\n      console.log(event + \" 监听器重名\");\r\n    }\r\n  }\r\n  emit(event, params) {\r\n    const eventDeal = this.events[event]\r\n    if (!eventDeal){\r\n      console.log(event + \"未使用on 注册\")\r\n      return;\r\n    }\r\n    if (_.isArray(eventDeal)){\r\n      console.log(event + \"被listen注册, 应使用dispatch触发\")\r\n      return\r\n    }\r\n  \r\n    eventDeal(params)\r\n  }\r\n  off(event) {\r\n    this.events[event] = undefined;\r\n  }\r\n  clear(){\r\n    this.events = {}\r\n  }\r\n\r\n  $getAllListener(){\r\n    return Object.entries(this.events)\r\n  }\r\n}\r\n\r\nconst eventBus = new EventBus();\r\nwindow.$simpleEventBus = eventBus;\r\nexport default eventBus","const uploadUrl = \"file/upload/\";\r\nconst eventBusEvent = {\r\n  //配置文件加载完成\r\n  \"CONFIG_FILE_LOADED\": \"config_file_loaded\",\r\n  \r\n  //seatDesign 有关的事件\r\n  \"KEY_DELETE\": \"key_delete\",\r\n  \"KEY_CTRL_D\":\"key_ctrl_d\",\r\n  \"BODY_EMPTY_CLICK\": \"body_empty_click\",\r\n  \"SEAT_POP\": \"seat_pop\",\r\n  \"GET_ACTIVE_SEAT\": \"get_active_seat\",\r\n  \"CLEAN_ALL_SEAT_NUM\": \"clean_all_seat_num\",\r\n  \"CLEAN_SELECT_SEAT_NUM\": \"clean_select_seat_num\",\r\n  \"AFTER_QUICK_ORDER\": \"after_quick_order\",\r\n  \r\n  //seatView 有关的事件\r\n  \"PERSON_REVERT_TREE\": \"person_revert_tree\",\r\n  \"LEFT_CLICK_SEAT\": \"left_click_seat\",\r\n  \"AUTO_SEAT\": \"auto_seat\",\r\n  \r\n  //printingDesign 有关的事件\r\n  \"LEVEL_UP\": \"level_up\",\r\n  \"LEVEL_DOWN\": \"level_down\"\r\n}\r\nexport {\r\n  uploadUrl,\r\n  eventBusEvent\r\n}","import {eventBusEvent, uploadUrl} from './constant'\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\n\r\n/*seatDesign 里面使用的方法*/\r\nexport function uploadImg(formData, callback) {\r\n  const self = this;\r\n  const config = {\r\n    headers: {'Content-Type': 'multipart/form-data'},\r\n    transformRequest: [function (data, headers) {\r\n      return data;\r\n    }],\r\n  };\r\n  \r\n  let loadingIndex = dsf.layer.loading();\r\n  self.$http.post(uploadUrl, formData, config)\r\n    .done(res => {\r\n      if (!dsf.isDef(res.data) || !res.success) {\r\n        dsf.layer.message(res.message, false);\r\n        callback && callback(\"error\")\r\n        return false\r\n      }\r\n      \r\n      callback && callback(res.data);\r\n    })\r\n    .error(err => {\r\n      dsf.layer.message(\"上传图片失败\", false);\r\n      callback && callback(\"error\");\r\n    })\r\n    .always(() => {\r\n      dsf.layer.closeLoading(loadingIndex);\r\n    })\r\n}\r\n\r\nexport function updateGroupMemberPosition(group) {\r\n  const member = group.member[0];\r\n  let totalTop = group.height - member.height * group.rows;\r\n  let totalLeft = group.width - member.width * group.cols;\r\n  let eachTop = group.rows > 1 ? totalTop / (group.rows - 1) : 0;\r\n  let eachLeft = group.cols > 1 ? totalLeft / (group.cols - 1) : 0;\r\n  group.member.forEach(item => {\r\n    if (item.rowIndex > 0) item.top = _.floor((item.height + eachTop) * item.rowIndex, 2);\r\n    if (item.colIndex > 0) item.left = _.floor((item.width + eachLeft) * item.colIndex, 2);\r\n  })\r\n}\r\n\r\nexport function getMemberSpaceLeft(group) {\r\n  const member = group.member[0];\r\n  let totalLeft = group.width - member.width * group.cols;\r\n  return group.cols === 1 ? 0 : _.floor(totalLeft / (group.cols - 1), 2)\r\n}\r\n\r\nexport function getMemberSpaceTop(group) {\r\n  const member = group.member[0];\r\n  let totalTop = group.height - member.height * group.rows;\r\n  return group.rows === 1 ? 0 : _.floor(totalTop / (group.rows - 1), 2)\r\n}\r\n\r\n//冻结其他对象(未被激活对象)的样式渲染\r\nexport function forzenOtherItems(isForzenMemberSty = true) {\r\n  this.items.forEach(el => {\r\n    el.isFrozenSty = true;\r\n    this.selectedItems.forEach(select => {\r\n      if (el.id === select.id) {\r\n        el.isFrozenSty = false\r\n      }\r\n    })\r\n  })\r\n  if (this?.groups?.length > 0) {\r\n    this.groups.forEach(el => {\r\n      el.isFrozenSty = true;\r\n      el.isFrozenMemberSty = true;\r\n      this.selectedItems.forEach(select => {\r\n        if (el.id === select.id) {\r\n          el.isFrozenSty = false\r\n          !isForzenMemberSty && (el.isFrozenMemberSty = false)\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\n//解冻所有对象,重新渲染\r\nexport function unForzenAllItems() {\r\n  this.items.forEach(el => {\r\n    el.isFrozenSty = false\r\n  })\r\n  this.groups.forEach(el => {\r\n    el.isFrozenSty = false;\r\n    el.isFrozenMemberSty = false;\r\n  })\r\n}\r\n\r\nexport function createUploadFileInput(inputName = \"dsf-seat-upload\") {\r\n  $(`input[name='${inputName}']`).remove();\r\n  let upDOM = document.createElement(\"input\");\r\n  upDOM.type = \"file\";\r\n  upDOM.accept = \"image/*\";\r\n  upDOM.style.display = \"none\"\r\n  upDOM.name = inputName;\r\n  document.body.appendChild(upDOM);\r\n  return upDOM\r\n}\r\n\r\nexport function changePanelSizeForBgImage() {\r\n  const self = this;\r\n  if (_.isEmpty(self.postData.backgroundImage)) return; //如果没有背景则返回\r\n  let bg_w = self.postData.backgroundImage.width;\r\n  let bg_h = self.postData.backgroundImage.height;\r\n  let box_w = self.postData.canvasSet.width || $(\".seat-designer-page\").width();   //若画布宽没有设置值\r\n  let scale = box_w / bg_w;\r\n  \r\n  self.postData.canvasSet.width = box_w;\r\n  self.postData.canvasSet.height = bg_h * scale;\r\n  $(\"#panel_bg\").css(\"background-image\", \"url(\" + self.postData.backgroundImage.absolutePath + \")\");\r\n}\r\n\r\nexport function sysBindShortKey(keyStack, stopList) {\r\n  let keyCode;\r\n  const keyNum2Str = (keyCode) => {\r\n    switch (keyCode) {\r\n    case 17:\r\n      keyCode = \"ctrl\";\r\n      break;\r\n    case 68:\r\n      keyCode = \"d\";\r\n      break;\r\n    case 65:\r\n      keyCode = \"a\";\r\n      break;\r\n    case 46:\r\n      keyCode = \"delete\";\r\n      break;\r\n    case 16:\r\n      keyCode = \"shift\";\r\n      break;\r\n    case 83:\r\n      keyCode = \"s\";\r\n      break;\r\n    default:\r\n      keyCode = null;\r\n    }\r\n    return keyCode\r\n  }\r\n  \r\n  $(\"body\").on(\"keydown\", function (evt) {\r\n    keyCode = keyNum2Str(evt.keyCode);\r\n    if (!keyCode) return;\r\n    let index = keyStack.indexOf(keyCode);\r\n    if (index === -1) keyStack.push(keyCode);\r\n    let keyStr = keyStack.join(\"-\");\r\n    if (stopList.includes(keyStr)) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n    \r\n    if (keyStr === \"ctrl-d\") {\r\n      eventBus.emit(eventBusEvent.KEY_CTRL_D);\r\n    }\r\n    if (keyStr === \"delete\") {\r\n      eventBus.emit(eventBusEvent.KEY_DELETE)\r\n    }\r\n  });\r\n  $(\"body\").on(\"keyup\", function (evt) {\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n    keyCode = keyNum2Str(evt.keyCode);\r\n    _.pull(keyStack, keyCode);   //删除对应的keyCode\r\n  });\r\n}\r\n\r\n\r\n/*seatView 里面使用的方法*/\r\n//创建一条新的人员入座记录\r\nexport function newRelative(seat, person) {\r\n  return {\r\n    id: seat.id,\r\n    pid: seat.parentId,\r\n    belong: seat.belong,\r\n    currentState: seat.stateList[1],\r\n    person: person,\r\n    seatNum: seat.seatNum\r\n  }\r\n}","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names-external').f;\n\n// eslint-disable-next-line es/no-object-getownpropertynames -- required for testing\nvar FAILS_ON_PRIMITIVES = fails(function () { return !Object.getOwnPropertyNames(1); });\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  getOwnPropertyNames: getOwnPropertyNames\n});\n","/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","export default class ConfigBuilder {\r\n  constructor(config, business) {\r\n    this.config = config;\r\n    if (!business){\r\n      this.alert(\"url里面缺少必要的opt参数\");\r\n    }\r\n    if (!this.config[business]) {\r\n      this.alert(`[${this.config.name}] url里面的opt参数没有对应的配置项`);\r\n    }\r\n    Object.getOwnPropertyNames(this.config[business]).forEach(key => {\r\n      this[key] = this.config[business][key];\r\n    })\r\n  }\r\n  \r\n  alert(msg){\r\n    dsf.layer.alert({\r\n      title: \"警告\",\r\n      type: \"warning\",\r\n      message: msg\r\n    });\r\n    throw new Error(msg)\r\n  }\r\n}","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"input-box\" },\n    [\n      _c(\n        \"el-form\",\n        {\n          staticClass: \"demo-form-inline\",\n          attrs: { inline: true, model: _vm.canvasSet, \"label-width\": \"100px\" }\n        },\n        [\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"画布宽\" } },\n            [\n              _c(\"el-input-number\", {\n                attrs: { controls: false, precision: 0, placeholder: \"自适应\" },\n                model: {\n                  value: _vm.canvasSet.width,\n                  callback: function($$v) {\n                    _vm.$set(_vm.canvasSet, \"width\", $$v)\n                  },\n                  expression: \"canvasSet.width\"\n                }\n              })\n            ],\n            1\n          ),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"画布高\" } },\n            [\n              _c(\"el-input-number\", {\n                attrs: {\n                  controls: false,\n                  disabled: _vm.hasBg,\n                  precision: 0,\n                  placeholder: \"自适应\"\n                },\n                model: {\n                  value: _vm.canvasSet.height,\n                  callback: function($$v) {\n                    _vm.$set(_vm.canvasSet, \"height\", $$v)\n                  },\n                  expression: \"canvasSet.height\"\n                }\n              })\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"input-box\">\r\n    <el-form :inline=\"true\" :model=\"canvasSet\" label-width=\"100px\" class=\"demo-form-inline\">\r\n      <el-form-item label=\"画布宽\">\r\n        <el-input-number v-model=\"canvasSet.width\" :controls=\"false\" :precision=\"0\" placeholder=\"自适应\"></el-input-number>\r\n      </el-form-item>\r\n      \r\n      <el-form-item label=\"画布高\">\r\n        <el-input-number v-model=\"canvasSet.height\" :controls=\"false\" :disabled=\"hasBg\" :precision=\"0\" placeholder=\"自适应\"></el-input-number>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"WidthInput\",\r\n  props:{\r\n    canvasSet: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    hasBg:{\r\n      type: Boolean\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n\r\n    }\r\n  },\r\n  watch: {\r\n    canvasSet: {\r\n      handler(val) {\r\n        const self = this;\r\n        const {width, height} = val;\r\n        const lef = $(\".seat-designer-page\").offset().left;\r\n        const top = $(\".seat-designer-page\").offset().top;\r\n        const screenHit = $(window).height();\r\n        const screenWid = $(window).width();\r\n        if (width && (width + lef > screenWid)) {\r\n          $(\".seat-designer-center\").css({\"overflow-x\": \"scroll\"});\r\n        } else {\r\n          $(\".seat-designer-center\").css({\"overflow-x\": \"auto\"});\r\n        }\r\n        if (height && (height + top > screenHit)) {\r\n          $(\".seat-designer-center\").css(\"overflow-y\", \"scroll\");\r\n        } else {\r\n          $(\".seat-designer-center\").css(\"overflow-y\", \"auto\");\r\n        }\r\n        self.$store.commit(\"seatDesign/changeCompelPanelSize\", val);\r\n      },\r\n      deep: true\r\n    },\r\n  },\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widthInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widthInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./widthInput.vue?vue&type=template&id=4f3e190c&\"\nimport script from \"./widthInput.vue?vue&type=script&lang=js&\"\nexport * from \"./widthInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4f3e190c')) {\n      api.createRecord('4f3e190c', component.options)\n    } else {\n      api.reload('4f3e190c', component.options)\n    }\n    module.hot.accept(\"./widthInput.vue?vue&type=template&id=4f3e190c&\", function () {\n      api.rerender('4f3e190c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/seatDesign/widthInput.vue\"\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatDesign.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4a9d2128\", content, false, {\"sourceMap\":false,\"shadowMode\":false});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatDesign.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatDesign.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatDesign.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\nexport {};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ds-designer ds-seat-container ds-seat-design\" },\n    [\n      _c(\n        \"div\",\n        { staticClass: \"designer-head\" },\n        [\n          _c(\n            \"top-tools\",\n            _vm._b(\n              { on: { \"save-layout\": _vm.saveLayout } },\n              \"top-tools\",\n              _vm.postData,\n              false,\n              true\n            )\n          )\n        ],\n        1\n      ),\n      _c(\"div\", { staticClass: \"designer-content\" }, [\n        _c(\n          \"div\",\n          { staticClass: \"seat-designer-center\" },\n          [\n            _c(\"left-tools\"),\n            _c(\"seat-canvas\", {\n              scopedSlots: _vm._u([\n                {\n                  key: \"seat\",\n                  fn: function() {\n                    return [\n                      _c(\n                        \"seat-item\",\n                        _vm._b({}, \"seat-item\", _vm.postData, false, true)\n                      )\n                    ]\n                  },\n                  proxy: true\n                },\n                {\n                  key: \"seatPop\",\n                  fn: function() {\n                    return [_c(\"seat-pop\")]\n                  },\n                  proxy: true\n                }\n              ])\n            }),\n            _c(\"right-tools\")\n          ],\n          1\n        )\n      ])\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"designer_tools\" },\n    [\n      _vm._l(_vm.layout.buttons, function(button, $index) {\n        return _c(\"DsfButton\", {\n          key: $index,\n          attrs: {\n            icon: button.icon,\n            text: button.text,\n            \"btn-style\": \"icon-text\"\n          },\n          on: {\n            click: function($event) {\n              return button.handler($event, button)\n            }\n          }\n        })\n      }),\n      _c(\"width-input\", {\n        attrs: { \"canvas-set\": _vm.canvasSet, \"has-bg\": _vm.hasBg }\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"designer_tools\">\r\n    <DsfButton\r\n      v-for=\"(button, $index) in layout.buttons\"\r\n      :key=\"$index\"\r\n      :icon=\"button.icon\"\r\n      :text=\"button.text\"\r\n      btn-style=\"icon-text\"\r\n      @click=\"button.handler($event, button)\"/>\r\n    <width-input :canvas-set=\"canvasSet\" :has-bg=\"hasBg\"></width-input>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {createUploadFileInput, uploadImg} from '../func'\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/designer/seat/constant\";\r\nimport {mapState} from 'vuex';\r\nimport widthInput from \"_platform/designer/seat/seatDesign/widthInput\";\r\n  \r\nexport default {\r\n  name: \"TopTools\",\r\n  props: {\r\n    //所有座位\r\n    items: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    //所有组\r\n    groups: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n      \r\n    backgroundImage: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          url: \"\",\r\n          width: 0,\r\n          height: 0,\r\n        }\r\n      }\r\n    },\r\n    canvasSet:{\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          width: undefined,\r\n          height: undefined,\r\n        }\r\n      }\r\n    },\r\n    hasBg: {\r\n      type: Boolean,\r\n      default: false\r\n    },   //是否有底图\r\n  },\r\n  components: {\r\n    widthInput,\r\n  },\r\n  data() {\r\n    return {\r\n      //普通情况下的按钮\r\n      normalButtons: [\r\n        {text: \"保存\", icon: \"baocun\", handler: this.saveLayout},\r\n        {text: \"序号设置\", icon: \"shuzishurukuang\", handler: this.setNum},\r\n        {text: \"底图\", icon: \"tupiantianjia\", handler: this.updateBG},\r\n        {text: \"复位\", icon: \"shuaxin\", handler: this.restoreLayout},\r\n        {text: \"回退\", icon: \"shangyibu1\", handler: this.backStep},\r\n      ],\r\n      numButtons: [\r\n        {text: \"确定\", icon: \"dui1\", handler: this.numSave},\r\n        {text: \"取消\", icon: \"icon2\", handler: this.numCancel},\r\n        {text: \"回退\", icon: \"shangyibu1\", handler: this.backStep},\r\n        {text: \"全部清空\", icon: \"shanchu\", handler: this.numClean}\r\n      ],\r\n      layout: {\r\n        buttons: [],\r\n      },\r\n    }\r\n  },\r\n    \r\n  computed: {\r\n    ...mapState('seatDesign', [\r\n      \"compelPanelSize\",\r\n      \"switchNumSet\",\r\n      \"haveSelectedItems\"\r\n    ])\r\n  },\r\n  watch: {\r\n    \"canvasSet.width\"(val) {\r\n      if (!this.hasBg) return;\r\n      if (!val) {\r\n        this.$nextTick(() => {\r\n          let boxWid = $(\".seat-designer-page\").width();\r\n          let scale = boxWid / this.backgroundImage.width;\r\n          this.canvasSet.height = this.backgroundImage.height * scale;\r\n        });\r\n        return;\r\n      }\r\n      let scale = val / this.backgroundImage.width;\r\n      this.canvasSet.height = this.backgroundImage.height * scale;\r\n    },\r\n    \"switchNumSet\"(val) {\r\n      if (val) {\r\n        this.layout.buttons = this.numButtons\r\n      } else {\r\n        this.layout.buttons = this.normalButtons\r\n      }\r\n    },\r\n    \"haveSelectedItems\"(val) {\r\n      const arr = [\r\n        {text: \"确定\", icon: \"dui1\", handler: this.numSave},\r\n        {text: \"取消\", icon: \"icon2\", handler: this.numCancel},\r\n        {text: \"回退\", icon: \"shangyibu1\", handler: this.backStep},\r\n      ];\r\n      let temp;\r\n      if (val) {\r\n        temp = [\r\n          {text: \"当前清空\", icon: \"kongjianweixuan\", handler: this.numClear}\r\n        ]\r\n      } else {\r\n        temp = [\r\n          {text: \"全部清空\", icon: \"shanchu\", handler: this.numClean}\r\n        ]\r\n      }\r\n      this.numButtons = arr.concat(temp)\r\n      if (this.switchNumSet) {\r\n        this.layout.buttons = arr.concat(temp);\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.layout.buttons = this.normalButtons;\r\n  },\r\n  methods: {\r\n    backStep() {\r\n    },\r\n      \r\n    setNum() {\r\n      this.$store.commit(\"seatDesign/changeSwitchNumSet\", true);\r\n    },\r\n    numSave() {\r\n      this.$store.commit(\"seatDesign/changeSwitchNumSet\", false);\r\n    },\r\n    numCancel() {\r\n      this.$store.commit(\"seatDesign/changeSwitchNumSet\", false);\r\n    },\r\n    numClean() {\r\n      eventBus.emit(eventBusEvent.CLEAN_ALL_SEAT_NUM);\r\n    },\r\n    numClear() {\r\n      eventBus.emit(eventBusEvent.CLEAN_SELECT_SEAT_NUM)\r\n    },\r\n    saveLayout() {\r\n      const numObj = {}\r\n      const judgeNum = it => {\r\n        if (!it.seatNum) {\r\n          dsf.layer.message(\"座位序号不能为空\", false)\r\n          return false\r\n        }\r\n        if (numObj[it.seatNum]) {\r\n          dsf.layer.message(\"座位序号必须是唯一的，不能相同\", false)\r\n          return false\r\n        }\r\n        numObj[it.seatNum] = it.seatNum;\r\n        return true\r\n      }\r\n      for (let it of this.items) {\r\n        if (/^sec/.test(it.type)) continue;\r\n        if (!judgeNum(it)) return;\r\n      }\r\n      for (let it of this.groups) {\r\n        for (let m of it.member) {\r\n          if (!judgeNum(m)) return;\r\n        }\r\n      }\r\n      this.$emit(\"save-layout\");\r\n    },\r\n    restoreLayout() {\r\n      const panelSize = {\r\n        width: this.compelPanelSize.width,\r\n        height: this.compelPanelSize.height,\r\n        scale: 1,\r\n        left: 0,\r\n        top: 0,\r\n      }\r\n      this.$store.commit(\"seatDesign/changePanelSize\", panelSize);\r\n    },\r\n    updateBG() {\r\n      const self = this;\r\n      let upDOM = createUploadFileInput(\"dsf-seat-bg-upload\");\r\n      $(upDOM).on('change', function () {\r\n        if (!upDOM.files || upDOM.files.length === 0) return false;\r\n        const formData = new FormData();\r\n        formData.append(\"file\", upDOM.files[0]);\r\n        const callback = result => {\r\n          //清除创建的input\r\n          $(upDOM).val(\"\");\r\n          $(upDOM).remove();\r\n          upDOM = null;\r\n            \r\n          if (result === \"error\") {\r\n            self.$emit(\"update:hasBg\", false);\r\n            return false;\r\n          }\r\n          setBgImage2Panel.call(self, result[0]);\r\n        };\r\n        uploadImg.call(self, formData, callback)\r\n      })\r\n      $(upDOM).click();\r\n    }\r\n  }\r\n}\r\n  \r\nfunction setBgImage2Panel(data) {\r\n  const self = this;\r\n  let image = new Image();\r\n  image.src = dsf.url.getWebPath(data.relativePath);\r\n  image.onload = function () {\r\n    self.$emit(\"update:hasBg\", true);\r\n    self.$emit(\"update:backgroundImage\", {\r\n      width: image.naturalWidth,\r\n      height: image.naturalHeight,\r\n      relativePath: data.relativePath,\r\n      absolutePath: data.absolutePath\r\n    })\r\n  };\r\n  image.onerror = function () {\r\n    dsf.layer.message(\"图片加载失败\", false);\r\n    self.$emit(\"update:hasBg\", false);\r\n  }\r\n}\r\n\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topTools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topTools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./topTools.vue?vue&type=template&id=32168bee&\"\nimport script from \"./topTools.vue?vue&type=script&lang=js&\"\nexport * from \"./topTools.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('32168bee')) {\n      api.createRecord('32168bee', component.options)\n    } else {\n      api.reload('32168bee', component.options)\n    }\n    module.hot.accept(\"./topTools.vue?vue&type=template&id=32168bee&\", function () {\n      api.rerender('32168bee', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/seatDesign/topTools.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"designer-left\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"designer-left-tools\" },\n      _vm._l(_vm.leftMenu.group, function(group, $index) {\n        return _c(\n          \"el-collapse\",\n          {\n            key: $index,\n            model: {\n              value: _vm.leftMenu.activeName,\n              callback: function($$v) {\n                _vm.$set(_vm.leftMenu, \"activeName\", $$v)\n              },\n              expression: \"leftMenu.activeName\"\n            }\n          },\n          [\n            _c(\n              \"el-collapse-item\",\n              { attrs: { title: group.title, name: group.title } },\n              [\n                _c(\n                  \"div\",\n                  {\n                    staticClass: \"ds-tools-group-content\",\n                    staticStyle: { padding: \"10px\" }\n                  },\n                  _vm._l(group.items, function(item, itemindex) {\n                    return _c(\n                      \"div\",\n                      {\n                        key: itemindex,\n                        staticClass: \"ds-tool-item\",\n                        attrs: { name: item.name, \"data-type\": item.type }\n                      },\n                      [_vm._v(\" \" + _vm._s(item.name) + \" \")]\n                    )\n                  }),\n                  0\n                )\n              ]\n            )\n          ],\n          1\n        )\n      }),\n      1\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"designer-left\">\r\n    <div class=\"designer-left-tools\">\r\n      <el-collapse v-for=\"(group, $index) in leftMenu.group\" :key=\"$index\" v-model=\"leftMenu.activeName\">\r\n        <el-collapse-item :title=\"group.title\" :name=\"group.title\">\r\n          <div class=\"ds-tools-group-content\" style=\"padding: 10px;\">\r\n            <div v-for=\"(item, itemindex) in group.items\" :key=\"itemindex\" class=\"ds-tool-item\" :name=\"item.name\" :data-type=\"item.type\">\r\n              {{ item.name }}\r\n            </div>\r\n          </div>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\n\r\nexport default {\r\n  name: \"LeftTools\",\r\n  data() {\r\n    return {\r\n      leftMenu: {\r\n        activeName: [\"对象\", \"辅助对象\", \"自定义对象\"],\r\n        group: [\r\n          {\r\n            title: '对象',\r\n            items: [\r\n              {\r\n                name: \"座席\",\r\n                type: \"seat\"\r\n              },\r\n              {\r\n                name: \"床位\",\r\n                type: \"bed\",\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            title: '辅助对象',\r\n            items: [\r\n              {\r\n                name: '矩形',\r\n                type: \"sec_rect\"\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            title: '自定义对象',\r\n            items: [\r\n              {\r\n                name: '床位'\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      originWidth: 80,\r\n      originHeight: 80,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(\"seatDesign\", {\r\n      panelSize: \"panelSize\",\r\n      compelPanelSize: \"compelPanelSize\"\r\n    }),\r\n  },\r\n  mounted() {\r\n    const self = this;\r\n    $(\".ds-tool-item\").draggable({\r\n      addClasses: false,\r\n      helper() {\r\n        let txt = $(this).text();\r\n        return $(`<div class=\"drag-item\">${txt}</div>`)\r\n      },\r\n      cursor: \"default\",\r\n      cursorAt: {\r\n        top: -5,\r\n        left: -5\r\n      },\r\n      stop(evt, ui) {\r\n        //获取鼠标在画框里的位置\r\n        const pos = dsf.math.convertLocalCoordinate(\".seat-designer-page\", { x: evt.pageX, y: evt.pageY });\r\n        const canvasWid = self.compelPanelSize.width || $(\".seat-designer-page\").width();\r\n        const canvasHit = self.compelPanelSize.height || $(\".seat-designer-page\").height();\r\n\r\n        //判断鼠标位置是否处于画框区域\r\n        if ((pos.x >= 0 && pos.x <= canvasWid) && (pos.y >= 0 && pos.y <= canvasHit)) {\r\n          const type = $(evt.target).data(\"type\");\r\n          //const name = $(evt.target).attr(\"name\");\r\n\r\n          //获取创建seat时，鼠标在panel_outer 里面得位置\r\n          const pos = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n            x: evt.pageX,\r\n            y: evt.pageY\r\n          }, self.panelSize.scale);\r\n\r\n          const basic = {\r\n            id: dsf.uuid(),\r\n            type: type,\r\n            left: pos.x,\r\n            top: pos.y,\r\n            width: self.originWidth,\r\n            height: self.originHeight,\r\n            angle: 0,\r\n            isFrozenSty: false,   //是否冻结style\r\n            showText: 1,  //是否显示文本 1是 | 2否\r\n            seatTxt: \"\",\r\n            seatNum: \"\",\r\n          }\r\n          let temp;\r\n          if (/^sec_/.test(type)) {\r\n            temp = {\r\n              bgImg: \"\",\r\n            }\r\n            Object.assign(basic, temp)\r\n          }\r\n          else {\r\n            temp = {\r\n              statusKv: \"\",   //自定义的状态\r\n              stateList: [],  //状态列表\r\n            }\r\n            Object.assign(basic, temp)\r\n          }\r\n\r\n          //添加seat到panel\r\n          self.$store.commit(\"seatDesign/addSeat2Panel\", basic);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./leftTools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./leftTools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./leftTools.vue?vue&type=template&id=09b3bc48&\"\nimport script from \"./leftTools.vue?vue&type=script&lang=js&\"\nexport * from \"./leftTools.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('09b3bc48')) {\n      api.createRecord('09b3bc48', component.options)\n    } else {\n      api.reload('09b3bc48', component.options)\n    }\n    module.hot.accept(\"./leftTools.vue?vue&type=template&id=09b3bc48&\", function () {\n      api.rerender('09b3bc48', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/seatDesign/leftTools.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.showTool\n    ? _c(\n        \"div\",\n        { staticClass: \"right-tool-box\" },\n        [\n          _c(\n            \"div\",\n            {\n              staticClass: \"box-item\",\n              on: {\n                click: function($event) {\n                  return _vm.showGroup(0)\n                }\n              }\n            },\n            [\n              _c(\n                \"el-popover\",\n                {\n                  attrs: {\n                    value: _vm.groupVisible[0],\n                    placement: \"left-start\",\n                    width: \"360\",\n                    trigger: \"manual\",\n                    \"popper-class\": \"ds-seat-design-popover\"\n                  }\n                },\n                [\n                  _c(\"div\", { staticClass: \"header\" }, [\n                    _vm._v(\" 度量 \"),\n                    _c(\"i\", {\n                      staticClass: \"el-icon-arrow-right\",\n                      on: {\n                        click: function($event) {\n                          return _vm.closeGroup(0)\n                        }\n                      }\n                    })\n                  ]),\n                  _c(\n                    \"div\",\n                    { staticClass: \"inner\" },\n                    [\n                      _c(\"div\", { staticClass: \"title\" }, [\n                        _c(\"label\", { staticClass: \"label-box\" }, [\n                          _vm._v(\"当前对象：\")\n                        ]),\n                        _c(\"span\", {\n                          domProps: {\n                            textContent: _vm._s(_vm.getInfoTypeName())\n                          }\n                        })\n                      ]),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"X\")\n                          ]),\n                          _c(\"el-input-number\", {\n                            attrs: {\n                              value: _vm.info.left,\n                              size: \"mini\",\n                              controls: false\n                            },\n                            on: {\n                              change: function(v) {\n                                return (_vm.info.left = v)\n                              }\n                            }\n                          }),\n                          _c(\n                            \"label\",\n                            {\n                              staticClass: \"label-box\",\n                              staticStyle: { \"margin-left\": \"5px\" }\n                            },\n                            [_vm._v(\"Y\")]\n                          ),\n                          _c(\"el-input-number\", {\n                            attrs: {\n                              value: _vm.info.top,\n                              size: \"mini\",\n                              controls: false\n                            },\n                            on: {\n                              change: function(v) {\n                                return (_vm.info.top = v)\n                              }\n                            }\n                          })\n                        ],\n                        1\n                      ),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"宽\")\n                          ]),\n                          _c(\"el-input-number\", {\n                            attrs: {\n                              value: _vm.info.width,\n                              size: \"mini\",\n                              min: 0,\n                              controls: false\n                            },\n                            on: {\n                              change: function(v) {\n                                return _vm.updateWidth(v)\n                              }\n                            }\n                          }),\n                          _c(\n                            \"label\",\n                            {\n                              staticClass: \"label-box\",\n                              staticStyle: { \"margin-left\": \"5px\" }\n                            },\n                            [_vm._v(\"高\")]\n                          ),\n                          _c(\"el-input-number\", {\n                            attrs: {\n                              value: _vm.info.height,\n                              size: \"mini\",\n                              min: 0,\n                              controls: false\n                            },\n                            on: {\n                              change: function(v) {\n                                return _vm.updateHeight(v)\n                              }\n                            }\n                          })\n                        ],\n                        1\n                      ),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"角度\")\n                          ]),\n                          _c(\"el-input-number\", {\n                            attrs: {\n                              value: _vm.info.angle,\n                              size: \"mini\",\n                              min: 0,\n                              max: 360,\n                              controls: false\n                            },\n                            on: {\n                              change: function(v) {\n                                return (_vm.info.angle = v)\n                              }\n                            }\n                          })\n                        ],\n                        1\n                      ),\n                      _vm.info.type === \"group\"\n                        ? [\n                            _c(\n                              \"div\",\n                              { staticClass: \"inner-item\" },\n                              [\n                                _c(\"label\", { staticClass: \"label-box\" }, [\n                                  _vm._v(\"成员宽\")\n                                ]),\n                                _c(\"el-input-number\", {\n                                  attrs: {\n                                    value: _vm.memberWidth,\n                                    size: \"mini\",\n                                    controls: false\n                                  },\n                                  on: {\n                                    change: function(v) {\n                                      return _vm.upGroupMemberPos(\"width\", v)\n                                    }\n                                  }\n                                }),\n                                _c(\"label\", { staticClass: \"label-box\" }, [\n                                  _vm._v(\"成员高\")\n                                ]),\n                                _c(\"el-input-number\", {\n                                  attrs: {\n                                    value: _vm.memberHeight,\n                                    size: \"mini\",\n                                    controls: false\n                                  },\n                                  on: {\n                                    change: function(v) {\n                                      return _vm.upGroupMemberPos(\"height\", v)\n                                    }\n                                  }\n                                })\n                              ],\n                              1\n                            ),\n                            _c(\n                              \"div\",\n                              { staticClass: \"inner-item\" },\n                              [\n                                _c(\"label\", { staticClass: \"label-box\" }, [\n                                  _vm._v(\"行间距\")\n                                ]),\n                                _c(\"el-input-number\", {\n                                  attrs: {\n                                    value: _vm.memberSpaceTop,\n                                    size: \"mini\",\n                                    controls: false\n                                  },\n                                  on: {\n                                    change: function(v) {\n                                      return _vm.upGroupSize(\"row\", v)\n                                    }\n                                  }\n                                }),\n                                _c(\"label\", { staticClass: \"label-box\" }, [\n                                  _vm._v(\"列间距\")\n                                ]),\n                                _c(\"el-input-number\", {\n                                  attrs: {\n                                    value: _vm.memberSpaceLeft,\n                                    size: \"mini\",\n                                    controls: false\n                                  },\n                                  on: {\n                                    change: function(v) {\n                                      return _vm.upGroupSize(\"col\", v)\n                                    }\n                                  }\n                                })\n                              ],\n                              1\n                            )\n                          ]\n                        : _vm._e()\n                    ],\n                    2\n                  ),\n                  _c(\"i\", {\n                    staticClass: \"iconfont icon-resize-\",\n                    attrs: { slot: \"reference\" },\n                    slot: \"reference\"\n                  })\n                ]\n              )\n            ],\n            1\n          ),\n          _c(\n            \"div\",\n            {\n              staticClass: \"box-item\",\n              on: {\n                click: function($event) {\n                  return _vm.showGroup(1)\n                }\n              }\n            },\n            [\n              _c(\n                \"el-popover\",\n                {\n                  attrs: {\n                    value: _vm.groupVisible[1],\n                    placement: \"left\",\n                    width: \"360\",\n                    trigger: \"manual\",\n                    \"popper-class\": \"ds-seat-design-popover\"\n                  }\n                },\n                [\n                  _c(\"div\", { staticClass: \"header\" }, [\n                    _vm._v(\" 属性 \"),\n                    _c(\"i\", {\n                      staticClass: \"el-icon-arrow-right\",\n                      on: {\n                        click: function($event) {\n                          return _vm.closeGroup(1)\n                        }\n                      }\n                    })\n                  ]),\n                  _c(\n                    \"div\",\n                    { staticClass: \"inner\" },\n                    [\n                      !_vm.infoIsSec\n                        ? [\n                            _vm.info.type === \"bed\" ||\n                            _vm.info.memberType === \"bed\"\n                              ? _c(\n                                  \"div\",\n                                  { staticClass: \"inner-item\" },\n                                  [\n                                    _c(\"label\", { staticClass: \"label-box\" }, [\n                                      _vm._v(\"宿舍\")\n                                    ]),\n                                    _c(\"el-input\", {\n                                      attrs: { size: \"mini\" },\n                                      model: {\n                                        value: _vm.info.dormName,\n                                        callback: function($$v) {\n                                          _vm.$set(_vm.info, \"dormName\", $$v)\n                                        },\n                                        expression: \"info.dormName\"\n                                      }\n                                    }),\n                                    _c(\n                                      \"label\",\n                                      {\n                                        staticClass: \"label-box\",\n                                        staticStyle: { \"margin-left\": \"5px\" }\n                                      },\n                                      [_vm._v(\"楼层\")]\n                                    ),\n                                    _c(\"el-input\", {\n                                      attrs: { size: \"mini\" },\n                                      model: {\n                                        value: _vm.info.floorName,\n                                        callback: function($$v) {\n                                          _vm.$set(_vm.info, \"floorName\", $$v)\n                                        },\n                                        expression: \"info.floorName\"\n                                      }\n                                    })\n                                  ],\n                                  1\n                                )\n                              : _vm._e(),\n                            _vm.info.type === \"bed\" ||\n                            _vm.info.memberType === \"bed\"\n                              ? _c(\n                                  \"div\",\n                                  { staticClass: \"inner-item\" },\n                                  [\n                                    _c(\"label\", { staticClass: \"label-box\" }, [\n                                      _vm._v(\"类型\")\n                                    ]),\n                                    _c(\n                                      \"el-select\",\n                                      {\n                                        attrs: { size: \"mini\" },\n                                        model: {\n                                          value: _vm.info.dormType,\n                                          callback: function($$v) {\n                                            _vm.$set(_vm.info, \"dormType\", $$v)\n                                          },\n                                          expression: \"info.dormType\"\n                                        }\n                                      },\n                                      _vm._l(_vm.sexList, function(sex, s) {\n                                        return _c(\"el-option\", {\n                                          key: s,\n                                          attrs: {\n                                            label: sex.txt,\n                                            value: sex.val\n                                          }\n                                        })\n                                      }),\n                                      1\n                                    ),\n                                    _c(\n                                      \"label\",\n                                      {\n                                        staticClass: \"label-box\",\n                                        staticStyle: { \"margin-left\": \"5px\" }\n                                      },\n                                      [_vm._v(\"备注\")]\n                                    ),\n                                    _c(\"el-input\", {\n                                      attrs: { size: \"mini\" },\n                                      model: {\n                                        value: _vm.info.remark,\n                                        callback: function($$v) {\n                                          _vm.$set(_vm.info, \"remark\", $$v)\n                                        },\n                                        expression: \"info.remark\"\n                                      }\n                                    })\n                                  ],\n                                  1\n                                )\n                              : _vm._e(),\n                            _vm.info.type === \"seat\" ||\n                            _vm.info.memberType === \"seat\"\n                              ? _c(\n                                  \"div\",\n                                  { staticClass: \"inner-item\" },\n                                  [\n                                    _c(\"label\", { staticClass: \"label-box\" }, [\n                                      _vm._v(\"房间号\")\n                                    ]),\n                                    _c(\"el-input\", {\n                                      attrs: { size: \"mini\" },\n                                      model: {\n                                        value: _vm.info.roomNum,\n                                        callback: function($$v) {\n                                          _vm.$set(_vm.info, \"roomNum\", $$v)\n                                        },\n                                        expression: \"info.roomNum\"\n                                      }\n                                    }),\n                                    _c(\n                                      \"label\",\n                                      {\n                                        staticClass: \"label-box\",\n                                        staticStyle: { \"margin-left\": \"5px\" }\n                                      },\n                                      [_vm._v(\"备注\")]\n                                    ),\n                                    _c(\"el-input\", {\n                                      attrs: { size: \"mini\" },\n                                      model: {\n                                        value: _vm.info.remark,\n                                        callback: function($$v) {\n                                          _vm.$set(_vm.info, \"remark\", $$v)\n                                        },\n                                        expression: \"info.remark\"\n                                      }\n                                    })\n                                  ],\n                                  1\n                                )\n                              : _vm._e(),\n                            _c(\n                              \"div\",\n                              { staticClass: \"inner-item\" },\n                              [\n                                _c(\n                                  \"label\",\n                                  {\n                                    staticClass: \"label-box\",\n                                    staticStyle: {\n                                      width: \"80px\",\n                                      \"margin-right\": \"10px\"\n                                    }\n                                  },\n                                  [_vm._v(\"显示文本\")]\n                                ),\n                                _c(\n                                  \"el-radio-group\",\n                                  {\n                                    model: {\n                                      value: _vm.info.showText,\n                                      callback: function($$v) {\n                                        _vm.$set(_vm.info, \"showText\", $$v)\n                                      },\n                                      expression: \"info.showText\"\n                                    }\n                                  },\n                                  [\n                                    _c(\"el-radio\", { attrs: { label: 1 } }, [\n                                      _vm._v(\"是\")\n                                    ]),\n                                    _c(\"el-radio\", { attrs: { label: 2 } }, [\n                                      _vm._v(\"否\")\n                                    ])\n                                  ],\n                                  1\n                                )\n                              ],\n                              1\n                            ),\n                            _vm.info.member && _vm.info.member.length > 0\n                              ? _c(\n                                  \"div\",\n                                  {\n                                    staticClass: \"inner-item\",\n                                    class:\n                                      _vm.info.member.length > 4\n                                        ? \"scroll-container\"\n                                        : \"\"\n                                  },\n                                  _vm._l(_vm.info.member, function(item, it) {\n                                    return _c(\"div\", { key: it }, [\n                                      _c(\"div\", { staticClass: \"title\" }, [\n                                        _vm._v(\n                                          _vm._s(item.rowIndex + 1) +\n                                            \"行\" +\n                                            _vm._s(item.colIndex + 1) +\n                                            \"列:\"\n                                        )\n                                      ]),\n                                      _c(\n                                        \"label\",\n                                        { staticClass: \"label-box\" },\n                                        [_vm._v(\"序号\")]\n                                      ),\n                                      _c(\"input\", {\n                                        staticClass: \"input-mini\",\n                                        attrs: { type: \"text\" },\n                                        domProps: { value: item.seatNum },\n                                        on: {\n                                          change: function($event) {\n                                            return _vm.setNumber($event, item)\n                                          }\n                                        }\n                                      }),\n                                      _c(\n                                        \"label\",\n                                        { staticClass: \"label-box\" },\n                                        [_vm._v(\"文本\")]\n                                      ),\n                                      _c(\"input\", {\n                                        staticClass: \"input-mini\",\n                                        attrs: { type: \"text\" },\n                                        domProps: { value: item.seatTxt },\n                                        on: {\n                                          change: function(e) {\n                                            return (item.seatTxt =\n                                              e.target.value)\n                                          }\n                                        }\n                                      })\n                                    ])\n                                  }),\n                                  0\n                                )\n                              : _c(\"div\", { staticClass: \"inner-item\" }, [\n                                  _c(\"label\", { staticClass: \"label-box\" }, [\n                                    _vm._v(\"序号\")\n                                  ]),\n                                  _c(\"input\", {\n                                    staticClass: \"input-mini\",\n                                    attrs: { type: \"text\" },\n                                    domProps: { value: _vm.info.seatNum },\n                                    on: {\n                                      change: function($event) {\n                                        return _vm.setNumber($event, _vm.info)\n                                      }\n                                    }\n                                  }),\n                                  _c(\"label\", { staticClass: \"label-box\" }, [\n                                    _vm._v(\"文本\")\n                                  ]),\n                                  _c(\"input\", {\n                                    staticClass: \"input-mini\",\n                                    attrs: { type: \"text\" },\n                                    domProps: { value: _vm.info.seatTxt },\n                                    on: {\n                                      change: function(e) {\n                                        return (_vm.info.seatTxt =\n                                          e.target.value)\n                                      }\n                                    }\n                                  })\n                                ])\n                          ]\n                        : [\n                            _c(\n                              \"div\",\n                              { staticClass: \"inner-item\" },\n                              [\n                                _c(\"p\", [_vm._v(\"文本\")]),\n                                _c(\"el-input\", {\n                                  model: {\n                                    value: _vm.info.seatTxt,\n                                    callback: function($$v) {\n                                      _vm.$set(_vm.info, \"seatTxt\", $$v)\n                                    },\n                                    expression: \"info.seatTxt\"\n                                  }\n                                })\n                              ],\n                              1\n                            )\n                          ]\n                    ],\n                    2\n                  ),\n                  _c(\"i\", {\n                    staticClass: \"iconfont icon-xingzhuang-wenzi\",\n                    attrs: { slot: \"reference\" },\n                    slot: \"reference\"\n                  })\n                ]\n              )\n            ],\n            1\n          ),\n          _c(\n            \"div\",\n            {\n              staticClass: \"box-item\",\n              on: {\n                click: function($event) {\n                  return _vm.showGroup(2)\n                }\n              }\n            },\n            [\n              _c(\n                \"el-popover\",\n                {\n                  attrs: {\n                    value: _vm.groupVisible[2],\n                    placement: \"left-start\",\n                    width: \"365\",\n                    trigger: \"manual\",\n                    \"popper-class\": \"ds-seat-design-popover\"\n                  }\n                },\n                [\n                  _c(\"div\", { staticClass: \"header\" }, [\n                    _vm._v(\" 上传 \"),\n                    !_vm.infoIsSec\n                      ? _c(\"i\", {\n                          staticClass: \"el-icon el-icon-s-tools\",\n                          on: {\n                            click: function($event) {\n                              _vm.dialogVisible = true\n                            }\n                          }\n                        })\n                      : _vm._e(),\n                    _c(\"i\", {\n                      staticClass: \"el-icon-arrow-right\",\n                      on: {\n                        click: function($event) {\n                          return _vm.closeGroup(2)\n                        }\n                      }\n                    })\n                  ]),\n                  !_vm.infoIsSec\n                    ? _c(\n                        \"div\",\n                        { staticClass: \"inner inner-flex\" },\n                        _vm._l(_vm.info.stateList, function(state, s) {\n                          return _c(\n                            \"div\",\n                            {\n                              key: state.statusValue,\n                              staticClass: \"upload-box\"\n                            },\n                            [\n                              _c(\n                                \"div\",\n                                {\n                                  staticClass: \"img-box\",\n                                  on: {\n                                    click: function($event) {\n                                      return _vm.uploadMultiple(state)\n                                    }\n                                  }\n                                },\n                                [\n                                  state.img\n                                    ? _c(\"img\", {\n                                        attrs: {\n                                          src: _vm.getImagePath(state.img)\n                                        }\n                                      })\n                                    : _vm._e()\n                                ]\n                              ),\n                              _c(\"p\", [_vm._v(_vm._s(state.statusText))])\n                            ]\n                          )\n                        }),\n                        0\n                      )\n                    : _c(\"div\", [\n                        _c(\"div\", { staticClass: \"inner\" }, [\n                          _c(\n                            \"div\",\n                            {\n                              staticClass: \"single-upload-box\",\n                              on: { click: _vm.uploadSingle }\n                            },\n                            [\n                              _vm.info.bgImg\n                                ? _c(\"img\", {\n                                    attrs: {\n                                      src: _vm.getImagePath(_vm.info.bgImg),\n                                      alt: \"\"\n                                    }\n                                  })\n                                : _vm._e()\n                            ]\n                          )\n                        ])\n                      ]),\n                  _c(\"i\", {\n                    staticClass: \"iconfont icon-tupiantianjia\",\n                    attrs: { slot: \"reference\" },\n                    slot: \"reference\"\n                  })\n                ]\n              )\n            ],\n            1\n          ),\n          _c(\n            \"el-dialog\",\n            {\n              attrs: {\n                title: \"座位状态管理\",\n                visible: _vm.dialogVisible,\n                modal: false,\n                width: \"35%\"\n              },\n              on: {\n                \"update:visible\": function($event) {\n                  _vm.dialogVisible = $event\n                }\n              }\n            },\n            [\n              _c(\n                \"div\",\n                { staticClass: \"dialog-box\" },\n                [\n                  _c(\"p\", { staticClass: \"title\" }, [_vm._v(\"说明\")]),\n                  _c(\"p\", [_vm._v(\"statusText - 座位状态\")]),\n                  _c(\"p\", [_vm._v(\"statusValue - 座位状态对应的值\")]),\n                  _c(\"p\", [\n                    _vm._v(\"couldSeat - 此状态下人员能否入座（1能、2否）\")\n                  ]),\n                  _c(\"p\", { staticClass: \"title\" }, [_vm._v(\"默认状态\")]),\n                  _c(\"p\", [\n                    _c(\"span\", [_vm._v(\"正常|1|1\")]),\n                    _c(\"span\", [_vm._v(\"已排|2|1\")])\n                  ]),\n                  _c(\"p\", [\n                    _c(\"span\", [_vm._v(\"锁定|3|2\")]),\n                    _c(\"span\", [_vm._v(\"禁用|4|2\")])\n                  ]),\n                  _c(\"p\", { staticClass: \"title\" }, [_vm._v(\"自定义座位状态\")]),\n                  _c(\"el-input\", {\n                    attrs: {\n                      type: \"textarea\",\n                      rows: 5,\n                      placeholder:\n                        \"statusText | statusValue | couldSeat 以|分隔，一行定义一种状态\"\n                    },\n                    model: {\n                      value: _vm.info.statusKv,\n                      callback: function($$v) {\n                        _vm.$set(_vm.info, \"statusKv\", $$v)\n                      },\n                      expression: \"info.statusKv\"\n                    }\n                  })\n                ],\n                1\n              ),\n              _c(\n                \"span\",\n                {\n                  staticClass: \"dialog-footer\",\n                  attrs: { slot: \"footer\" },\n                  slot: \"footer\"\n                },\n                [\n                  _c(\n                    \"el-button\",\n                    {\n                      attrs: { size: \"small\" },\n                      on: {\n                        click: function($event) {\n                          _vm.dialogVisible = false\n                        }\n                      }\n                    },\n                    [_vm._v(\"取 消\")]\n                  ),\n                  _c(\n                    \"el-button\",\n                    {\n                      attrs: { size: \"small\", type: \"primary\" },\n                      on: { click: _vm.saveStatus }\n                    },\n                    [_vm._v(\"确 定\")]\n                  )\n                ],\n                1\n              )\n            ]\n          )\n        ],\n        1\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"showTool\" class=\"right-tool-box\">\r\n    <div class=\"box-item\" @click=\"showGroup(0)\">\r\n      <el-popover\r\n        :value=\"groupVisible[0]\"\r\n        placement=\"left-start\"\r\n        width=\"360\"\r\n        trigger=\"manual\"\r\n        popper-class=\"ds-seat-design-popover\"\r\n      >\r\n        <div class=\"header\">\r\n          度量\r\n          <i class=\"el-icon-arrow-right\" @click=\"closeGroup(0)\"></i>\r\n        </div>\r\n        <div class=\"inner\">\r\n          <div class=\"title\">\r\n            <label class=\"label-box\">当前对象：</label>\r\n            <span v-text=\"getInfoTypeName()\"></span>\r\n          </div>\r\n          <div class=\"inner-item\">\r\n            <label class=\"label-box\">X</label>\r\n            <el-input-number\r\n              :value=\"info.left\"\r\n              size=\"mini\"\r\n              :controls=\"false\"\r\n              @change=\"v => info.left = v\"\r\n            ></el-input-number>\r\n            <label style=\"margin-left: 5px\" class=\"label-box\">Y</label>\r\n            <el-input-number\r\n              :value=\"info.top\"\r\n              size=\"mini\"\r\n              :controls=\"false\"\r\n              @change=\"v => info.top = v\"\r\n            ></el-input-number>\r\n          </div>\r\n          <div class=\"inner-item\">\r\n            <label class=\"label-box\">宽</label>\r\n            <el-input-number\r\n              :value=\"info.width\"\r\n              size=\"mini\"\r\n              :min=\"0\"\r\n              :controls=\"false\"\r\n              @change=\"v => updateWidth(v)\"\r\n            ></el-input-number>\r\n            <label style=\"margin-left: 5px\" class=\"label-box\">高</label>\r\n            <el-input-number\r\n              :value=\"info.height\"\r\n              size=\"mini\"\r\n              :min=\"0\"\r\n              :controls=\"false\"\r\n              @change=\"v => updateHeight(v)\"\r\n            ></el-input-number>\r\n          </div>\r\n          <div class=\"inner-item\">\r\n            <label class=\"label-box\">角度</label>\r\n            <el-input-number\r\n              :value=\"info.angle\"\r\n              size=\"mini\"\r\n              :min=\"0\"\r\n              :max=\"360\"\r\n              :controls=\"false\"\r\n              @change=\"v => info.angle = v\"\r\n            ></el-input-number>\r\n          </div>\r\n          <template v-if=\"info.type === 'group'\">\r\n            <div class=\"inner-item\">\r\n              <label class=\"label-box\">成员宽</label>\r\n              <el-input-number\r\n                :value=\"memberWidth\"\r\n                size=\"mini\"\r\n                :controls=\"false\"\r\n                @change=\"v => upGroupMemberPos('width', v)\"\r\n              ></el-input-number>\r\n              <label class=\"label-box\">成员高</label>\r\n              <el-input-number\r\n                :value=\"memberHeight\"\r\n                size=\"mini\"\r\n                :controls=\"false\"\r\n                @change=\"v => upGroupMemberPos('height', v)\"\r\n              ></el-input-number>\r\n            </div>\r\n            <div class=\"inner-item\">\r\n              <label class=\"label-box\">行间距</label>\r\n              <el-input-number\r\n                :value=\"memberSpaceTop\"\r\n                size=\"mini\"\r\n                :controls=\"false\"\r\n                @change=\"v => upGroupSize('row', v)\"\r\n              ></el-input-number>\r\n              <label class=\"label-box\">列间距</label>\r\n              <el-input-number\r\n                :value=\"memberSpaceLeft\"\r\n                size=\"mini\"\r\n                :controls=\"false\"\r\n                @change=\"v => upGroupSize('col', v)\"\r\n              ></el-input-number>\r\n            </div>\r\n          </template>\r\n        </div>\r\n        <i slot=\"reference\" class=\"iconfont icon-resize-\"></i>\r\n      </el-popover>\r\n    </div>\r\n    <div class=\"box-item\" @click=\"showGroup(1)\">\r\n      <el-popover\r\n        :value=\"groupVisible[1]\"\r\n        placement=\"left\"\r\n        width=\"360\"\r\n        trigger=\"manual\"\r\n        popper-class=\"ds-seat-design-popover\"\r\n      >\r\n        <div class=\"header\">\r\n          属性\r\n          <i class=\"el-icon-arrow-right\" @click=\"closeGroup(1)\"></i>\r\n        </div>\r\n        <div class=\"inner\">\r\n          <template v-if=\"!infoIsSec\">\r\n            <div v-if=\"info.type === 'bed' || info.memberType === 'bed' \" class=\"inner-item\">\r\n              <label class=\"label-box\">宿舍</label>\r\n              <el-input v-model=\"info.dormName\" size=\"mini\"></el-input>\r\n              <label style=\"margin-left: 5px\" class=\"label-box\">楼层</label>\r\n              <el-input v-model=\"info.floorName\" size=\"mini\"></el-input>\r\n            </div>\r\n            <div v-if=\"info.type === 'bed' || info.memberType === 'bed' \" class=\"inner-item\">\r\n              <label class=\"label-box\">类型</label>\r\n              <el-select v-model=\"info.dormType\" size=\"mini\">\r\n                <el-option v-for=\"(sex, s) in sexList\" :key=\"s\" :label=\"sex.txt\" :value=\"sex.val\"></el-option>\r\n              </el-select>\r\n              <label style=\"margin-left: 5px\" class=\"label-box\">备注</label>\r\n              <el-input v-model=\"info.remark\" size=\"mini\"></el-input>\r\n            </div>\r\n            <div v-if=\"info.type === 'seat' || info.memberType === 'seat' \" class=\"inner-item\">\r\n              <label class=\"label-box\">房间号</label>\r\n              <el-input v-model=\"info.roomNum\" size=\"mini\"></el-input>\r\n              <label style=\"margin-left: 5px\" class=\"label-box\">备注</label>\r\n              <el-input v-model=\"info.remark\" size=\"mini\"></el-input>\r\n            </div>\r\n            <div class=\"inner-item\">\r\n              <label class=\"label-box\" style=\"width: 80px;margin-right: 10px\">显示文本</label>\r\n              <el-radio-group v-model=\"info.showText\">\r\n                <el-radio :label=\"1\">是</el-radio>\r\n                <el-radio :label=\"2\">否</el-radio>\r\n              </el-radio-group>\r\n            </div>\r\n            \r\n            <div\r\n              v-if=\"info.member && info.member.length>0\"\r\n              class=\"inner-item\"\r\n              :class=\"info.member.length>4? 'scroll-container': ''\"\r\n            >\r\n              <div v-for=\"(item, it) in info.member\" :key=\"it\">\r\n                <div class=\"title\">{{ item.rowIndex + 1 }}行{{ item.colIndex + 1 }}列:</div>\r\n                <label class=\"label-box\">序号</label>\r\n                <input type=\"text\" class=\"input-mini\" :value=\"item.seatNum\" @change=\"setNumber($event, item)\"/>\r\n                <label class=\"label-box\">文本</label>\r\n                <input type=\"text\" class=\"input-mini\" :value=\"item.seatTxt\" @change=\"e => item.seatTxt=e.target.value\"/>\r\n              </div>\r\n            </div>\r\n            <div v-else class=\"inner-item\">\r\n              <label class=\"label-box\">序号</label>\r\n              <input type=\"text\" class=\"input-mini\" :value=\"info.seatNum\" @change=\"setNumber($event, info)\" />\r\n              <label class=\"label-box\">文本</label>\r\n              <input type=\"text\" class=\"input-mini\" :value=\"info.seatTxt\" @change=\"e => info.seatTxt=e.target.value\"/>\r\n            </div>\r\n          </template>\r\n          <template v-else>\r\n            <div class=\"inner-item\">\r\n              <p>文本</p>\r\n              <el-input v-model=\"info.seatTxt\"></el-input>\r\n            </div>\r\n          </template>\r\n        </div>\r\n        <i slot=\"reference\" class=\"iconfont icon-xingzhuang-wenzi\"></i>\r\n      </el-popover>\r\n    </div>\r\n    <div class=\"box-item\" @click=\"showGroup(2)\">\r\n      <el-popover\r\n        :value=\"groupVisible[2]\"\r\n        placement=\"left-start\"\r\n        width=\"365\"\r\n        trigger=\"manual\"\r\n        popper-class=\"ds-seat-design-popover\"\r\n      >\r\n        <div class=\"header\">\r\n          上传\r\n          <i v-if=\"!infoIsSec\" class=\"el-icon el-icon-s-tools\" @click=\"dialogVisible = true\"></i>\r\n          <i class=\"el-icon-arrow-right\" @click=\"closeGroup(2)\"></i>\r\n        </div>\r\n        <div v-if=\"!infoIsSec\" class=\"inner inner-flex\">\r\n          <div v-for=\"(state, s) in info.stateList\" :key=\"state.statusValue\" class=\"upload-box\">\r\n            <div class=\"img-box\" @click=\"uploadMultiple(state)\">\r\n              <img v-if=\"state.img\" :src=\"getImagePath(state.img)\">\r\n            </div>\r\n            <p>{{ state.statusText }}</p>\r\n          </div>\r\n        </div>\r\n        <div v-else>\r\n          <div class=\"inner\">\r\n            <div class=\"single-upload-box\" @click=\"uploadSingle\">\r\n              <img v-if=\"info.bgImg\" :src=\"getImagePath(info.bgImg)\" alt=\"\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <i slot=\"reference\" class=\"iconfont icon-tupiantianjia\"></i>\r\n      </el-popover>\r\n    </div>\r\n    \r\n    <el-dialog\r\n      title=\"座位状态管理\"\r\n      :visible.sync=\"dialogVisible\"\r\n      :modal=\"false\"\r\n      width=\"35%\"\r\n    >\r\n      <div class=\"dialog-box\">\r\n        <p class=\"title\">说明</p>\r\n        <p>statusText - 座位状态</p>\r\n        <p>statusValue - 座位状态对应的值</p>\r\n        <p>couldSeat - 此状态下人员能否入座（1能、2否）</p>\r\n        <p class=\"title\">默认状态</p>\r\n        <p><span>正常|1|1</span><span>已排|2|1</span></p>\r\n        <p><span>锁定|3|2</span><span>禁用|4|2</span></p>\r\n        \r\n        <p class=\"title\">自定义座位状态</p>\r\n        <el-input\r\n          v-model=\"info.statusKv\"\r\n          type=\"textarea\"\r\n          :rows=\"5\"\r\n          placeholder=\"statusText | statusValue | couldSeat 以|分隔，一行定义一种状态\"\r\n        ></el-input>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button size=\"small\" type=\"primary\" @click=\"saveStatus\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/designer/seat/constant\";\r\nimport {\r\n  updateGroupMemberPosition,\r\n  uploadImg,\r\n  getMemberSpaceTop,\r\n  getMemberSpaceLeft,\r\n  createUploadFileInput\r\n} from \"../func\"\r\nimport {mapState} from \"vuex\"\r\n  \r\nexport default {\r\n  name: \"RightTools\",\r\n  props: {},\r\n  data() {\r\n    return {\r\n      showTool: false,\r\n      sexList: [\r\n        {val: null, txt: \"请选择\"},\r\n        {val: 1, txt: \"男宿舍\"},\r\n        {val: 2, txt: \"女宿舍\"},\r\n      ],\r\n      defaultStateList: [\r\n        {\r\n          img: \"\",\r\n          statusText: \"正常\",\r\n          statusValue: 1,\r\n          couldSeat: 1,\r\n        },\r\n        {\r\n          img: \"\",\r\n          statusText: \"已排\",\r\n          statusValue: 2,\r\n          couldSeat: 1\r\n        },\r\n        {\r\n          img: \"\",\r\n          statusText: \"锁定\",\r\n          statusValue: 3,\r\n          couldSeat: 2\r\n        },\r\n        {\r\n          img: \"\",\r\n          statusText: \"禁用\",\r\n          statusValue: 4,\r\n          couldSeat: 2\r\n        },\r\n      ],\r\n      info: {\r\n        stateList: []\r\n      },\r\n      groupVisible: [false, false, false],\r\n      visiblePointer: null,\r\n      oldVisibleStatus: false,\r\n      dialogVisible: false,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(\"seatDesign\", {\r\n      activeId: \"activeId\",\r\n    }),\r\n    memberWidth() {\r\n      if (_.isArray(this.info.member)) {\r\n        return this.info.member[0].width\r\n      } else {\r\n        return undefined\r\n      }\r\n    },\r\n    memberHeight() {\r\n      if (_.isArray(this.info.member)) {\r\n        return this.info.member[0].height\r\n      } else {\r\n        return undefined\r\n      }\r\n    },\r\n    memberSpaceTop() {\r\n      if (_.isArray(this.info.member)) {\r\n        return getMemberSpaceTop(this.info)\r\n      } else {\r\n        return undefined\r\n      }\r\n    },\r\n    memberSpaceLeft() {\r\n      if (_.isArray(this.info.member)) {\r\n        return getMemberSpaceLeft(this.info)\r\n      } else {\r\n        return undefined\r\n      }\r\n    },\r\n    infoIsSec() {\r\n      return /^sec_/.test(this.info.type)\r\n    }\r\n      \r\n  },\r\n  watch: {\r\n    activeId(val) {\r\n      if (!val) {\r\n        this.showTool = false;\r\n        const arr = new Array(3);\r\n        this.groupVisible = _.fill(arr, false);\r\n      } else {\r\n        eventBus.emit(eventBusEvent.GET_ACTIVE_SEAT, seat => {\r\n          if (!_.isArray(seat.stateList) || seat.stateList.length === 0) seat.stateList = _.cloneDeep(this.defaultStateList);\r\n          this.info = seat;\r\n        });\r\n          \r\n        this.showTool = true;\r\n        this.$nextTick(() => {\r\n          this.$set(this.groupVisible, this.visiblePointer, this.oldVisibleStatus);\r\n        })\r\n      }\r\n    },\r\n      \r\n    info: {\r\n      handler(val) {\r\n        this.$store.commit(\"seatDesign/changeSeatInfo\", val);\r\n      },\r\n      deep: false\r\n    }\r\n  },\r\n  methods: {\r\n    uploadSingle(){\r\n      const self = this;\r\n      let upDOM = createUploadFileInput();\r\n      $(upDOM).on(\"change\", function () {\r\n        if (!upDOM.files || upDOM.files.length === 0) return false;\r\n    \r\n        const formData = new FormData();\r\n        formData.append(\"file\", upDOM.files[0]);\r\n        const callback = result => {\r\n          //清除创建的input\r\n          $(upDOM).val(\"\");\r\n          $(upDOM).remove();\r\n          upDOM = null;\r\n    \r\n          if (result === \"error\")  return false;\r\n          self.info.bgImg = result[0].relativePath;\r\n        };\r\n        uploadImg.call(self, formData, callback);\r\n      })\r\n      $(upDOM).click();\r\n    },\r\n    uploadMultiple(item) {\r\n      const self = this;\r\n      let upDOM = createUploadFileInput();\r\n      upDOM.multiple = true;\r\n      $(upDOM).on(\"change\", function () {\r\n        if (!upDOM.files || upDOM.files.length === 0) return false;\r\n          \r\n        const formData = new FormData();\r\n        for (let i = 0; i < upDOM.files.length; i++) {\r\n          let file = upDOM.files[i];\r\n          formData.append(\"file_\" + i, file);\r\n        }\r\n        uploadImg.call(self, formData, res => {\r\n          //清除创建的input\r\n          $(upDOM).val(\"\");\r\n          $(upDOM).remove();\r\n          upDOM = null;\r\n            \r\n          if (res === \"error\") return false;\r\n            \r\n          if (res.length === 1) {\r\n            item.img = res[0].relativePath;\r\n          } else {\r\n            self.info.stateList.forEach((item, index) => {\r\n              if (res[index]) {\r\n                item.img = res[index].relativePath;\r\n              }\r\n            })\r\n          }\r\n  \r\n          //如果是group对象\r\n          if (self.info.type === \"group\"){\r\n            self.info.isFrozenMemberSty = false;\r\n            self.info.member.forEach(member => {\r\n              member.stateList = self.info.stateList\r\n            })\r\n          }\r\n        });\r\n      })\r\n      $(upDOM).click();\r\n    },\r\n    closeGroup(pointer) {\r\n      this.visiblePointer = pointer;\r\n      this.$set(this.groupVisible, pointer, false);\r\n      this.oldVisibleStatus = false;\r\n    },\r\n    showGroup(pointer) {\r\n      this.visiblePointer = pointer;\r\n      const arr = new Array(3);\r\n      this.groupVisible = _.fill(arr, false);\r\n      this.$set(this.groupVisible, pointer, true);\r\n      this.oldVisibleStatus = true;\r\n    },\r\n    saveStatus() {\r\n      if (!this.info.statusKv){\r\n        this.dialogVisible = false;\r\n        return;\r\n      }\r\n      const arr = this.info.statusKv.split(\"\\n\");\r\n      const defaultArr = _.cloneDeep(this.defaultStateList);\r\n      let temp, obj, result = [];\r\n      let queue = [];\r\n      let judge = true;\r\n      let msg =\"\";\r\n        \r\n      arr.some(item => {\r\n        temp = item.split(\"|\").map(str => {\r\n          return str.replace(/(^\\s*)|(\\s*$)/g, \"\");    //去掉首尾的空格\r\n        });\r\n        if (+temp[2] !== 1 && +temp[2] !== 2) {\r\n          judge = false\r\n          msg = \"statusText|statusValue|couldSeat  当中的couldSeat只能为1或2\"\r\n          return true\r\n        }\r\n          \r\n        let sIndex = defaultArr.findIndex(a => a.statusValue === +temp[1]);\r\n        if (sIndex !== -1){\r\n          judge = false;\r\n          msg = \"你的 statusValue 与系统默认的冲突了\"\r\n          return true\r\n        }\r\n          \r\n        let qIndex = queue.indexOf(temp[1]);\r\n        if (qIndex !== -1){\r\n          judge = false;\r\n          msg = \"你设置了重复的 statusValue\"\r\n          return true\r\n        }\r\n        queue.push(temp[1])\r\n          \r\n        obj = {\r\n          img: \"\",\r\n          statusText: temp[0],\r\n          statusValue: +temp[1],\r\n          couldSeat: +temp[2]\r\n        };\r\n        result.push(obj);\r\n      });\r\n        \r\n      if (!judge) {\r\n        this.saveStatusError(msg);\r\n        return\r\n      }\r\n        \r\n      const diffArr = _.differenceBy(result, defaultArr, \"statusValue\");\r\n        \r\n      this.info.stateList = _.concat(defaultArr, diffArr).sort((a, b) => a.statusValue - b.statusValue);\r\n      //如果是group对象\r\n      if (this.info.type === \"group\"){\r\n        this.info.isFrozenMemberSty = false;\r\n        this.info.member.forEach(member => {\r\n          member.stateList = this.info.stateList\r\n        })\r\n      }\r\n      this.dialogVisible = false;\r\n    },\r\n    saveStatusError(msg){\r\n      this.info.statusKv = \"\";\r\n      dsf.layer.alert(msg);\r\n    },\r\n    getImagePath(path) {\r\n      return path ? dsf.url.getWebPath(path) : null;\r\n    },\r\n    getInfoTypeName() {\r\n      switch (this.info.type) {\r\n      case 'seat':\r\n        return '座位'\r\n      case 'bed':\r\n        return '床位'\r\n      case 'group':\r\n        if (this.info.memberType === 'seat') return '座位组'\r\n        if (this.info.memberType === 'bed') return '床位组'\r\n        break;\r\n      case 'sec_rect':\r\n        return \"矩形\"\r\n      }\r\n    },\r\n    updateWidth(width) {\r\n      this.info.width = width;\r\n      this.info.isFrozenSty = false;  //重新计算样式\r\n      if (this.info.type === \"group\") {\r\n        this.info.isFrozenMemberSty = false;  //重新计算成员样式\r\n        updateGroupMemberPosition(this.info);\r\n      }\r\n    },\r\n    updateHeight(height) {\r\n      this.info.height = height;\r\n      this.info.isFrozenSty = false;  //重新计算样式\r\n      if (this.info.type === \"group\") {\r\n        this.info.isFrozenMemberSty = false;  //重新计算成员样式\r\n        updateGroupMemberPosition(this.info);\r\n      }\r\n    },\r\n    upGroupMemberPos(type, val) {\r\n      const group = _.cloneDeep(this.info);\r\n      group.member.forEach(item => {\r\n        type === \"width\" ?\r\n          item.width = val :\r\n          item.height = val\r\n      })\r\n      updateGroupMemberPosition(group);\r\n      this.info = group;\r\n      this.info.isFrozenMemberSty = false;  //重新计算成员样式\r\n    },\r\n    upGroupSize(type, val) {\r\n      const group = _.cloneDeep(this.info);\r\n      const one = group.member[0];\r\n      if (type === \"row\") {\r\n        group.height = (group.rows - 1) * val + group.rows * one.height;\r\n        updateGroupMemberPosition(group)\r\n      } else if (type === \"col\") {\r\n        group.width = (group.cols - 1) * val + group.cols * one.width;\r\n        updateGroupMemberPosition(group)\r\n      }\r\n      this.info = group;\r\n      this.info.isFrozenMemberSty = false;  //重新计算成员样式\r\n    },\r\n    setNumber(evt, item) {\r\n      let val = evt.target.value;\r\n      let str = val.replace(/[^0-9]/ig, \"\");\r\n        \r\n      if (str && str.length>0){\r\n        evt.target.value = parseInt(str)\r\n        item.seatNum = parseInt(str)\r\n      }\r\n      else {\r\n        evt.target.value = \"\"\r\n        item.seatNum = \"\"\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightTools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightTools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rightTools.vue?vue&type=template&id=0f8df1f2&\"\nimport script from \"./rightTools.vue?vue&type=script&lang=js&\"\nexport * from \"./rightTools.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0f8df1f2')) {\n      api.createRecord('0f8df1f2', component.options)\n    } else {\n      api.reload('0f8df1f2', component.options)\n    }\n    module.hot.accept(\"./rightTools.vue?vue&type=template&id=0f8df1f2&\", function () {\n      api.rerender('0f8df1f2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/seatDesign/rightTools.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"seat-designer-page\",\n      style: _vm.canvasCss,\n      on: {\n        mousedown: function($event) {\n          if (\n            !$event.type.indexOf(\"key\") &&\n            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n              \"Left\",\n              \"ArrowLeft\"\n            ])\n          ) {\n            return null\n          }\n          if (\"button\" in $event && $event.button !== 0) {\n            return null\n          }\n          return _vm.preRegion.apply(null, arguments)\n        }\n      }\n    },\n    [\n      _c(\"region\", {\n        attrs: { visible: _vm.regionVisible, region: _vm.regionRect }\n      }),\n      _c(\n        \"div\",\n        { style: _vm.panelSty, attrs: { id: \"panel_outer\" } },\n        [\n          _vm._t(\"seat\"),\n          _c(\"div\", {\n            staticClass: \"ds_seat_panel_bg\",\n            attrs: { id: \"panel_bg\" }\n          })\n        ],\n        2\n      ),\n      _vm._t(\"seatPop\")\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.visible\n    ? _c(\"div\", { staticClass: \"region\", style: _vm.regionSty })\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"visible\" class=\"region\" :style=\"regionSty\"></div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Region\",\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    region: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      test: false\r\n    }\r\n  },\r\n  computed: {\r\n    regionSty() {\r\n      return {\r\n        left: this.region.left + \"px\",\r\n        top: this.region.top + \"px\",\r\n        width: this.region.width + \"px\",\r\n        height: this.region.height + \"px\",\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./region.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./region.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./region.vue?vue&type=template&id=5b7dcb48&\"\nimport script from \"./region.vue?vue&type=script&lang=js&\"\nexport * from \"./region.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5b7dcb48')) {\n      api.createRecord('5b7dcb48', component.options)\n    } else {\n      api.reload('5b7dcb48', component.options)\n    }\n    module.hot.accept(\"./region.vue?vue&type=template&id=5b7dcb48&\", function () {\n      api.rerender('5b7dcb48', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/seatDesign/region.vue\"\nexport default component.exports","<template>\r\n  <div class=\"seat-designer-page\" :style=\"canvasCss\" @mousedown.left=\"preRegion\">\r\n    <region :visible=\"regionVisible\" :region=\"regionRect\"></region>\r\n    <div id=\"panel_outer\" :style=\"panelSty\">\r\n      <slot name=\"seat\"></slot>\r\n      <div id=\"panel_bg\" class=\"ds_seat_panel_bg\"></div>\r\n    </div>\r\n    <slot name=\"seatPop\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex';\r\nimport region from \"_platform/designer/seat/seatDesign/region\"\r\n\r\nexport default {\r\n  name: \"Canvas\",\r\n  components: {\r\n    region,\r\n  },\r\n  data() {\r\n    return {\r\n      regionVisible: false,\r\n      regionRect: {},   //框选\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('seatDesign', {\r\n      compelPanelSize: \"compelPanelSize\",\r\n      panelSize: \"panelSize\",\r\n      canvasCss(state) {\r\n        const {width, height} = state.compelPanelSize;\r\n        let _wid = width ? `${width}px` : '100%';\r\n        let _hit = height ? `${height}px` : '100%';\r\n        return {width: _wid, height: _hit}\r\n      },\r\n      panelParentSize(state) {\r\n        let {width, height} = state.compelPanelSize;\r\n        console.log(width)\r\n        console.log(height)\r\n        width = width || $(\".seat-designer-page\").width();\r\n        height = height || $(\".seat-designer-page\").height();\r\n        return {\r\n          width: width,\r\n          height: height\r\n        }\r\n      }\r\n    }),\r\n    panelSty() {\r\n      return {\r\n        width: this.panelSize.width ? this.panelSize.width + \"px\" : \"100%\",\r\n        height: this.panelSize.height ? this.panelSize.height + \"px\" : \"100%\",\r\n        left: this.panelSize.left + \"px\",\r\n        top: this.panelSize.top + \"px\"\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    \"compelPanelSize\": {\r\n      handler({width, height}) {\r\n        const panelSize = {\r\n          width: width,\r\n          height: height,\r\n          scale: 1,\r\n          left: 0,\r\n          top: 0\r\n        }\r\n\r\n        this.$store.commit(\"seatDesign/changePanelSize\", panelSize);\r\n      },\r\n      deep: true\r\n\r\n    },\r\n  },\r\n  mounted() {\r\n    const self = this;\r\n    $(\".seat-designer-page\")[0].addEventListener('mousewheel', self.handleScroll);\r\n\r\n  },\r\n  methods: {\r\n    handleScroll(evt) {\r\n      if (!evt.ctrlKey) return;\r\n      const self = this;\r\n      let wheelAction = evt.wheelDelta < 0 ? \"down\" : \"up\";\r\n\r\n      //获取鼠标在panel_outer中的位置\r\n      let pos = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n        x: evt.pageX,\r\n        y: evt.pageY\r\n      });\r\n\r\n      let {width: pWid, height: pHit} = self.panelParentSize;\r\n\r\n      //获取当前的实际宽度\r\n      let w = pWid * self.panelSize.scale;\r\n      let h = pHit * self.panelSize.scale;\r\n\r\n      //获取鼠标位置和宽度高度的比例值\r\n      let rw = pos.x / w;\r\n      let rh = pos.y / h;\r\n\r\n      let newS = self.panelSize.scale;\r\n      if (wheelAction === \"up\") {\r\n        newS += 0.1;\r\n      } else if (wheelAction === \"down\") {\r\n        newS -= 0.1;\r\n      }\r\n\r\n      //缩放比例最小0.1\r\n      if (newS >= 0.1) {\r\n        let panel = $(\"#panel_outer\");\r\n        let sw = pWid * newS;\r\n        let sh = pHit * newS;\r\n        let l = panel.position().left + pos.x - (sw * rw);\r\n        let t = panel.position().top + pos.y - (sh * rh);\r\n        const panelSize = {\r\n          scale: Math.round(newS * 10) / 10,\r\n          width: Math.floor(sw),\r\n          height: Math.floor(sh),\r\n          left: Math.floor(l),\r\n          top: Math.floor(t)\r\n        };\r\n        self.$store.commit(\"seatDesign/changePanelSize\", panelSize);\r\n      }\r\n\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n    },\r\n    preRegion(evt) {\r\n      const self = this;\r\n      self.$store.commit(\"seatDesign/changeActiveId\", \"\");\r\n      let downPos = dsf.math.convertLocalCoordinate('.seat-designer-page', { x: evt.pageX, y: evt.pageY });\r\n      function handleMouseMove(evt){\r\n        self.regionVisible = true;\r\n        let movePos = dsf.math.convertLocalCoordinate('.seat-designer-page', { x: evt.pageX, y: evt.pageY });\r\n        self.$set(self.regionRect, \"left\", downPos.x > movePos.x? movePos.x: downPos.x);\r\n        self.$set(self.regionRect, \"top\", downPos.y > movePos.y? movePos.y: downPos.y);\r\n        self.$set(self.regionRect, \"width\", Math.abs(movePos.x - downPos.x));\r\n        self.$set(self.regionRect, \"height\",Math.abs(movePos.y - downPos.y));\r\n      }\r\n      function handleMouseUp(){\r\n        $(document).off(\"mousemove.region\");\r\n        self.$store.commit(\"seatDesign/changeRegionPosition\", self.regionRect);\r\n        self.regionVisible = false;\r\n        self.regionRect = {};\r\n      }\r\n\r\n      $(document).off(\"mousemove.region\");\r\n      $(document).on(\"mousemove.region\", function (evt) {\r\n        handleMouseMove(evt);\r\n      })\r\n      $(document).one(\"mouseup.region\", function () {\r\n        handleMouseUp();\r\n      })\r\n\r\n    },\r\n  },\r\n\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./canvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./canvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./canvas.vue?vue&type=template&id=bfc4d280&\"\nimport script from \"./canvas.vue?vue&type=script&lang=js&\"\nexport * from \"./canvas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('bfc4d280')) {\n      api.createRecord('bfc4d280', component.options)\n    } else {\n      api.reload('bfc4d280', component.options)\n    }\n    module.hot.accept(\"./canvas.vue?vue&type=template&id=bfc4d280&\", function () {\n      api.rerender('bfc4d280', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/seatDesign/canvas.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"seat-item-container\",\n      class: _vm.switchNumSet ? \"set-num\" : \"normal\"\n    },\n    [\n      _vm.verLine.visible\n        ? _c(\"div\", { staticClass: \"vertical-line\", style: _vm.verLineSty })\n        : _vm._e(),\n      _vm.horLine.visible\n        ? _c(\"div\", { staticClass: \"horizontal-line\", style: _vm.horLineSty })\n        : _vm._e(),\n      _vm.selectPosition.visible\n        ? _c(\n            \"div\",\n            {\n              staticClass: \"selected-box\",\n              style: _vm.selectSty,\n              on: {\n                mousedown: function($event) {\n                  if (\n                    !$event.type.indexOf(\"key\") &&\n                    _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                      \"Left\",\n                      \"ArrowLeft\"\n                    ])\n                  ) {\n                    return null\n                  }\n                  if (\"button\" in $event && $event.button !== 0) {\n                    return null\n                  }\n                  return _vm.selectMove.apply(null, arguments)\n                }\n              }\n            },\n            [\n              _c(\"div\", { staticClass: \"select\" }, [\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor circle\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.selectRotate.apply(null, arguments)\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", { staticClass: \"anchor line\" })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor lt\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.selectScale($event, \"lt\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor t\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.selectScale($event, \"t\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor rt\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.selectScale($event, \"rt\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor l\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.selectScale($event, \"l\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor r\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.selectScale($event, \"r\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor lb\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.selectScale($event, \"lb\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor b\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.selectScale($event, \"b\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor rb\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.selectScale($event, \"rb\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", { staticClass: \"anchor info\" }, [\n                      _vm._v(\n                        \" 宽:\" +\n                          _vm._s(_vm.selectPosition.width) +\n                          \";高:\" +\n                          _vm._s(_vm.selectPosition.height) +\n                          \";角度:\" +\n                          _vm._s(_vm.selectPosition.angle) +\n                          \" \"\n                      )\n                    ])\n                  : _vm._e()\n              ])\n            ]\n          )\n        : _vm._e(),\n      _vm._l(_vm.mitems, function(item, it) {\n        return _c(\n          \"div\",\n          {\n            key: item.id,\n            staticClass: \"seat-box\",\n            class: {\n              active: _vm.activeId === item.id,\n              hideText: item.showText === 2\n            },\n            style: _vm.getItemSty(item),\n            on: {\n              mousedown: function($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                    \"Left\",\n                    \"ArrowLeft\"\n                  ])\n                ) {\n                  return null\n                }\n                if (\"button\" in $event && $event.button !== 0) {\n                  return null\n                }\n                return _vm.preMove($event, item)\n              },\n              contextmenu: function($event) {\n                return _vm.popMenu($event, item)\n              }\n            }\n          },\n          [\n            _c(\n              \"div\",\n              {\n                staticClass: \"seat\",\n                on: {\n                  dblclick: function($event) {\n                    $event.stopPropagation()\n                    return _vm.openEdit($event, item)\n                  }\n                }\n              },\n              [\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor circle\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preRotate($event, item)\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", { staticClass: \"anchor line\" })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor lt\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, item, \"lt\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor t\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, item, \"t\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor rt\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, item, \"rt\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"p\", [_vm._v(_vm._s(item.seatTxt))])\n                  : _c(\n                      \"p\",\n                      {\n                        staticClass: \"num\",\n                        on: {\n                          dblclick: function($event) {\n                            $event.stopPropagation()\n                            return _vm.openSetNum($event, item)\n                          }\n                        }\n                      },\n                      [_vm._v(_vm._s(item.seatNum))]\n                    ),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor l\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, item, \"l\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor r\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, item, \"r\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor lb\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, item, \"lb\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor b\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, item, \"b\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor rb\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, item, \"rb\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", { staticClass: \"anchor info\" }, [\n                      _vm._v(\n                        \"宽:\" +\n                          _vm._s(item.width) +\n                          \";高:\" +\n                          _vm._s(item.height) +\n                          \";角度:\" +\n                          _vm._s(item.angle)\n                      )\n                    ])\n                  : _vm._e()\n              ]\n            )\n          ]\n        )\n      }),\n      _vm._l(_vm.groups, function(group, it) {\n        return _c(\n          \"div\",\n          {\n            key: group.id,\n            staticClass: \"group-box\",\n            class: {\n              active: _vm.activeId === group.id,\n              hideText: group.showText === 2\n            },\n            style: _vm.getItemSty(group),\n            on: {\n              mousedown: function($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                    \"Left\",\n                    \"ArrowLeft\"\n                  ])\n                ) {\n                  return null\n                }\n                if (\"button\" in $event && $event.button !== 0) {\n                  return null\n                }\n                return _vm.preMove($event, group)\n              },\n              contextmenu: function($event) {\n                return _vm.popMenu($event, group)\n              }\n            }\n          },\n          [\n            _c(\n              \"div\",\n              { staticClass: \"group\" },\n              [\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor circle\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preRotate($event, group)\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", { staticClass: \"anchor line\" })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor lt\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, group, \"lt\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor t\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, group, \"t\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor rt\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, group, \"rt\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor l\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, group, \"l\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor r\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, group, \"r\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor lb\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, group, \"lb\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor b\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, group, \"b\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", {\n                      staticClass: \"anchor rb\",\n                      on: {\n                        mousedown: function($event) {\n                          if (\n                            !$event.type.indexOf(\"key\") &&\n                            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                              \"Left\",\n                              \"ArrowLeft\"\n                            ])\n                          ) {\n                            return null\n                          }\n                          if (\"button\" in $event && $event.button !== 0) {\n                            return null\n                          }\n                          return _vm.preScale($event, group, \"rb\")\n                        }\n                      }\n                    })\n                  : _vm._e(),\n                !_vm.switchNumSet\n                  ? _c(\"div\", { staticClass: \"anchor info\" }, [\n                      _vm._v(\n                        \"宽:\" +\n                          _vm._s(group.width) +\n                          \";高:\" +\n                          _vm._s(group.height) +\n                          \";角度:\" +\n                          _vm._s(group.angle) +\n                          \" \"\n                      )\n                    ])\n                  : _vm._e(),\n                _vm._l(group.member, function(member, m) {\n                  return _c(\n                    \"div\",\n                    {\n                      key: member.id,\n                      staticClass: \"member\",\n                      style: _vm.getMemberSty(member, group),\n                      on: {\n                        click: function($event) {\n                          $event.stopPropagation()\n                          return _vm.setOrderNum(member)\n                        },\n                        dblclick: function($event) {\n                          $event.stopPropagation()\n                          return _vm.openEdit($event, member)\n                        }\n                      }\n                    },\n                    [\n                      !_vm.switchNumSet\n                        ? _c(\"p\", [_vm._v(_vm._s(member.seatTxt))])\n                        : _c(\n                            \"p\",\n                            {\n                              staticClass: \"num\",\n                              on: {\n                                dblclick: function($event) {\n                                  $event.stopPropagation()\n                                  return _vm.openSetNum($event, member)\n                                }\n                              }\n                            },\n                            [_vm._v(_vm._s(member.seatNum))]\n                          )\n                    ]\n                  )\n                })\n              ],\n              2\n            )\n          ]\n        )\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"seat-item-container\" :class=\"switchNumSet? 'set-num': 'normal'\">\r\n    <!--参考线-->\r\n    <div v-if=\"verLine.visible\" class=\"vertical-line\" :style=\"verLineSty\"></div>\r\n    <div v-if=\"horLine.visible\" class=\"horizontal-line\" :style=\"horLineSty\"></div>\r\n    \r\n    <!--select框-->\r\n    <div v-if=\"selectPosition.visible\" class=\"selected-box\" :style=\"selectSty\" @mousedown.left=\"selectMove\">\r\n      <div class=\"select\">\r\n        <div v-if=\"!switchNumSet\" class=\"anchor circle\" @mousedown.left=\"selectRotate\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor line\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor lt\" @mousedown.left=\"selectScale($event, 'lt')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor t\" @mousedown.left=\"selectScale($event, 't')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor rt\" @mousedown.left=\"selectScale($event, 'rt')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor l\" @mousedown.left=\"selectScale($event, 'l')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor r\" @mousedown.left=\"selectScale($event, 'r')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor lb\" @mousedown.left=\"selectScale($event, 'lb')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor b\" @mousedown.left=\"selectScale($event, 'b')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor rb\" @mousedown.left=\"selectScale($event, 'rb')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor info\">\r\n          宽:{{ selectPosition.width }};高:{{ selectPosition.height }};角度:{{ selectPosition.angle }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!--seat-->\r\n    <div\r\n      v-for=\"(item, it) in mitems\"\r\n      :key=\"item.id\"\r\n      class=\"seat-box\"\r\n      :style=\"getItemSty(item)\"\r\n      :class=\"{active: activeId === item.id, hideText: item.showText === 2}\"\r\n      @mousedown.left=\"preMove($event, item)\"\r\n      @click.right=\"popMenu($event, item)\"\r\n    >\r\n      <div class=\"seat\" @dblclick.stop=\"openEdit($event, item)\">\r\n        <div v-if=\"!switchNumSet\" class=\"anchor circle\" @mousedown.left=\"preRotate($event, item)\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor line\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor lt\" @mousedown.left=\"preScale($event, item, 'lt')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor t\" @mousedown.left=\"preScale($event, item, 't')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor rt\" @mousedown.left=\"preScale($event, item, 'rt')\"></div>\r\n        <p v-if=\"!switchNumSet\">{{ item.seatTxt }}</p>\r\n        <p v-else class=\"num\" @dblclick.stop=\"openSetNum($event, item)\">{{ item.seatNum }}</p>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor l\" @mousedown.left=\"preScale($event, item, 'l')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor r\" @mousedown.left=\"preScale($event, item, 'r')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor lb\" @mousedown.left=\"preScale($event, item, 'lb')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor b\" @mousedown.left=\"preScale($event, item, 'b')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor rb\" @mousedown.left=\"preScale($event, item, 'rb')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor info\">宽:{{ item.width }};高:{{ item.height }};角度:{{ item.angle }}</div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!--group-->\r\n    <div\r\n      v-for=\"(group, it) in groups\"\r\n      :key=\"group.id\"\r\n      class=\"group-box\"\r\n      :style=\"getItemSty(group)\"\r\n      :class=\"{active: activeId === group.id, hideText: group.showText === 2}\"\r\n      @mousedown.left=\"preMove($event, group)\"\r\n      @click.right=\"popMenu($event, group)\"\r\n    >\r\n      <div class=\"group\">\r\n        <div v-if=\"!switchNumSet\" class=\"anchor circle\" @mousedown.left=\"preRotate($event, group)\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor line\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor lt\" @mousedown.left=\"preScale($event, group, 'lt')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor t\" @mousedown.left=\"preScale($event, group, 't')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor rt\" @mousedown.left=\"preScale($event, group, 'rt')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor l\" @mousedown.left=\"preScale($event, group, 'l')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor r\" @mousedown.left=\"preScale($event, group, 'r')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor lb\" @mousedown.left=\"preScale($event, group, 'lb')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor b\" @mousedown.left=\"preScale($event, group, 'b')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor rb\" @mousedown.left=\"preScale($event, group, 'rb')\"></div>\r\n        <div v-if=\"!switchNumSet\" class=\"anchor info\">宽:{{ group.width }};高:{{ group.height }};角度:{{ group.angle }}\r\n        </div>\r\n        <div\r\n          v-for=\"(member, m) in group.member\"\r\n          :key=\"member.id\"\r\n          :style=\"getMemberSty(member, group)\"\r\n          class=\"member\"\r\n          @click.stop=\"setOrderNum(member)\"\r\n          @dblclick.stop=\"openEdit($event, member)\">\r\n          <p v-if=\"!switchNumSet\">{{ member.seatTxt }}</p>\r\n          <p v-else class=\"num\" @dblclick.stop=\"openSetNum($event, member)\">{{ member.seatNum }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex';\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/designer/seat/constant\";\r\nimport {forzenOtherItems, unForzenAllItems, updateGroupMemberPosition} from \"_platform/designer/seat/func\"\r\n  \r\nexport default {\r\n  name: \"SeatItem\",\r\n  props: {\r\n    //所有座位\r\n    items: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    //所有组\r\n    groups: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      selectedItems: [],  //被选中座位(注:selectedItems各项与items各项引用的是同一个对象，改变selectedItems就会影响到items)\r\n      rectMinSize: [40, 40],    //缩放seat时的最小宽高\r\n      selectPosition: {   //框选的位置\r\n        top: 0,\r\n        left: 0,\r\n        width: 0,\r\n        height: 0,\r\n        visible: false\r\n      },\r\n      //垂直对齐线\r\n      verLine: {\r\n        left: 0,\r\n        visible: false\r\n      },\r\n      //水平对齐线\r\n      horLine: {\r\n        top: 0,\r\n        visible: false\r\n      },\r\n      maxOrderNum: null  //当前最大的序号\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(\"seatDesign\", {\r\n      panelSize: \"panelSize\",\r\n      newSeatItem: \"newSeatItem\",\r\n      newGroupItem: \"newGroupItem\",\r\n      activeId: \"activeId\",\r\n      regionPosition: \"regionPosition\",\r\n      seatInfo: \"seatInfo\",\r\n      switchNumSet: \"switchNumSet\"\r\n    }),\r\n    mitems() {\r\n      return this.items.filter(item => !(this.switchNumSet && /^sec_/.test(item.type)))\r\n    },\r\n    selectSty() {\r\n      const {scale} = this.panelSize;\r\n      return {\r\n        width: this.selectPosition.width * scale + \"px\",\r\n        height: this.selectPosition.height * scale + \"px\",\r\n        left: this.selectPosition.left * scale + \"px\",\r\n        top: this.selectPosition.top * scale + \"px\",\r\n        transform: `rotate(${this.selectPosition.angle}deg)`\r\n      }\r\n    },\r\n    verLineSty() {\r\n      return {\r\n        left: `${this.verLine.left * this.panelSize.scale}` + \"px\"\r\n      }\r\n    },\r\n    horLineSty() {\r\n      return {\r\n        top: `${this.horLine.top * this.panelSize.scale}` + \"px\"\r\n      }\r\n    },\r\n  },\r\n    \r\n  watch: {\r\n    newSeatItem(val) {\r\n      //冻结style, 避免重复渲染\r\n      forzenOtherItems.call(this);\r\n      //这里复制一个新的seat对象, 避免 vue里面 newSeatItem的迷之改变行为\r\n      const seatItem = _.assign({}, val);\r\n      this.items.push(seatItem);\r\n    },\r\n    newGroupItem(val) {\r\n      //冻结style, 避免重复渲染\r\n      forzenOtherItems.call(this);\r\n      //这里复制一个新的group对象, 避免 vue里面 newGroupItem的迷之改变行为\r\n      const groupItem = _.assign({}, val)\r\n      this.groups.push(groupItem);\r\n    },\r\n    regionPosition(val) {\r\n      const self = this;\r\n      //如果 regionPosition 的范围大小为0\r\n      if (_.isEmpty(val) || val.width === 0 || val.height === 0) {\r\n        forzenOtherItems.call(self);\r\n        self.selectedItems = [];\r\n        restSelectPostion.call(self);\r\n        return;\r\n      }\r\n        \r\n      const allItems = _.concat(self.items, self.groups)\r\n      self.selectedItems = _.filter(allItems, item => judgePos.call(self, item));\r\n      forzenOtherItems.call(self);\r\n        \r\n      if (self.selectedItems.length === 0) return;\r\n        \r\n      if (self.selectedItems.length === 1) {\r\n        self.$store.commit(\"seatDesign/changeActiveId\", self.selectedItems[0].id)\r\n      } else if (self.selectedItems.length > 1) {\r\n        self.selectPosition = getSelectPosition(self.selectedItems);\r\n      }\r\n    },\r\n    seatInfo: {\r\n      handler(val, oldVal) {\r\n        forzenOtherItems.call(this);    //这里之所以调用，为的是把 isFrozenMemberSty 设为true\r\n        if (val.type === 'group') {\r\n          let index = _.findIndex(this.groups, item => item.id === val.id);\r\n          this.$set(this.groups, index, val);\r\n        } else {\r\n          let index = _.findIndex(this.items, item => item.id === val.id);\r\n          this.$set(this.items, index, val);\r\n        }\r\n      },\r\n      deep: false\r\n    },\r\n    \"panelSize.scale\"() {\r\n      this.items.forEach(el => {\r\n        el.isFrozenSty = false\r\n      })\r\n      this.groups.forEach(el => {\r\n        el.isFrozenSty = false;\r\n        el.isFrozenMemberSty = false\r\n      })\r\n    },\r\n    selectedItems(val) {\r\n      if (val && val.length > 0) {\r\n        this.$store.commit(\"seatDesign/changeHaveSelectedItems\", true)\r\n      } else {\r\n        this.$store.commit(\"seatDesign/changeHaveSelectedItems\", false)\r\n      }\r\n    },\r\n    switchNumSet(val) {\r\n      unForzenAllItems.call(this)\r\n      if (val) {\r\n        getMaxOrderNum.call(this)\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    $(document).off(\"mouseup.scaleSeatItem\");\r\n    $(document).off(\"mousemove.scaleSeatItem\");\r\n  },\r\n  mounted() {\r\n    eventBus.on(eventBusEvent.KEY_CTRL_D, () => {\r\n      restSelectPostion.call(this);\r\n      this.selectedItems = [];\r\n      this.$store.commit(\"seatDesign/changeActiveId\", \"\");\r\n    })\r\n    eventBus.on(eventBusEvent.KEY_DELETE, () => {\r\n      this.deleteActiveSeatItem();\r\n    })\r\n    eventBus.on(eventBusEvent.GET_ACTIVE_SEAT, (callback) => {\r\n      const allItems = _.concat(this.items, this.groups);\r\n      const seat = allItems.find(item => item.id === this.activeId);\r\n      callback && callback(seat);\r\n    })\r\n    eventBus.on(eventBusEvent.CLEAN_ALL_SEAT_NUM, () => {\r\n      this.items.forEach(item => {\r\n        if (item.seatNum == item.seatTxt) item.seatTxt = null;\r\n        item.seatNum = null;\r\n      })\r\n      this.groups.forEach(group => {\r\n        group.member.forEach(item => {\r\n          if (item.seatNum == item.seatTxt) item.seatTxt = null;\r\n          item.seatNum = null\r\n        })\r\n      })\r\n      this.maxOrderNum = null;\r\n    })\r\n    eventBus.on(eventBusEvent.CLEAN_SELECT_SEAT_NUM, () => {\r\n      this.selectedItems.forEach(a => {\r\n        if (a.type !== \"group\") {\r\n          if (a.seatNum == a.seatTxt) a.seatTxt = null;\r\n          a.seatNum = null\r\n        } else {\r\n          a.member.forEach(b => {\r\n            if (b.seatNum == b.seatTxt) b.seatTxt = null;\r\n            b.seatNum = null\r\n          })\r\n        }\r\n      })\r\n      getMaxOrderNum.call(this);\r\n      this.clearSelectedItems();\r\n    })\r\n    eventBus.on(eventBusEvent.AFTER_QUICK_ORDER, () => {\r\n      getMaxOrderNum.call(this);\r\n      this.clearSelectedItems();\r\n    })\r\n  },\r\n  methods: {\r\n    getItemSty(item) {\r\n      if (item.isFrozenSty) return item.style;\r\n      const sty = {\r\n        width: item.width * this.panelSize.scale + \"px\",\r\n        height: item.height * this.panelSize.scale + \"px\",\r\n        left: item.left * this.panelSize.scale + \"px\",\r\n        top: item.top * this.panelSize.scale + \"px\",\r\n        transform: `rotate(${item.angle}deg)`\r\n      }\r\n      if (!this.switchNumSet && item.type !== \"group\") {\r\n        sty.background = getBgSty(item);\r\n      }\r\n      item.style = sty;\r\n      return sty\r\n    },\r\n    getMemberSty(member, group) {\r\n      //如果冻结了member的样式则直接返回\r\n      if (group.isFrozenMemberSty) return member.style;\r\n      console.log(\"redraw group member\");\r\n        \r\n      const sty = {\r\n        width: member.width * this.panelSize.scale + \"px\",\r\n        height: member.height * this.panelSize.scale + \"px\",\r\n        left: member.left * this.panelSize.scale + \"px\",\r\n        top: member.top * this.panelSize.scale + \"px\",\r\n      }\r\n      if (!this.switchNumSet) sty.background = getBgSty(group);\r\n      member.style = sty;\r\n      return sty\r\n    },\r\n    clearSelectedItems() {\r\n      this.selectedItems = [];\r\n      restSelectPostion.call(this);\r\n      this.$store.commit(\"seatDesign/changeActiveId\", \"\");\r\n    },\r\n    preScale(event, seatItem, action) {\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n      const self = this;\r\n      //重新计算style\r\n      forzenOtherItems.call(self, false);\r\n      if (seatItem.type === \"group\") seatItem.isFrozenMemberSty = false;\r\n        \r\n      const oldRect = _.assign({}, seatItem);\r\n      const newRect = _.assign({}, seatItem);\r\n        \r\n      //获取seat 缩放时参考的锚点\r\n      const basePoint = getRectBasePointByScale(oldRect, action);\r\n        \r\n      function handleScale(evt) {\r\n        if (!action || !basePoint) return;\r\n        let mousePosition = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        let afterScaleRect = scaleRect(\r\n          basePoint, oldRect, newRect, mousePosition, action,\r\n          seatItem.type !== 'group' ? self.rectMinSize : getGroupMinSize(oldRect)\r\n        );\r\n        _.assign(seatItem, afterScaleRect);\r\n          \r\n        if (seatItem.type === 'group') {\r\n          updateGroupMemberPosition(afterScaleRect);\r\n        }\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(document).off(\"mousemove.scaleSeatItem\");\r\n        forzenOtherItems.call(self);\r\n        if (seatItem.type === 'group') {\r\n          const member = seatItem.member[0];\r\n          (seatItem.rows === 1) && (seatItem.height = member.height);\r\n          (seatItem.cols === 1) && (seatItem.width = member.width);\r\n        }\r\n      }\r\n        \r\n      $(document).off(\"mousemove.scaleSeatItem\");\r\n      $(document).on(\"mousemove.scaleSeatItem\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleScale(evt);\r\n      }, 5));\r\n      $(document).one(\"mouseup.scaleSeatItem\", function () {\r\n        handleUp();\r\n      })\r\n    },\r\n    preMove(evt, seat) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      const self = this;\r\n      //如果排序设置开启则不走下面的逻辑\r\n      if (this.switchNumSet) {\r\n        //forzenOtherItems 在 setRect2Active上面\r\n        //先冻结除this.selectedItems 之外的所有样式,再将当前seat放入selectedItems,相当于当前seat也被冻结了\r\n        forzenOtherItems.call(self);\r\n        setRect2Active.call(self, seat);\r\n        this.setOrderNum(seat);\r\n        return;\r\n      }\r\n        \r\n        \r\n      setRect2Active.call(self, seat);\r\n      forzenOtherItems.call(self);\r\n      self.verLine.visible = false;\r\n      self.horLine.visible = false;\r\n        \r\n      const _otherSeatPoints = getOtherSeatPoints.call(self);\r\n      const otherSeatXy = getPointsXy(_otherSeatPoints);\r\n        \r\n      //用于计算seat的位置\r\n      const old_x = seat.left;\r\n      const old_y = seat.top;\r\n      let downPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n        x: evt.pageX,\r\n        y: evt.pageY\r\n      }, self.panelSize.scale);\r\n        \r\n      function handleMove(evt) {\r\n        let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        let moveDir = {\r\n          x: localPos.x - downPos.x,\r\n          y: localPos.y - downPos.y\r\n        };\r\n        seat.left = parseInt(old_x + moveDir.x);\r\n        seat.top = parseInt(old_y + moveDir.y);\r\n          \r\n        //计算对齐线位置\r\n        self.verLine.visible = false;\r\n        self.horLine.visible = false;\r\n        const _seatPoints = getRectPoint(seat, ['lt']);\r\n        const seatXy = getPointsXy(_seatPoints);\r\n        let a = computeAlignLine(seatXy, otherSeatXy, seat);\r\n        if (!a) return;\r\n        self.horLine.top = a.top;\r\n        self.horLine.visible = _.isNumber(a.top);\r\n        self.verLine.left = a.left;\r\n        self.verLine.visible = _.isNumber(a.left);\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(document).off(\"mousemove.moveSeatItem\");\r\n        forzenOtherItems.call(self);\r\n        self.verLine.visible = false;\r\n        self.horLine.visible = false;\r\n      }\r\n        \r\n      $(document).off(\"mousemove.moveSeatItem\");\r\n      $(document).on(\"mousemove.moveSeatItem\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleMove(evt)\r\n      }, 5));\r\n      $(document).one(\"mouseup.moveSeatItem\", function () {\r\n        handleUp()\r\n      })\r\n    },\r\n    preRotate(event, seat) {\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n      $(\".ds-seat-design\").addClass(\"is-rotating\");\r\n      const self = this;\r\n      forzenOtherItems.call(self);\r\n        \r\n      const center = getRectCenter(seat);\r\n        \r\n      function handleRotate(evt) {\r\n        let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        seat.angle = rotateRect(center, localPos);\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(document).off(\"mousemove.rotateSeatItem\");\r\n        forzenOtherItems.call(self);\r\n        $(\".ds-seat-design\").removeClass(\"is-rotating\");\r\n          \r\n      }\r\n        \r\n      $(document).off(\"mousemove.rotateSeatItem\");\r\n      $(document).on(\"mousemove.rotateSeatItem\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleRotate(evt);\r\n      }, 5));\r\n      $(document).one(\"mouseup.rotateSeatItem\", function () {\r\n        handleUp()\r\n      })\r\n    },\r\n    selectRotate(evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n      $(\".ds-seat-design\").addClass(\"is-rotating\");\r\n      const self = this;\r\n      forzenOtherItems.call(self);\r\n        \r\n      const oldRect = _.assign({}, self.selectPosition);\r\n      const center = getRectCenter(oldRect);\r\n      const seatObj = {};\r\n      const allItems = _.concat(self.items, self.groups);\r\n      allItems.forEach(seat => {\r\n        seatObj[seat.id] = _.assign({}, seat);\r\n      });\r\n        \r\n      function handleRotate(evt) {\r\n        let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        let angle = rotateRect(center, localPos);\r\n        let offsetAngle = angle - oldRect.angle;\r\n        self.selectPosition.angle = angle;\r\n          \r\n        //旋转被框选的seat\r\n        self.selectedItems.forEach(seat => {\r\n          let oldSeat = seatObj[seat.id];\r\n          let p = dsf.math.getRotatedPiont(oldSeat.left, oldSeat.top, center.x, center.y, angle);\r\n          let l = p.x + oldSeat.width / 2;\r\n          let t = p.y + oldSeat.height / 2;\r\n          let c = dsf.math.getRotatedPiont(l, t, p.x, p.y, angle);\r\n          p = dsf.math.getRotatedPiont(p.x, p.y, c.x, c.y, -angle);\r\n          seat.top = parseInt(p.y);\r\n          seat.left = parseInt(p.x);\r\n          seat.angle = (oldSeat.angle + offsetAngle) % 360;\r\n          if (oldSeat.angle < 0) seat.angle = 360 + oldSeat.angle;\r\n        })\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(\".ds-seat-design\").removeClass(\"is-rotating\");\r\n        self.selectPosition = getSelectPosition(self.selectedItems);\r\n        $(document).off(\"mousemove.rotateSelect\")\r\n        forzenOtherItems.call(self);\r\n      }\r\n        \r\n      $(document).off(\"mousemove.rotateSelect\");\r\n      $(document).on(\"mousemove.rotateSelect\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleRotate(evt)\r\n      }, 5))\r\n      $(document).one(\"mouseup.rotateSelect\", function () {\r\n        handleUp()\r\n      })\r\n        \r\n    },\r\n    selectScale(evt, action) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n      const self = this;\r\n      forzenOtherItems.call(self, false);\r\n        \r\n      const oldRect = _.assign({}, self.selectPosition);\r\n      const newRect = _.assign({}, self.selectPosition);\r\n        \r\n      //各个座位的信息\r\n      const seatObj = {};\r\n      const allItems = _.concat(self.items, self.groups);\r\n      allItems.forEach(seat => {\r\n        seatObj[seat.id] = _.assign({}, seat);\r\n      });\r\n        \r\n      //获取选框缩放时参考的锚点\r\n      const basePoint = getRectBasePointByScale(oldRect, action);\r\n      //获取seat与选框的宽高比\r\n      const ratio = getRatioBySeat2SelectBox(self.selectedItems, self.selectPosition);\r\n        \r\n      function handleScale(evt) {\r\n        if (!action || !basePoint) return;\r\n        let mousePosition = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        self.selectPosition = scaleRect(basePoint, oldRect, newRect, mousePosition, action, self.rectMinSize);\r\n          \r\n        //缩放被框选的seat\r\n        self.selectedItems.forEach(item => {\r\n          let newSeat = getNewSize(seatObj[item.id], oldRect, self.selectPosition, action, ratio);\r\n          if (newSeat.type === 'group') {\r\n            updateGroupMemberPosition(newSeat);\r\n          }\r\n          _.assign(item, newSeat)\r\n        })\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(document).off(\"mousemove.scaleSelect\");\r\n        forzenOtherItems.call(self);\r\n        self.selectedItems.forEach(item => {\r\n          if (item.type === 'group') {\r\n            (item.rows === 1) && (item.height = seatObj[item.id].height);\r\n            (item.cols === 1) && (item.width = seatObj[item.id].width);\r\n          }\r\n        })\r\n        self.selectPosition = getSelectPosition(self.selectedItems);\r\n      }\r\n        \r\n      $(document).off(\"mousemove.scaleSelect\");\r\n      $(document).on(\"mousemove.scaleSelect\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleScale(evt);\r\n      }, 5));\r\n      $(document).one(\"mouseup.scaleSelect\", function () {\r\n        handleUp();\r\n      })\r\n        \r\n    },\r\n    selectMove(evt) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      //如果开启了序号设置，则不走后面的逻辑\r\n      if (this.switchNumSet) return;\r\n      const self = this;\r\n      forzenOtherItems.call(self);\r\n        \r\n      const old_x = self.selectPosition.left;\r\n      const old_y = self.selectPosition.top;\r\n        \r\n      //各个座位的信息\r\n      const seatObj = {};\r\n      const allItems = _.concat(self.items, self.groups);\r\n      allItems.forEach(seat => {\r\n        seatObj[seat.id] = _.assign({}, seat);\r\n      });\r\n      let downPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n        x: evt.pageX,\r\n        y: evt.pageY\r\n      }, self.panelSize.scale);\r\n        \r\n      function handleMove(evt) {\r\n        let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        let moveDir = {\r\n          x: localPos.x - downPos.x,\r\n          y: localPos.y - downPos.y\r\n        };\r\n        let left = old_x + moveDir.x;\r\n        let top = old_y + moveDir.y;\r\n        self.selectPosition.left = parseInt(left);\r\n        self.selectPosition.top = parseInt(top);\r\n          \r\n        self.selectedItems.forEach(item => {\r\n          item.left = parseInt(seatObj[item.id].left + moveDir.x);\r\n          item.top = parseInt(seatObj[item.id].top + moveDir.y);\r\n        })\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(document).off(\"mousemove.moveSelect\");\r\n        forzenOtherItems.call(self);\r\n      }\r\n        \r\n      $(document).off(\"mousemove.moveSelect\");\r\n      $(document).on(\"mousemove.moveSelect\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleMove(evt)\r\n      }, 5));\r\n      $(document).one(\"mouseup.moveSelect\", function () {\r\n        handleUp()\r\n      })\r\n    },\r\n    popMenu(evt, item) {\r\n      if (/^sec_/.test(item.type) || evt.which !== 3) return;\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      let downPos = dsf.math.convertLocalCoordinate('.seat-designer-page', {x: evt.pageX, y: evt.pageY});\r\n      forzenOtherItems.call(this);\r\n      setRect2Active.call(this, item);\r\n      eventBus.emit(eventBusEvent.SEAT_POP, {\r\n        position: {\r\n          ...downPos\r\n        },\r\n        seat: item,\r\n        maxOrderNum: this.maxOrderNum\r\n      })\r\n    },\r\n    deleteActiveSeatItem() {\r\n      if (this.selectedItems.length === 0) return;\r\n      const items = _.differenceWith(this.items, this.selectedItems, (a, b) => {\r\n        return a.id === b.id && b.type !== \"group\"\r\n      })\r\n      const groups = _.differenceWith(this.groups, this.selectedItems, (a, b) => {\r\n        return a.id === b.id && b.type === \"group\"\r\n      })\r\n        \r\n      this.$emit(\"update:items\", items);\r\n      this.$emit(\"update:groups\", groups)\r\n      this.clearSelectedItems()\r\n    },\r\n    setOrderNum(seatItem, group) {\r\n      if (!this.switchNumSet || seatItem.type === \"group\" || seatItem.seatNum) return;\r\n        \r\n      if (this.maxOrderNum) {\r\n        this.maxOrderNum += 1\r\n      } else {\r\n        this.maxOrderNum = 1\r\n      }\r\n      seatItem.seatNum = this.maxOrderNum;\r\n      seatItem.seatTxt = seatItem.seatTxt || seatItem.seatNum;\r\n    },\r\n    openEdit(e, item) {\r\n      if (this.switchNumSet || $(e.target).hasClass(\"anchor\")) return;\r\n      let textArea = document.createElement(\"textarea\");\r\n      const _submit = (val) => {\r\n        item.seatTxt = val;\r\n        $(textArea).remove();\r\n        textArea = null;\r\n      }\r\n      $(e.target).append(textArea)\r\n      $(textArea).val(item.seatTxt);\r\n      $(textArea).on(\"blur\", function () {\r\n        _submit($(this).val());\r\n      })\r\n      $(textArea).bind(\"keypress\", function (event) {\r\n        if (event.keyCode === 13) _submit($(this).val())\r\n      })\r\n      $(textArea).focus();\r\n    },\r\n    openSetNum(e, item) {\r\n      let input = document.createElement(\"input\");\r\n      const _submit = (val) => {\r\n        if (!val) {\r\n          if (item.seatTxt == item.seatNum) item.seatTxt = null\r\n          item.seatNum = null\r\n          getMaxOrderNum.call(this)\r\n        } else {\r\n          val = parseInt(val.replace(/[^0-9]/ig, \"\"));\r\n          if (item.seatTxt == item.seatNum) item.seatTxt = val;\r\n          item.seatNum = val;\r\n          val > this.maxOrderNum ? this.maxOrderNum = val : getMaxOrderNum.call(this);\r\n        }\r\n          \r\n        $(input).remove();\r\n        input = null;\r\n      }\r\n      $(e.target).append(input)\r\n      $(input).val(item.seatNum);\r\n      $(input).on(\"blur\", function () {\r\n        _submit($(this).val());\r\n      })\r\n      $(input).bind(\"keypress\", function (event) {\r\n        if (event.keyCode === 13) _submit($(this).val())\r\n      })\r\n      $(input).focus();\r\n    },\r\n  },\r\n}\r\n  \r\n//获取座位最大的序号\r\nfunction getMaxOrderNum() {\r\n  const temp = [];\r\n  _.concat(this.items, this.groups).forEach(a => {\r\n    if (a.type !== \"group\") {\r\n      a.seatNum && temp.push(a.seatNum)\r\n    } else {\r\n      a.member.forEach(b => {\r\n        b.seatNum && temp.push(b.seatNum)\r\n      })\r\n    }\r\n  })\r\n  const seatNumArr = temp.sort((a, b) => a - b);\r\n  this.maxOrderNum = _.last(seatNumArr) || null\r\n}\r\n  \r\n//激活单个座位\r\nfunction setRect2Active(seat) {\r\n  if (this.activeId === seat.id) return;\r\n  //重置selectPosition\r\n  restSelectPostion.call(this);\r\n  //清空已选的座位\r\n  this.selectedItems = [seat];\r\n  this.$store.commit(\"seatDesign/changeActiveId\", seat.id);\r\n}\r\n  \r\n//判断座位是否处于region 边界内\r\nfunction judgePos(seat) {\r\n  let seatPoints = getRectPoint(seat);\r\n  let pointRange = getPointRange(seatPoints);\r\n  let {left, top, scale} = this.panelSize;\r\n  let {left: regionLeft, top: regionTop, width: regionWid, height: regionHit} = this.regionPosition;\r\n    \r\n  let anchor = $(\".seat-designer-page\").offset();\r\n  let small_position = {\r\n    x: regionLeft + anchor.left,\r\n    y: regionTop + anchor.top\r\n  }\r\n  let large_position = {\r\n    x: regionLeft + anchor.left + regionWid,\r\n    y: regionTop + anchor.top + regionHit\r\n  }\r\n  small_position = dsf.math.convertLocalCoordinate(\"#panel_outer\", small_position, scale);\r\n  large_position = dsf.math.convertLocalCoordinate(\"#panel_outer\", large_position, scale);\r\n    \r\n  let a = pointRange.min_x >= small_position.x;\r\n  let b = pointRange.max_x <= large_position.x;\r\n  let c = pointRange.min_y >= small_position.y;\r\n  let d = pointRange.max_y <= large_position.y;\r\n  return a && b && c && d\r\n}\r\n  \r\n/**\r\n   * 获取对象上下左右四个边界点\r\n   * tar [lt|rt|rb|lb]\r\n   */\r\nfunction getRectPoint(obj, tar = ['lt', 'rt', 'rb', 'lb']) {\r\n  let angle = obj.angle;\r\n  let left = obj.left;\r\n  let top = obj.top;\r\n  let right = obj.left + obj.width;\r\n  let bottom = obj.top + obj.height;\r\n    \r\n  let pos = {\r\n    lt: 0,\r\n    lb: 0,\r\n    rt: 0,\r\n    rb: 0\r\n  };\r\n    \r\n  let xCenter = (right - left) * 0.5 + left;\r\n  let yCenter = (bottom - top) * 0.5 + top;\r\n  tar.includes('lt') && (pos.lt = dsf.math.getRotatedPiont(left, top, xCenter, yCenter, angle))\r\n  tar.includes('rt') && (pos.rt = dsf.math.getRotatedPiont(right, top, xCenter, yCenter, angle))\r\n  tar.includes('rb') && (pos.rb = dsf.math.getRotatedPiont(right, bottom, xCenter, yCenter, angle))\r\n  tar.includes('lb') && (pos.lb = dsf.math.getRotatedPiont(left, bottom, xCenter, yCenter, angle))\r\n  return pos;\r\n}\r\n  \r\n//获取rect 缩放时参考的锚点\r\nfunction getRectBasePointByScale(rect, action) {\r\n  let basePoint = {};\r\n  if (action.length > 1) {\r\n    if (action.indexOf(\"l\") >= 0) {\r\n      basePoint.x = rect.left + rect.width;\r\n    } else {\r\n      basePoint.x = rect.left;\r\n    }\r\n    if (action.indexOf(\"t\") >= 0) {\r\n      basePoint.y = rect.top + rect.height;\r\n    } else {\r\n      basePoint.y = rect.top;\r\n    }\r\n  } else {\r\n    if (action === \"r\" || action === \"b\") {\r\n      basePoint.x = rect.left;\r\n      basePoint.y = rect.top;\r\n    } else if (action === \"l\" || action === \"t\") {\r\n      basePoint.x = rect.left + rect.width;\r\n      basePoint.y = rect.top + rect.height;\r\n    }\r\n  }\r\n    \r\n  let center = {\r\n    x: rect.left + rect.width / 2,\r\n    y: rect.top + rect.height / 2\r\n  };\r\n  basePoint = dsf.math.getRotatedPiont(basePoint.x, basePoint.y, center.x, center.y, rect.angle);\r\n  return basePoint\r\n}\r\n  \r\n/**\r\n   * 此函数用于求出Rect缩放之后的 left/top/width/height\r\n   * basePoint Rect缩放时的参考点\r\n   * oldRect rect缩放前的拷贝，此对象不变\r\n   * newRect 初始值等于rect缩放前的拷贝，此对象用于计算缩放后的rect\r\n   * 这里传两个rect是为了不在 scaleRect函数每次运行的时候都去声明 newRect，节约性能\r\n   * mousePosition 当前鼠标在 #panel_outer当中的坐标\r\n   * action 缩放的具体动作\r\n   * minSize [minWidth, minHeight]  最小宽高\r\n   * */\r\nfunction scaleRect(basePoint, oldRect, newRect, mousePosition, action, minSize) {\r\n  let dist = dsf.math.getDistance(basePoint, mousePosition);\r\n  let angle = dsf.math.getRadina(basePoint, mousePosition, -dsf.math.a2r(oldRect.angle));\r\n  let pos = {\r\n    x: Math.cos(angle) * dist + oldRect.left,\r\n    y: Math.sin(angle) * dist + oldRect.top\r\n  };\r\n    \r\n  let w, h;\r\n  if (action.indexOf(\"r\") >= 0) {\r\n    w = pos.x - oldRect.left;\r\n  } else if (action.indexOf(\"l\") >= 0) {\r\n    w = oldRect.left - pos.x;\r\n  }\r\n  if (action.indexOf(\"b\") >= 0) {\r\n    h = pos.y - oldRect.top;\r\n  } else if (action.indexOf(\"t\") >= 0) {\r\n    h = oldRect.top - pos.y;\r\n  }\r\n  //四个对角度\r\n  if (action.length > 1) {\r\n    let sc = w / oldRect.width;\r\n    newRect.width = oldRect.width * sc;\r\n    newRect.height = oldRect.height * sc;\r\n  } else {\r\n    if (dsf.isDef(w)) {\r\n      newRect.width = w;\r\n    } else {\r\n      newRect.width = oldRect.width;\r\n    }\r\n    if (dsf.isDef(h)) {\r\n      newRect.height = h;\r\n    } else {\r\n      newRect.height = oldRect.height;\r\n    }\r\n  }\r\n  if (newRect.width < minSize[0]) {\r\n    newRect.width = minSize[0];\r\n  }\r\n  if (newRect.height < minSize[1]) {\r\n    newRect.height = minSize[1]\r\n  }\r\n    \r\n  let U = {};\r\n  if (action.length > 1) {\r\n    if (action.indexOf(\"r\") >= 0) {\r\n      U.x = basePoint.x + newRect.width;\r\n    } else {\r\n      if (action.indexOf(\"l\") >= 0) {\r\n        U.x = basePoint.x - newRect.width;\r\n      } else {\r\n        U.x = basePoint.x;\r\n      }\r\n    }\r\n    if (action.indexOf(\"b\") >= 0) {\r\n      U.y = basePoint.y + newRect.height;\r\n    } else {\r\n      if (action.indexOf(\"t\") >= 0) {\r\n        U.y = basePoint.y - newRect.height;\r\n      } else {\r\n        U.y = basePoint.y;\r\n      }\r\n    }\r\n  } else {\r\n    if (action === \"r\" || action === \"b\") {\r\n      U.x = basePoint.x + newRect.width;\r\n      U.y = basePoint.y + newRect.height;\r\n    } else if (action === \"l\" || action === \"t\") {\r\n      U.x = basePoint.x - newRect.width;\r\n      U.y = basePoint.y - newRect.height;\r\n    }\r\n  }\r\n    \r\n  //获取对角距离\r\n  let K = dsf.math.getRotatedPiont(U.x, U.y, basePoint.x, basePoint.y, oldRect.angle)\r\n  //获取旋转中心点\r\n  let M = {\r\n    x: 0.5 * (basePoint.x + K.x),\r\n    y: 0.5 * (basePoint.y + K.y)\r\n  };\r\n    \r\n  let S = dsf.math.getRotatedPiont(basePoint.x, basePoint.y, M.x, M.y, -oldRect.angle);\r\n    \r\n  if (action.length > 1) {\r\n    if (action.indexOf(\"r\") >= 0) {\r\n      newRect.left = S.x;\r\n    } else {\r\n      if (action.indexOf(\"l\") >= 0) {\r\n        newRect.left = S.x - newRect.width;\r\n      } else {\r\n        newRect.left = S.x - newRect.width / 2;\r\n      }\r\n    }\r\n    if (action.indexOf(\"b\") >= 0) {\r\n      newRect.top = S.y\r\n    } else {\r\n      if (action.indexOf(\"t\") >= 0) {\r\n        newRect.top = S.y - newRect.height;\r\n      } else {\r\n        newRect.top = S.y - newRect.height / 2;\r\n      }\r\n    }\r\n  } else {\r\n    if (action === \"r\" || action === \"b\") {\r\n      newRect.left = S.x;\r\n      newRect.top = S.y;\r\n    } else if (action === \"l\" || action === \"t\") {\r\n      newRect.left = S.x - newRect.width;\r\n      newRect.top = S.y - newRect.height;\r\n    }\r\n  }\r\n    \r\n  __parseIntSize(newRect);\r\n    \r\n  return newRect;\r\n}\r\n  \r\n/**此函数用于求出Rect旋转之后的 angle\r\n   *center 旋转中心点\r\n   * mousePosition 当前鼠标在 #panel_outer当中的坐标\r\n   * */\r\nfunction rotateRect(center, mousePosition) {\r\n  let d = dsf.math.getRadina(center, mousePosition);\r\n  let angle = 360 - 270 + (dsf.math.r2a(d));\r\n  angle = Math.ceil(angle) % 360;\r\n  return angle\r\n}\r\n  \r\n//获取seat与选框的宽高比\r\nfunction getRatioBySeat2SelectBox(seats, selectBox) {\r\n  const ratio = {};\r\n  _.forEach(seats, item => {\r\n    let obj = _.assign({}, item);\r\n    ratio[item.id] = {\r\n      left: (obj.left - selectBox.left) / selectBox.width,\r\n      top: (obj.top - selectBox.top) / selectBox.height,\r\n      width: obj.width / selectBox.width,\r\n      height: obj.height / selectBox.height\r\n    }\r\n  })\r\n  return ratio\r\n}\r\n  \r\n//在选框大小变化之后获取座位新的size\r\nfunction getNewSize(seat, oldSelectBox, newSelectBox, action, ratio) {\r\n  const _seat = _.assign({}, seat);\r\n  let ratioSize = ratio[_seat.id];\r\n  _seat.left = newSelectBox.left + newSelectBox.width * ratioSize.left;\r\n  _seat.top = newSelectBox.top + newSelectBox.height * ratioSize.top;\r\n    \r\n  //如果拖动的是4个端点\r\n  if (action.length === 2) {\r\n    let sc = newSelectBox.width / oldSelectBox.width;\r\n    let sc1 = newSelectBox.height / oldSelectBox.height;\r\n    sc = 0.5 * (sc + sc1);\r\n    _seat.width = sc * seat.width;\r\n    _seat.height = sc * seat.height;\r\n  } else if (action.length === 1) {\r\n    _seat.width = newSelectBox.width * ratioSize.width;\r\n    _seat.height = newSelectBox.height * ratioSize.height;\r\n  }\r\n    \r\n  __roundSize(_seat);\r\n  return _seat;\r\n}\r\n  \r\n//获取rect的中心锚点\r\nfunction getRectCenter(rect) {\r\n  return {\r\n    x: rect.left + rect.width / 2,\r\n    y: rect.top + rect.height / 2\r\n  }\r\n}\r\n  \r\n//获取rect 当中4个点中最小的x,y 和最大的x,y\r\nfunction getPointRange(rectPoints) {\r\n  let min_x, max_x, min_y, max_y;\r\n  _.forIn(rectPoints, val => {\r\n    //第一次取值\r\n    min_x = min_x || val.x;\r\n    max_x = max_x || val.x;\r\n    min_y = min_y || val.y;\r\n    max_y = max_y || val.y;\r\n      \r\n    min_x = min_x <= val.x ? min_x : val.x;\r\n    max_x = max_x >= val.x ? max_x : val.x;\r\n    min_y = min_y <= val.y ? min_y : val.y;\r\n    max_y = max_y >= val.y ? max_y : val.y;\r\n  })\r\n    \r\n  return {min_x: min_x, min_y: min_y, max_x: max_x, max_y: max_y}\r\n}\r\n  \r\n//取整\r\nfunction __parseIntSize(rect) {\r\n  rect.top = parseInt(rect.top);\r\n  rect.left = parseInt(rect.left);\r\n  rect.width = parseInt(rect.width);\r\n  rect.height = parseInt(rect.height);\r\n}\r\n  \r\nfunction __roundSize(rect) {\r\n  rect.top = Math.round(rect.top);\r\n  rect.left = Math.round(rect.left);\r\n  rect.width = Math.round(rect.width);\r\n  rect.height = Math.round(rect.height);\r\n}\r\n  \r\n//获取选框的位置\r\nfunction getSelectPosition(selectedItems) {\r\n  let min_x, max_x, min_y, max_y, rectPoints;\r\n  _.forEach(selectedItems, item => {\r\n    rectPoints = getRectPoint(item);\r\n    _.forIn(rectPoints, val => {\r\n      //第一次取值\r\n      min_x = min_x || val.x;\r\n      max_x = max_x || val.x;\r\n      min_y = min_y || val.y;\r\n      max_y = max_y || val.y;\r\n        \r\n      min_x = min_x <= val.x ? min_x : val.x;\r\n      max_x = max_x >= val.x ? max_x : val.x;\r\n      min_y = min_y <= val.y ? min_y : val.y;\r\n      max_y = max_y >= val.y ? max_y : val.y;\r\n    })\r\n  });\r\n  return {\r\n    left: getExtNum(min_x),\r\n    top: getExtNum(min_y),\r\n    width: getExtNum(max_x - min_x),\r\n    height: getExtNum(max_y - min_y),\r\n    angle: 0,\r\n    visible: true\r\n  }\r\n}\r\n  \r\n//小于等于0取floor, 大于0取ceil\r\nfunction getExtNum(num) {\r\n  return num < 0 ? Math.floor(num) : Math.ceil(num)\r\n}\r\n  \r\n//重置selectPosition\r\nfunction restSelectPostion() {\r\n  this.selectPosition = {\r\n    top: 0,\r\n    left: 0,\r\n    width: 0,\r\n    height: 0,\r\n    angle: 0,\r\n    visible: false\r\n  }\r\n}\r\n  \r\n//获取除了activeSeat之外，其它所有seats的各个点位置\r\nfunction getOtherSeatPoints() {\r\n  const otherSeat = _.filter(_.concat(this.items, this.groups), seat => seat.id !== this.activeId);\r\n  return otherSeat.map(seat => getRectPoint(seat, ['lt']));\r\n}\r\n  \r\n//计算对齐线的位置\r\nfunction computeAlignLine(xy, otherXy, seat) {\r\n  let obj = {}, times = 0;\r\n  for (let i = 0; i < otherXy.length; i++) {\r\n    if (xy.left >= otherXy[i].left - 3 && xy.left <= otherXy[i].left + 3) {\r\n      obj.left = otherXy[i].left;\r\n      times += 1;\r\n      if (seat.angle === 0) {\r\n        seat.left = obj.left;\r\n      }\r\n    }\r\n      \r\n    if (xy.top >= otherXy[i].top - 3 && xy.top <= otherXy[i].top + 3) {\r\n      obj.top = otherXy[i].top;\r\n      times += 1;\r\n      if (seat.angle === 0) {\r\n        seat.top = obj.top;\r\n      }\r\n    }\r\n      \r\n    if (times === 2) break;\r\n  }\r\n  return (obj.left || obj.top) ? obj : null\r\n}\r\n  \r\n//将points的x, y坐标提取出来\r\nfunction getPointsXy(points) {\r\n  let res = [], obj = {};\r\n  if (_.isArray(points)) {\r\n    _.forEach(points, item => {\r\n      obj = {\r\n        left: Math.round(item.lt.x),\r\n        top: Math.round(item.lt.y)\r\n      }\r\n      res.push(obj);\r\n    })\r\n    return _.uniqWith(res, _.isEqual);\r\n  } else if (_.isObject(points)) {\r\n    return {\r\n      left: Math.round(points.lt.x),\r\n      top: Math.round(points.lt.y)\r\n    }\r\n  }\r\n}\r\n  \r\n//获取group 的最小size\r\nfunction getGroupMinSize(group) {\r\n  const member = group.member[0];\r\n  return [group.cols * member.width, group.rows * member.height]\r\n}\r\n  \r\n//获取seat背景的样式\r\nfunction getBgSty(obj) {\r\n  let url;\r\n  //如果只是辅助对象\r\n  if (/^sec_/.test(obj.type)) {\r\n    url = dsf.url.getAbsolutePath(obj.bgImg);\r\n  } else {\r\n    const judge = _.isArray(obj.stateList) && obj.stateList[0] && obj.stateList[0].img;\r\n    if (!judge) return \"none\"\r\n    url = dsf.url.getAbsolutePath(obj.stateList[0].img)\r\n  }\r\n  return `center / contain no-repeat url(${url})`\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./seatItem.vue?vue&type=template&id=22823020&\"\nimport script from \"./seatItem.vue?vue&type=script&lang=js&\"\nexport * from \"./seatItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('22823020')) {\n      api.createRecord('22823020', component.options)\n    } else {\n      api.reload('22823020', component.options)\n    }\n    module.hot.accept(\"./seatItem.vue?vue&type=template&id=22823020&\", function () {\n      api.rerender('22823020', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/seatDesign/seatItem.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      directives: [\n        {\n          name: \"show\",\n          rawName: \"v-show\",\n          value: _vm.popShow,\n          expression: \"popShow\"\n        }\n      ],\n      staticClass: \"seat-pop-box\",\n      style: _vm.sty\n    },\n    [\n      _c(\"ul\", [\n        !_vm.switchNumSet\n          ? _c(\n              \"li\",\n              {\n                on: {\n                  mousedown: function($event) {\n                    if (\n                      !$event.type.indexOf(\"key\") &&\n                      _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                        \"Left\",\n                        \"ArrowLeft\"\n                      ])\n                    ) {\n                      return null\n                    }\n                    if (\"button\" in $event && $event.button !== 0) {\n                      return null\n                    }\n                    return _vm.popDialog.apply(null, arguments)\n                  }\n                }\n              },\n              [_vm._v(\"方阵组\")]\n            )\n          : _c(\n              \"li\",\n              {\n                on: {\n                  mousedown: function($event) {\n                    if (\n                      !$event.type.indexOf(\"key\") &&\n                      _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                        \"Left\",\n                        \"ArrowLeft\"\n                      ])\n                    ) {\n                      return null\n                    }\n                    if (\"button\" in $event && $event.button !== 0) {\n                      return null\n                    }\n                    return _vm.popDialog.apply(null, arguments)\n                  }\n                }\n              },\n              [_vm._v(\"快速填充序号\")]\n            )\n      ]),\n      _c(\n        \"el-dialog\",\n        {\n          attrs: {\n            visible: _vm.dialogVisible,\n            title: \"信息\",\n            width: \"300px\",\n            modal: false,\n            \"append-to-body\": true\n          },\n          on: {\n            \"update:visible\": function($event) {\n              _vm.dialogVisible = $event\n            }\n          }\n        },\n        [\n          _c(\n            \"el-form\",\n            { attrs: { model: _vm.form, size: \"small\" } },\n            [\n              _vm.switchNumSet\n                ? [\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"排序开始位置\" } },\n                      [\n                        _c(\n                          \"el-radio-group\",\n                          {\n                            model: {\n                              value: _vm.form.orderPosition,\n                              callback: function($$v) {\n                                _vm.$set(_vm.form, \"orderPosition\", $$v)\n                              },\n                              expression: \"form.orderPosition\"\n                            }\n                          },\n                          [\n                            _c(\"el-radio\", { attrs: { label: \"lt\" } }, [\n                              _vm._v(\"左上角\")\n                            ]),\n                            _c(\"el-radio\", { attrs: { label: \"rt\" } }, [\n                              _vm._v(\"右上角\")\n                            ]),\n                            _c(\"el-radio\", { attrs: { label: \"rb\" } }, [\n                              _vm._v(\"右下角\")\n                            ]),\n                            _c(\"el-radio\", { attrs: { label: \"lb\" } }, [\n                              _vm._v(\"左下角\")\n                            ])\n                          ],\n                          1\n                        )\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"开始序号\" } },\n                      [\n                        _c(\"el-input-number\", {\n                          attrs: { precision: 0, controls: false, min: 1 },\n                          model: {\n                            value: _vm.form.orderBegin,\n                            callback: function($$v) {\n                              _vm.$set(_vm.form, \"orderBegin\", $$v)\n                            },\n                            expression: \"form.orderBegin\"\n                          }\n                        })\n                      ],\n                      1\n                    )\n                  ]\n                : [\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"列数\" } },\n                      [\n                        _c(\"el-input-number\", {\n                          attrs: { precision: 0, controls: false, min: 1 },\n                          model: {\n                            value: _vm.form.colNum,\n                            callback: function($$v) {\n                              _vm.$set(_vm.form, \"colNum\", $$v)\n                            },\n                            expression: \"form.colNum\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"个数\" } },\n                      [\n                        _c(\"el-input-number\", {\n                          attrs: { precision: 0, controls: false, min: 1 },\n                          model: {\n                            value: _vm.form.total,\n                            callback: function($$v) {\n                              _vm.$set(_vm.form, \"total\", $$v)\n                            },\n                            expression: \"form.total\"\n                          }\n                        })\n                      ],\n                      1\n                    )\n                  ],\n              _c(\n                \"el-form-item\",\n                { staticStyle: { \"text-align\": \"right\" } },\n                [\n                  !_vm.switchNumSet\n                    ? _c(\"el-button\", { on: { click: _vm.setGroup } }, [\n                        _vm._v(\"创建\")\n                      ])\n                    : _c(\"el-button\", { on: { click: _vm.quickOrder } }, [\n                        _vm._v(\"确定\")\n                      ])\n                ],\n                1\n              )\n            ],\n            2\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-show=\"popShow\" class=\"seat-pop-box\" :style=\"sty\">\r\n    <ul>\r\n      <li v-if=\"!switchNumSet\" @mousedown.left=\"popDialog\">方阵组</li>\r\n      <li v-else @mousedown.left=\"popDialog\">快速填充序号</li>\r\n    </ul>\r\n\r\n    <el-dialog :visible.sync=\"dialogVisible\" title=\"信息\" width=\"300px\" :modal=\"false\" :append-to-body=\"true\">\r\n      <el-form :model=\"form\" size=\"small\">\r\n        <template v-if=\"switchNumSet\">\r\n          <el-form-item label=\"排序开始位置\">\r\n            <el-radio-group v-model=\"form.orderPosition\">\r\n              <el-radio label=\"lt\">左上角</el-radio>\r\n              <el-radio label=\"rt\">右上角</el-radio>\r\n              <el-radio label=\"rb\">右下角</el-radio>\r\n              <el-radio label=\"lb\">左下角</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"开始序号\">\r\n            <el-input-number v-model=\"form.orderBegin\" :precision=\"0\" :controls=\"false\" :min=\"1\"></el-input-number>\r\n          </el-form-item>\r\n        </template>\r\n        \r\n        <template v-else>\r\n          <el-form-item label=\"列数\">\r\n            <el-input-number v-model=\"form.colNum\" :precision=\"0\" :controls=\"false\" :min=\"1\"></el-input-number>\r\n          </el-form-item>\r\n          <el-form-item label=\"个数\">\r\n            <el-input-number v-model=\"form.total\" :precision=\"0\" :controls=\"false\" :min=\"1\"></el-input-number>\r\n          </el-form-item>\r\n        </template>\r\n  \r\n        <el-form-item style=\"text-align: right\">\r\n          <el-button v-if=\"!switchNumSet\" @click=\"setGroup\">创建</el-button>\r\n          <el-button v-else @click=\"quickOrder\">确定</el-button>\r\n        </el-form-item>\r\n        \r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/designer/seat/constant\";\r\n\r\nexport default {\r\n  name: \"SeatPop\",\r\n  data(){\r\n    return{\r\n      dialogVisible: false,\r\n      form: {\r\n        colNum: undefined,\r\n        total: undefined,\r\n        orderPosition: 'lt',\r\n        orderBegin: 1\r\n      },\r\n      seat: {},\r\n      position: {},\r\n      popShow: false\r\n    }\r\n  },\r\n  computed:{\r\n    ...mapState('seatDesign',[\r\n      \"switchNumSet\"\r\n    ]),\r\n    sty(){\r\n      return{\r\n        left: this.position.x + \"px\",\r\n        top: this.position.y + \"px\"\r\n      }\r\n    }\r\n  },\r\n  mounted(){\r\n    eventBus.on(eventBusEvent.SEAT_POP, data => {\r\n      if (data.seat.type !== \"group\" && this.switchNumSet) {\r\n        this.popShow = false;\r\n        return\r\n      }\r\n      Object.assign(this, data);    //这里给this.seat 赋值\r\n      this.form.orderBegin = data.maxOrderNum+1;\r\n      this.popShow = true;\r\n      if (data.seat.type === \"group\"){\r\n        this.form.colNum = data.seat.cols;\r\n        this.form.total = data.seat.member.length\r\n      }\r\n      else {\r\n        this.form.colNum = undefined;\r\n        this.form.total = undefined;\r\n      }\r\n       \r\n    })\r\n\r\n    eventBus.listen(eventBusEvent.BODY_EMPTY_CLICK, ()=>{\r\n      this.popShow = false;\r\n    })\r\n  },\r\n  methods:{\r\n    popDialog(evt){\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n      this.popShow = true;\r\n      this.dialogVisible = true\r\n    },\r\n    setGroup(){\r\n      if (this.seat.type !== \"group\"){\r\n        this.setGroupBySeat()\r\n      }\r\n      else {\r\n        this.setGroupByGroup()\r\n      }\r\n    },\r\n    setGroupBySeat(){\r\n      let {total, colNum} = this.form;\r\n      if (!total || !colNum || total === 1){\r\n        this.dialogVisible = false;\r\n        this.popShow = false;\r\n        return false\r\n      }\r\n      let rowNum = Math.ceil(total/colNum);\r\n      let parentId = dsf.uuid();\r\n      this.seat.parentId = parentId;\r\n      this.seat.belong = \"group\";\r\n      const memberList = getMemberList.call(this, colNum, total, this.seat)\r\n      let _width = this.seat.width * colNum;\r\n      let _height = this.seat.height * rowNum;\r\n\r\n      const group = {\r\n        ...this.seat,\r\n        id: parentId,\r\n        type: 'group',\r\n        cols: colNum,\r\n        rows: rowNum,\r\n        width: _width,\r\n        height: _height,\r\n        memberType: this.seat.type,\r\n        member: memberList,\r\n        isFrozenSty: false,\r\n        isFrozenMemberSty: false\r\n      }\r\n      this.$store.commit(\"seatDesign/addGroup2Panel\", group);\r\n      eventBus.emit(eventBusEvent.KEY_DELETE)\r\n      this.dialogVisible = false;\r\n      this.popShow = false;\r\n    },\r\n    setGroupByGroup(){\r\n      let {total, colNum} = this.form;\r\n      let rowNum = Math.ceil(total/colNum);\r\n      const one = this.seat.member[0]\r\n      one.parentId = null;\r\n      one.belong = null;\r\n      if (total === 1){\r\n        const seat = {\r\n          ...one,\r\n          left: this.seat.left,\r\n          top: this.seat.top,\r\n          angle: this.seat.angle,\r\n          stateList: this.seat.stateList,\r\n          isFrozenSty: false,\r\n        }\r\n        this.$store.commit(\"seatDesign/addSeat2Panel\", seat);\r\n      }\r\n      else if (total > 1){\r\n        let parentId = dsf.uuid();\r\n        one.parentId = parentId;\r\n        one.belong = \"group\";\r\n        const memberList = getMemberList.call(this, colNum, total, one);\r\n        let _width = one.width * colNum;\r\n        let _height = one.height * rowNum;\r\n        const group = {\r\n          ...this.seat,\r\n          id: parentId,\r\n          cols: colNum,\r\n          rows: rowNum,\r\n          width: _width,\r\n          height: _height,\r\n          member: memberList,\r\n          isFrozenSty: false,\r\n          isFrozenMemberSty: false\r\n        }\r\n        this.$store.commit(\"seatDesign/addGroup2Panel\", group);\r\n      }\r\n      eventBus.emit(eventBusEvent.KEY_DELETE);\r\n      this.dialogVisible = false;\r\n      this.popShow = false;\r\n    },\r\n    quickOrder(){\r\n      if (this.form.orderPosition === \"lt\"){\r\n        this.seat.member.forEach(a => {\r\n          if (a.seatNum == a.seatTxt) a.seatTxt = this.form.orderBegin;\r\n          a.seatNum = this.form.orderBegin;\r\n          this.form.orderBegin +=1\r\n        })\r\n      }\r\n      eventBus.emit(eventBusEvent.AFTER_QUICK_ORDER);\r\n      this.dialogVisible = false;\r\n      this.popShow = false;\r\n    }\r\n  }\r\n}\r\n  \r\nfunction getMemberList(colNum, total, item) {\r\n  const memberList = [];\r\n  for (let i=0; i< total; i++){\r\n    let rowIndex = Math.floor(i / colNum);\r\n    let colIndex = (i % colNum);\r\n    let _left = colIndex * item.width;\r\n    let _top = rowIndex * item.height;\r\n    \r\n    let member = {\r\n      ...item,\r\n      id: dsf.uuid(),\r\n      left: _left,\r\n      top: _top,\r\n      colIndex: colIndex,\r\n      rowIndex: rowIndex,\r\n      angle: 0\r\n    }\r\n    \r\n    memberList.push(member)\r\n  }\r\n  return memberList;\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatPop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatPop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./seatPop.vue?vue&type=template&id=b5a38458&\"\nimport script from \"./seatPop.vue?vue&type=script&lang=js&\"\nexport * from \"./seatPop.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('b5a38458')) {\n      api.createRecord('b5a38458', component.options)\n    } else {\n      api.reload('b5a38458', component.options)\n    }\n    module.hot.accept(\"./seatPop.vue?vue&type=template&id=b5a38458&\", function () {\n      api.rerender('b5a38458', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/seatDesign/seatPop.vue\"\nexport default component.exports","<template>\r\n  <div class=\"ds-designer ds-seat-container ds-seat-design\">\r\n    <div class=\"designer-head\">\r\n      <top-tools v-bind.sync=\"postData\" @save-layout=\"saveLayout\"></top-tools>\r\n    </div>\r\n    <div class=\"designer-content\">\r\n      <div class=\"seat-designer-center\">\r\n        <left-tools></left-tools>\r\n        <seat-canvas>\r\n          <template v-slot:seat>\r\n            <seat-item v-bind.sync=\"postData\"></seat-item>\r\n          </template>\r\n          <template v-slot:seatPop>\r\n            <seat-pop></seat-pop>\r\n          </template>\r\n        </seat-canvas>\r\n        <right-tools></right-tools>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport topTools from \"_platform/designer/seat/seatDesign/topTools.vue\";\r\nimport leftTools from \"_platform/designer/seat/seatDesign/leftTools.vue\";\r\nimport rightTools from \"_platform/designer/seat/seatDesign/rightTools.vue\"\r\nimport canvas from \"_platform/designer/seat/seatDesign/canvas.vue\";\r\nimport seatItem from \"_platform/designer/seat/seatDesign/seatItem\";\r\nimport seatPop from \"_platform/designer/seat/seatDesign/seatPop\"\r\n  \r\nimport {changePanelSizeForBgImage, sysBindShortKey} from \"_platform/designer/seat/func\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus.js\";\r\nimport {eventBusEvent} from \"_platform/designer/seat/constant\";\r\nimport ConfigBuilder from \"_platform/designer/seat/util/configBuilder.js\";\r\n\r\n\r\nexport default {\r\n  name: \"DsfSeatDesign\",\r\n  components: {\r\n    topTools,\r\n    leftTools,\r\n    rightTools,\r\n    \"SeatCanvas\": canvas,\r\n    seatItem,\r\n    seatPop\r\n  },\r\n  data() {\r\n    return {\r\n      keyStack: [],\r\n        \r\n      //下面这些为提供给子组件的props\r\n      postData: {\r\n        _id: \"\",\r\n          \r\n        //用于top-tools组件的\r\n        backgroundImage: {},\r\n        canvasSet: {\r\n          width: undefined,\r\n          height: undefined\r\n        },\r\n        hasBg: false,\r\n          \r\n        //用于seat-item组件的\r\n        items: [],\r\n        groups: []\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  watch:{\r\n    \"postData.backgroundImage\"(){\r\n      changePanelSizeForBgImage.call(this);\r\n    }\r\n  },\r\n    \r\n  created() {\r\n    const layoutUrl = dsf.url.getWebPath(\"$/seat_config/seat/designSeatLayout.js\");\r\n      \r\n    this.$http.importFiles(layoutUrl).then((res) => {\r\n      this.layoutConfig = new ConfigBuilder(designSeatLayoutConfig, this.$route.query.opt);\r\n      this.bindShortKey();\r\n      this.getSeatInfo();\r\n    });\r\n  },\r\n  beforeDestroy() {\r\n    $(document).off(\"keydown\");\r\n    $(document).off(\"keyup\");\r\n  },\r\n    \r\n  methods: {\r\n    saveLayout() {\r\n      if(process.env.NODE_ENV === \"development\"){\r\n        this.saveByDev();\r\n      }\r\n      else {\r\n        this.saveByPub();\r\n      }\r\n    },\r\n    bindShortKey() {\r\n      const stopList = [\"ctrl\", \"ctrl-d\", \"ctrl-s\"];\r\n      sysBindShortKey(this.keyStack, stopList);\r\n      $(\"body\").on(\"click\", function () {\r\n        eventBus.dispatch(eventBusEvent.BODY_EMPTY_CLICK);\r\n      })\r\n    },\r\n    saveByDev(){\r\n      const purePostData = getPurePostData.call(this);\r\n      const id = this.$route.query.id || dsf.uuid();\r\n      purePostData._id = id;\r\n        \r\n      localStorage.setItem(\"seat_\"+id, JSON.stringify(purePostData));\r\n      const originQuery = this.$route.query;\r\n      const _query = Object.assign({}, originQuery, {id: id})\r\n      this.$router.replace({path: this.$route.path, query: _query})\r\n    },\r\n    saveByPub(){\r\n      const purePostData = getPurePostData.call(this);\r\n      const data = {\r\n        \"pageName\": \"edit\",\r\n        \"namespace\": \"dsfa.seat.designcontent\",\r\n        \"data\": JSON.stringify(purePostData)\r\n      }\r\n      const loadVm = dsf.layer.loading();\r\n      this.$http.post(this.layoutConfig.saveLayoutUrl, data)\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(\"排座设计器保存失败\", false);\r\n            return\r\n          }\r\n            \r\n          this.postData._id = res.data._id;\r\n          this.$router.replace({path: this.$route.path, query: {id: res.data._id}})\r\n          dsf.layer.message(\"保存成功\");\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"排座设计器保存失败\", false);\r\n        })\r\n        .always(() => {\r\n          dsf.layer.closeLoading(loadVm);\r\n        })\r\n    },\r\n      \r\n    getSeatInfo() {\r\n      if (process.env.NODE_ENV === \"development\"){\r\n        this.getInfoDev()\r\n      }\r\n      else {\r\n        this.getInfoPub()\r\n      }\r\n    },\r\n    getInfoDev(){\r\n      const id = this.$route.query.id;\r\n      if (!id) return;\r\n      const data = JSON.parse(localStorage.getItem(\"seat_\" + id));\r\n      if (data){\r\n        if (_.isEmpty(data.canvasSet)){\r\n          data.canvasSet = {\r\n            width: undefined,\r\n            height: undefined\r\n          }\r\n        }\r\n        this.postData = data;\r\n      }\r\n    },\r\n    getInfoPub(){\r\n      const id = this.$route.query.id;\r\n    }\r\n  },\r\n}\r\n  \r\nfunction getPurePostData() {\r\n  const purePostData = _.cloneDeep(this.postData);\r\n  purePostData.items.forEach(el => {\r\n    el.isFrozenSty = false\r\n  })\r\n  purePostData.groups.forEach(el => {\r\n    el.isFrozenSty = false;\r\n    el.isFrozenMemberSty = false;\r\n  })\r\n  return purePostData;\r\n}\r\n\r\n</script>\r\n\r\n<style type=\"text/scss\" lang=\"scss\">\r\n  @import \"~_platform/assets/styles/designer/seatDesign.scss\";\r\n</style>","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatDesign.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatDesign.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./seatDesign.vue?vue&type=template&id=4f300457&\"\nimport script from \"./seatDesign.vue?vue&type=script&lang=js&\"\nexport * from \"./seatDesign.vue?vue&type=script&lang=js&\"\nimport style0 from \"./seatDesign.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4f300457')) {\n      api.createRecord('4f300457', component.options)\n    } else {\n      api.reload('4f300457', component.options)\n    }\n    module.hot.accept(\"./seatDesign.vue?vue&type=template&id=4f300457&\", function () {\n      api.rerender('4f300457', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/seatDesign.vue\"\nexport default component.exports"],"sourceRoot":""}