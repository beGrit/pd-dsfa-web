{"version":3,"sources":["webpack://platform/I:/web-project/dream/dsf-cli/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://platform/I:/web-project/dream/dsf-cli/node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://platform/./node_modules/core-js/modules/es.object.entries.js","webpack://platform/./designer/seat/util/eventBus.js","webpack://platform/./node_modules/core-js/modules/es.object.get-own-property-names.js","webpack://platform/./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack://platform/./designer/seat/util/configBuilder.js","webpack://platform/./pc/dormitory/dormitory.vue?a151","webpack://platform/./pc/dormitory/func.js","webpack://platform/./pc/dormitory/room/leftMenu.vue?4920","webpack://platform/pc/dormitory/room/leftMenu.vue","webpack://platform/./pc/dormitory/room/leftMenu.vue?45f6","webpack://platform/./pc/dormitory/room/leftMenu.vue","webpack://platform/./pc/dormitory/room/guestsTopTool.vue?ad89","webpack://platform/./pc/dormitory/constant.js","webpack://platform/./pc/dormitory/dialog/timeRange.vue?0fc8","webpack://platform/pc/dormitory/dialog/timeRange.vue","webpack://platform/./pc/dormitory/dialog/timeRange.vue?4665","webpack://platform/./pc/dormitory/dialog/timeRange.vue","webpack://platform/./pc/dormitory/room/colorStateList.vue?b300","webpack://platform/pc/dormitory/room/colorStateList.vue","webpack://platform/./pc/dormitory/room/colorStateList.vue?045e","webpack://platform/./pc/dormitory/room/colorStateList.vue","webpack://platform/pc/dormitory/room/guestsTopTool.vue","webpack://platform/./pc/dormitory/room/guestsTopTool.vue?236b","webpack://platform/./pc/dormitory/room/guestsTopTool.vue","webpack://platform/./pc/dormitory/room/resetGroupTopTool.vue?fe09","webpack://platform/./pc/dormitory/room/inlineSelectBox.vue?ba8f","webpack://platform/pc/dormitory/room/inlineSelectBox.vue","webpack://platform/./pc/dormitory/room/inlineSelectBox.vue?372c","webpack://platform/./pc/dormitory/room/inlineSelectBox.vue","webpack://platform/pc/dormitory/room/resetGroupTopTool.vue","webpack://platform/./pc/dormitory/room/resetGroupTopTool.vue?4d39","webpack://platform/./pc/dormitory/room/resetGroupTopTool.vue","webpack://platform/./pc/dormitory/room/treeList.vue?eb1a","webpack://platform/pc/dormitory/room/treeList.vue","webpack://platform/./pc/dormitory/room/treeList.vue?7b8c","webpack://platform/./pc/dormitory/room/treeList.vue","webpack://platform/./pc/dormitory/room/roomBox.vue?de9f","webpack://platform/./pc/dormitory/dialog/guestsOptDialog.vue?6ea1","webpack://platform/./pc/dormitory/dialog/actionDialog.vue?7715","webpack://platform/pc/dormitory/dialog/actionDialog.vue","webpack://platform/./pc/dormitory/dialog/actionDialog.vue?491c","webpack://platform/./pc/dormitory/dialog/actionDialog.vue","webpack://platform/./pc/dormitory/room/floorBox.vue?1f30","webpack://platform/pc/dormitory/room/floorBox.vue","webpack://platform/./pc/dormitory/room/floorBox.vue?544e","webpack://platform/./pc/dormitory/room/floorBox.vue","webpack://platform/pc/dormitory/dialog/guestsOptDialog.vue","webpack://platform/./pc/dormitory/dialog/guestsOptDialog.vue?7b44","webpack://platform/./pc/dormitory/dialog/guestsOptDialog.vue","webpack://platform/pc/dormitory/room/roomBox.vue","webpack://platform/./pc/dormitory/room/roomBox.vue?c39f","webpack://platform/./pc/dormitory/room/roomBox.vue","webpack://platform/./pc/dormitory/room/groupTopTool.vue?bbdf","webpack://platform/pc/dormitory/room/groupTopTool.vue","webpack://platform/./pc/dormitory/room/groupTopTool.vue?56ea","webpack://platform/./pc/dormitory/room/groupTopTool.vue","webpack://platform/./pc/dormitory/room/groupList.vue?2341","webpack://platform/pc/dormitory/room/groupList.vue","webpack://platform/./pc/dormitory/room/groupList.vue?95fa","webpack://platform/./pc/dormitory/room/groupList.vue","webpack://platform/./pc/dormitory/room/groupRoomBox.vue?8639","webpack://platform/./pc/dormitory/dialog/roomHistoryDialog.vue?64e2","webpack://platform/pc/dormitory/dialog/roomHistoryDialog.vue","webpack://platform/./pc/dormitory/dialog/roomHistoryDialog.vue?f731","webpack://platform/./pc/dormitory/dialog/roomHistoryDialog.vue","webpack://platform/pc/dormitory/room/groupRoomBox.vue","webpack://platform/./pc/dormitory/room/groupRoomBox.vue?f581","webpack://platform/./pc/dormitory/room/groupRoomBox.vue","webpack://platform/./pc/dormitory/room/resetGroupRoomBox.vue?483c","webpack://platform/pc/dormitory/room/resetGroupRoomBox.vue","webpack://platform/./pc/dormitory/room/resetGroupRoomBox.vue?b057","webpack://platform/./pc/dormitory/room/resetGroupRoomBox.vue","webpack://platform/./pc/dormitory/room/allocationTopTool.vue?286f","webpack://platform/pc/dormitory/room/allocationTopTool.vue","webpack://platform/./pc/dormitory/room/allocationTopTool.vue?61de","webpack://platform/./pc/dormitory/room/allocationTopTool.vue","webpack://platform/./pc/dormitory/room/allocationRoomBox.vue?2f4e","webpack://platform/pc/dormitory/room/allocationRoomBox.vue","webpack://platform/./pc/dormitory/room/allocationRoomBox.vue?25e8","webpack://platform/./pc/dormitory/room/allocationRoomBox.vue","webpack://platform/./pc/dormitory/room/stateRoomBox.vue?1870","webpack://platform/pc/dormitory/room/stateRoomBox.vue","webpack://platform/./pc/dormitory/room/stateRoomBox.vue?bcdd","webpack://platform/./pc/dormitory/room/stateRoomBox.vue","webpack://platform/pc/dormitory/dormitory.vue","webpack://platform/./pc/dormitory/dormitory.vue?639c","webpack://platform/./pc/dormitory/dormitory.vue"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","$","$entries","entries","stat","O","EventBus","this","events","event","callback","undefined","arr","_","isArray","push","params","eventDeal","forEach","a","eventBus","window","$simpleEventBus","fails","getOwnPropertyNames","f","FAILS_ON_PRIMITIVES","forced","toIndexedObject","$getOwnPropertyNames","toString","windowNames","getWindowNames","it","error","slice","module","exports","call","ConfigBuilder","config","business","alert","name","msg","dsf","layer","title","type","message","Error","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","leftMenuTitle","scopedSlots","_u","fn","dynamicLeft","_b","ref","tag","commonProps","proxy","dynamicTop","dynamicRoom","staticRenderFns","_withStripped","DateFormat","isFunction","Date","Format","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","k","test","replace","RegExp","$1","getFullYear","substr","customAssign","source","__custom","old","other","assignWith","filterOriginFloor","originFloorList","roomStateList","build","obj","assign","roomDtos","filter","item","state","find","val","statusValue","checked","indexOf","_v","_s","_l","id","class","active","activeOpt","on","click","$event","labelClick","_e","_t","String","Array","default","computed","methods","$router","component","options","__file","queryTimeCouldChooseHistory","form","queryTime","doQuery","eventBusEvent","queryRoomList","treeNextLevel","treeCurrent","chosenRoomCheckOut","reserveRoomCancel","restoreSelectRoom","restoreAllRoom","autoCheckIn","refreshGroupList","resetOccupiedRoom","resetCheckedRoom","sureRoomResource","autoRoomResource","placeholder","readonly","readonlyArr","format","pickerOption1","change","changeTime1","model","value","sDate","$$v","$set","expression","pickerOption2","eDate","onlyChooseFuture","Boolean","data","disabledDate","disabledDate1","disabledDate2","time1","getTime","time2","toDay","time","temp","checkState","style","getSty","txt","checkAble","created","backgroundColor","bgColor","border","splice","index","$store","commit","inject","rightConfig","rightConfigPointer","components","timeRange","colorStateList","team","teamName","showSelect","selectList","comp","co","changeSelect","option","buildingId","label","currentSelect","firstTime","predis","queryBuildList","getFirstArea","next","q","typeValue","$http","get","apiBuildingList","url","done","res","unshift","typeText","num","personList","inlineSelectBox","btnLoading","checkOut","cancel","restore","restoreAll","auto","queryString","teamId","activeTeamId","preCheckOut","preCancel","preRestore","preRestoreAll","preAuto","treeList","leftProps","currentNodeKey","mid","expandedKeys","accordion","currentChange","nodeCollapse","apiTree","level","defaultChosen","leftConfig","leftConfigPointer","children","watch","$nextTick","$refs","tree","setCurrentKey","mtype","queryTree","mounted","nextLevel","recurData","current","mlevel","expandArr","isLeaf","list","node","childNodes","expanded","floorList","activeRoomId","clickRoom","visible","guestsVisible","room","currentRoom","info","roomStatusInfo","onCloseDialog","width","beforeClose","modal","close","guestsClose","roomName","emptyBedNum","closeDialog","directives","rawName","loadingOccupyInfo","timeStr","person","one","relId","typeStr","personName","sexText","phone","isReserveModule","renewal","past","changeRoom","checkIn","cancelReserve","reserve","release","empty","em","checkInVisible","save","checkInSave","closeFormDialog","checkInForm","rules","formRules","prop","idCard","reserveVisible","reserveSave","reserveForm","renewalVisible","renewalSave","renewalForm","newTimeForm","changeRoomVisible","top","changeRoomSave","inline","inlineForm","mlabel","selectList1","selectList2","queryRoomName","reloadQuery","icon","showClose","noFooter","loading","required","$emit","fl","multipleChoose","stopPropagation","checkAll","pCheckCss","buildingText","single","standard","suite","mul","emptyPlace","mchildren","ro","judgeLoading","mroomId","roomCss","roomSty","roomCheckbox","checkRoom","checkCss","numSty","mroomNum","purposeText","isAllocatedRoom","reserveId","roomText","sexValue","parseInt","appendOcc","chosenRoomId","loadingRoomId","apiRoomStatus","stateList","childrenAlias","roomNumAlias","roomIdAlias","stateRoomObj","diffArr","opt","$route","query","includes","roomId","chosen","chosenId","jud","isAllCheck","showBorder","color","background","result","concat","resize","rowNum","addEventListener","debounce","actionDialog","floorBox","apiRoomOccupyInfo","apiCheckIn","apiCheckOut","apiRenewal","apiReserve","apiCancelReserve","apiChangeRoom","queryInfo","isDataChanged","originInlineForm","currentSelectFloor","setting_sgcp_reserve","queryRoomOccupyInfo","cloneDeep","self","occupyId","sdate","edate","date","validate","then","lastDate","curDate","headers","isPastDue","confirm","customClass","currentTime","success","post","JSON","stringify","clearValidate","now_t","edate_t","guestsOptDialog","currentFloor","popGuests","beds","add","needReload","changeCollapse","boyList","boy","personId","headImg","src","alt","girlList","girl","personObj","apiGroupList","sexRule","queryList","reset","occupy","createInteraction","draggable","addClasses","start","helper","cursor","cursorAt","left","stop","autoDialogVisible","saveAuto","multiple","changeTeamSelect","selectExpand","reserveIds","changeBuildCheckGroup","buildingIds","buildList","rowList","row","r","floorName","floorIds","floorItems","types","roomTypesByAuto","rulesByAuto","disabled","status","changeRuleCheck","timeForm","roomStatusVisible","opened","staticStyle","resetGroup","go2Info","roomStatusDetailClick","apiResetPerson","roomHistoryDialog","dropAble","apiTeamCheckin","apiTeamCheckOut","apiRestoreSelectRoom","apiAutoCheckIn","apiReserveCancel","firstQueryRoomList","roomObj","mnum","removeClass","startTime","endTime","GetAllBuildList","defaultChosenTypes","roomIds","drop2room","droppable","tolerance","over","seatDOM","css","drop","seatId","isError","seat","out","roomMsg","func1","getRowList","checkList","judgeTeamTimeArrange","teamIsNotEmpty","teamNames","atomicity","isOK","pop","getTeam","all","p","Promise","end","timeNotPass","some","activeTeam","mix","occupied","preClick","sure","computeAssign","computeReserve","allNeedReserve","chosenBedNum","chosenRoomNum","msgChosenNum","code","roomTypeObj","roomTypes","decodeURIComponent","apiRoomReserveInfo","mReserve","mAssign","computeRoomNum","queryReserveInfo","controls","precision","apiResetRoomStatus","apiAssignRoomStatus","apiAutoAssign","ActionDialog","preResetOccupiedRoom","preSureRoomResource","unRooms","passRoomId","couldRooms","amount","getRoomObjs","roomMonthVisible","monthRoomInfo","monthArr","mSty","text","monthStateList","apiOneMonthRoomInfo","timeDistance","timeTicker","beforeDestroy","clearTimeout","setTimeout","dbClickRoom","singleClickRoom","provide","dormitoryRoot","leftMenu","getRightLayoutConfig","createDormitory","loop","initGuestLayout","guestsTopTool","roomBox","initGroup","groupTopTool","groupList","groupRoomBox","initAllocation","allocationTopTool","allocationRoomBox","initStatus","stateRoomBox","initResetGroup","resetGroupTopTool","resetGroupRoomBox","renderInner","getDefaultTime","off","importFiles","leftConfigUrl","rightLayoutUrl","mStart","mEnd","defaultQuery","originTime","mTime","map","funName","values","vm"],"mappings":"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","file":"modules/platform/js/dsf-platform.Dormitory.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","class EventBus {\r\n  constructor() {\r\n    this.events = {};\r\n  }\r\n  \r\n  listen(event, callback){\r\n    if (this.events[event] === undefined){\r\n      this.events[event] = [callback];\r\n    }\r\n    else {\r\n      const arr = this.events[event];\r\n      if (!_.isArray(arr)){\r\n        console.log(`请使用 on 来监听 ${event} 事件`)\r\n        return\r\n      }\r\n      arr.push(callback)\r\n    }\r\n  }\r\n  dispatch(event, params){\r\n    const eventDeal = this.events[event];\r\n    if (!eventDeal){\r\n      console.log(event + \"未使用listen 注册\")\r\n      return;\r\n    }\r\n    \r\n    if (!_.isArray(eventDeal)){\r\n      console.log(event + \"被on注册, 应使用emit触发\")\r\n      return\r\n    }\r\n    eventDeal.forEach(a => {\r\n      a(params)\r\n    })\r\n  }\r\n\r\n  on(event, callback)  {\r\n    if (this.events[event] === undefined){\r\n      this.events[event] = callback\r\n    }\r\n    else if (_.isArray(this.events[event])){\r\n      console.log(`请使用 listen 来监听 ${event} 事件`);\r\n    }\r\n    else {\r\n      console.log(event + \" 监听器重名\");\r\n    }\r\n  }\r\n  emit(event, params) {\r\n    const eventDeal = this.events[event]\r\n    if (!eventDeal){\r\n      console.log(event + \"未使用on 注册\")\r\n      return;\r\n    }\r\n    if (_.isArray(eventDeal)){\r\n      console.log(event + \"被listen注册, 应使用dispatch触发\")\r\n      return\r\n    }\r\n  \r\n    eventDeal(params)\r\n  }\r\n  off(event) {\r\n    this.events[event] = undefined;\r\n  }\r\n  clear(){\r\n    this.events = {}\r\n  }\r\n\r\n  $getAllListener(){\r\n    return Object.entries(this.events)\r\n  }\r\n}\r\n\r\nconst eventBus = new EventBus();\r\nwindow.$simpleEventBus = eventBus;\r\nexport default eventBus","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names-external').f;\n\n// eslint-disable-next-line es/no-object-getownpropertynames -- required for testing\nvar FAILS_ON_PRIMITIVES = fails(function () { return !Object.getOwnPropertyNames(1); });\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  getOwnPropertyNames: getOwnPropertyNames\n});\n","/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","export default class ConfigBuilder {\r\n  constructor(config, business) {\r\n    this.config = config;\r\n    if (!business){\r\n      this.alert(\"url里面缺少必要的opt参数\");\r\n    }\r\n    if (!this.config[business]) {\r\n      this.alert(`[${this.config.name}] url里面的opt参数没有对应的配置项`);\r\n    }\r\n    Object.getOwnPropertyNames(this.config[business]).forEach(key => {\r\n      this[key] = this.config[business][key];\r\n    })\r\n  }\r\n  \r\n  alert(msg){\r\n    dsf.layer.alert({\r\n      title: \"警告\",\r\n      type: \"warning\",\r\n      message: msg\r\n    });\r\n    throw new Error(msg)\r\n  }\r\n}","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ds-dormitory-container\" },\n    [\n      _c(\"left-menu\", {\n        attrs: { title: _vm.leftMenuTitle },\n        scopedSlots: _vm._u([\n          {\n            key: \"inner\",\n            fn: function() {\n              return [\n                _c(\n                  _vm.dynamicLeft,\n                  _vm._b(\n                    { ref: \"left\", tag: \"component\" },\n                    \"component\",\n                    _vm.commonProps,\n                    false,\n                    true\n                  )\n                )\n              ]\n            },\n            proxy: true\n          }\n        ])\n      }),\n      _c(\n        \"div\",\n        { staticClass: \"ds-dormitory-right\" },\n        [\n          _c(\n            \"div\",\n            { staticClass: \"top-tool-container\" },\n            [\n              _c(\n                _vm.dynamicTop,\n                _vm._b(\n                  { ref: \"top\", tag: \"component\" },\n                  \"component\",\n                  _vm.commonProps,\n                  false,\n                  true\n                )\n              )\n            ],\n            1\n          ),\n          _c(\n            _vm.dynamicRoom,\n            _vm._b(\n              { ref: \"room\", tag: \"component\" },\n              \"component\",\n              _vm.commonProps,\n              false,\n              true\n            )\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// 对Date的扩展，将 Date 转化为指定格式的String\r\n// 月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符，\r\n// 年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)\r\n// 例子：\r\n// (new Date()).Format(\"yyyy-MM-dd hh:mm:ss.S\") ==> 2006-07-02 08:09:04.423\r\n// (new Date()).Format(\"yyyy-M-d h:m:s.S\")      ==> 2006-7-2 8:9:4.18\r\nconst DateFormat = () => {\r\n  if (_.isFunction(Date.prototype.Format)) return;\r\n  Date.prototype.Format = function (fmt) {\r\n    const o = {\r\n      \"M+\": this.getMonth() + 1, //月份\r\n      \"d+\": this.getDate(), //日\r\n      \"h+\": this.getHours(), //小时\r\n      \"m+\": this.getMinutes(), //分\r\n      \"s+\": this.getSeconds(), //秒\r\n      \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度\r\n      \"S\": this.getMilliseconds() //毫秒\r\n    };\r\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n    for (let k in o)\r\n      if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n    return fmt;\r\n  }\r\n}\r\n\r\nconst customAssign = (source, target) => {\r\n  const __custom = (old, other) => {\r\n    return other ? other : old\r\n  }\r\n  return _.assignWith({}, source, target, __custom)\r\n}\r\n\r\nconst filterOriginFloor = (originFloorList, roomStateList) => {\r\n  if (!originFloorList || originFloorList.length === 0) return [];\r\n  \r\n  const arr = [];\r\n  originFloorList.forEach(build => {\r\n    const obj = Object.assign({}, build);\r\n    obj.roomDtos = build.roomDtos.filter(item => {\r\n      const state = roomStateList.find(a => a.val === item.statusValue);\r\n      return state? state.checked: false\r\n    })\r\n    arr.push(obj);\r\n  })\r\n  \r\n  return arr\r\n}\r\n\r\nconst assign = (obj, config, filter = []) => {\r\n  for (let k in config) {\r\n    if (filter.indexOf(k) === -1) {\r\n      obj[k] = config[k];\r\n    }\r\n  }\r\n}\r\n\r\nexport {\r\n  DateFormat,\r\n  customAssign,\r\n  filterOriginFloor,\r\n  assign\r\n}\r\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ds-dormitory-left\" },\n    [\n      _c(\n        \"div\",\n        { staticClass: \"title\" },\n        [\n          _vm.dsf.type(_vm.title) === \"string\"\n            ? [\n                _c(\"label\", { staticClass: \"active\" }, [\n                  _vm._v(_vm._s(_vm.title))\n                ])\n              ]\n            : _vm.dsf.type(_vm.title) === \"array\"\n            ? _vm._l(_vm.title, function(it) {\n                return _c(\n                  \"label\",\n                  {\n                    key: it.id,\n                    class: { active: _vm.activeOpt === it.id },\n                    on: {\n                      click: function($event) {\n                        return _vm.labelClick(it)\n                      }\n                    }\n                  },\n                  [_vm._v(\" \" + _vm._s(it.title) + \" \")]\n                )\n              })\n            : _vm._e()\n        ],\n        2\n      ),\n      _vm._t(\"inner\")\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"ds-dormitory-left\">\r\n    <div class=\"title\">\r\n      <template v-if=\"dsf.type(title) === 'string'\">\r\n        <label class=\"active\">{{ title }}</label>\r\n      </template>\r\n      <template v-else-if=\"dsf.type(title) === 'array'\">\r\n        <label\r\n          v-for=\"it in title\"\r\n          :key=\"it.id\"\r\n          :class=\"{active: activeOpt === it.id}\"\r\n          @click=\"labelClick(it)\"\r\n        >\r\n          {{ it.title }}\r\n        </label>\r\n      </template>\r\n    </div>\r\n    <slot name=\"inner\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"leftMenu\",\r\n  props: {\r\n    title: {\r\n      type: [String, Array],\r\n      default: \"\"\r\n    }\r\n  },\r\n  computed: {\r\n    activeOpt() {\r\n      return this.$route.query?.opt;\r\n    }\r\n    // mtitle() {\r\n    //   const opt = this.$route.query.opt;\r\n    //   if (typeof this.title === \"string\") {\r\n    //     return `<label class=\"active\">${this.title}</label>`\r\n    //   } else if (this.title instanceof Array) {\r\n    //     let str = \"\";\r\n    //     this.title.forEach(a => {\r\n    //       str += `<label class=\"${a.opt === opt ? 'active' : ''}\" data-opt=\"${a.opt}\">${a.title}</label>`\r\n    //     })\r\n    //\r\n    //     return str\r\n    //   }\r\n    //\r\n    //\r\n    //   return \"\"\r\n    // }\r\n  },\r\n  // mounted() {\r\n  //   this.bindLabelClickEvent()\r\n  // },\r\n  // watch:{\r\n  //   '$route.query.opt'(){\r\n  //     this.bindLabelClickEvent()\r\n  //   },\r\n  // },\r\n  methods:{\r\n    labelClick({ query }){\r\n      this.$router.replace({query})\r\n    },\r\n    // bindLabelClickEvent(){\r\n    //   const self = this;\r\n    //   setTimeout(()=>{\r\n    //     $(\".title\").children(\"label\").on(\"click\", function () {\r\n    //       const opt = $(this).data(\"opt\");\r\n    //       self.$router.replace({query: {opt}})\r\n    //     })\r\n    //   }, 500)\r\n    // }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./leftMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./leftMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./leftMenu.vue?vue&type=template&id=0a48f87c&\"\nimport script from \"./leftMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./leftMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0a48f87c')) {\n      api.createRecord('0a48f87c', component.options)\n    } else {\n      api.reload('0a48f87c', component.options)\n    }\n    module.hot.accept(\"./leftMenu.vue?vue&type=template&id=0a48f87c&\", function () {\n      api.rerender('0a48f87c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/leftMenu.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"top-tool\" }, [\n    _c(\"div\", { staticClass: \"title\" }, [_vm._v(_vm._s(_vm.title))]),\n    _c(\n      \"div\",\n      { staticClass: \"sec-box\" },\n      [\n        _c(\"color-state-list\", {\n          attrs: { \"room-state-list\": _vm.roomStateList }\n        }),\n        _c(\"time-range\", {\n          attrs: {\n            \"only-choose-future\": !_vm.queryTimeCouldChooseHistory,\n            form: _vm.queryTime\n          }\n        }),\n        _c(\"dsf-button\", { on: { click: _vm.doQuery } }, [_vm._v(\"搜索\")])\n      ],\n      1\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","const eventBusEvent = {\r\n  queryRoomList: \"queryRoomList\",\r\n  treeNextLevel: \"treeNextLevel\",\r\n  treeCurrent: \"treeCurrent\",\r\n  chosenRoomCheckOut: \"chosenRoomCheckOut\",    //已选房间退房\r\n  reserveRoomCancel: \"reserveRoomCancel\",    //预约房取消\r\n  restoreSelectRoom: \"restoreSelectRoom\",   //重置已选房间\r\n  restoreAllRoom: \"restoreAllRoom\",   //重置全部房间\r\n  autoCheckIn: \"autoCheckIn\",   //自动排房\r\n  refreshGroupList: \"refreshGroupList\",   //刷新团体人员列表\r\n  resetOccupiedRoom: \"resetOccupiedRoom\",       //重置已配房源\r\n  resetCheckedRoom: \"resetCheckedRoom\",         //重置已选房源\r\n  sureRoomResource: \"sureRoomResource\",         //确定分配房源\r\n  autoRoomResource: \"autoRoomResource\",         //自动分配房源\r\n}\r\n\r\nexport {eventBusEvent}","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"date-box\" },\n    [\n      _c(\"el-date-picker\", {\n        attrs: {\n          type: \"datetime\",\n          placeholder: \"选择开始时间\",\n          readonly: this.readonlyArr[0],\n          \"value-format\": \"yyyy-MM-dd HH:mm:ss\",\n          format: \"yyyy-MM-dd HH:mm\",\n          \"picker-options\": _vm.pickerOption1\n        },\n        on: { change: _vm.changeTime1 },\n        model: {\n          value: _vm.form.sDate,\n          callback: function($$v) {\n            _vm.$set(_vm.form, \"sDate\", $$v)\n          },\n          expression: \"form.sDate\"\n        }\n      }),\n      _c(\"span\", { staticClass: \"time-divider\" }, [_vm._v(\"至\")]),\n      _c(\"el-date-picker\", {\n        attrs: {\n          type: \"datetime\",\n          placeholder: \"选择结束时间\",\n          readonly: this.readonlyArr[1],\n          \"value-format\": \"yyyy-MM-dd HH:mm:ss\",\n          format: \"yyyy-MM-dd HH:mm\",\n          \"picker-options\": _vm.pickerOption2\n        },\n        model: {\n          value: _vm.form.eDate,\n          callback: function($$v) {\n            _vm.$set(_vm.form, \"eDate\", $$v)\n          },\n          expression: \"form.eDate\"\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"date-box\">\r\n    <el-date-picker v-model=\"form.sDate\" type=\"datetime\" placeholder=\"选择开始时间\" :readonly=\"this.readonlyArr[0]\" value-format=\"yyyy-MM-dd HH:mm:ss\" format=\"yyyy-MM-dd HH:mm\" @change=\"changeTime1\" :picker-options=\"pickerOption1\">\r\n    </el-date-picker>\r\n    <span class=\"time-divider\">至</span>\r\n    <el-date-picker v-model=\"form.eDate\" type=\"datetime\" placeholder=\"选择结束时间\" :readonly=\"this.readonlyArr[1]\" value-format=\"yyyy-MM-dd HH:mm:ss\" format=\"yyyy-MM-dd HH:mm\" :picker-options=\"pickerOption2\">\r\n    </el-date-picker>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"timeRange\",\r\n  props: {\r\n    form: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          sDate: \"\",\r\n          eDate: \"\"\r\n        };\r\n      }\r\n    },\r\n    readonlyArr: {\r\n      type: Array,\r\n      default() {\r\n        return [false, false];\r\n      }\r\n    },\r\n    onlyChooseFuture: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      pickerOption1: {\r\n        disabledDate: this.disabledDate1\r\n      },\r\n      pickerOption2: {\r\n        disabledDate: this.disabledDate2\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    time1() {\r\n      return new Date(this.form.sDate).getTime();\r\n    },\r\n    time2() {\r\n      return new Date(this.form.eDate).getTime();\r\n    }\r\n  },\r\n  methods: {\r\n    disabledDate1(date) {\r\n      if (!this.onlyChooseFuture) return false;\r\n      let toDay = new Date().Format(\"yyyy-MM-dd\");\r\n      toDay = new Date(toDay + \" 00:00:00\").getTime();\r\n      const time = new Date(date).getTime();\r\n      return time < toDay;\r\n    },\r\n    disabledDate2(date) {\r\n      const temp = new Date(date).getTime();\r\n      return temp < this.time1;\r\n    },\r\n    changeTime1() {\r\n      if (this.time1 >= this.time2) {\r\n        this.form.eDate = \"\";\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./timeRange.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./timeRange.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./timeRange.vue?vue&type=template&id=1d1bcd11&\"\nimport script from \"./timeRange.vue?vue&type=script&lang=js&\"\nexport * from \"./timeRange.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1d1bcd11')) {\n      api.createRecord('1d1bcd11', component.options)\n    } else {\n      api.reload('1d1bcd11', component.options)\n    }\n    module.hot.accept(\"./timeRange.vue?vue&type=template&id=1d1bcd11&\", function () {\n      api.rerender('1d1bcd11', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/dialog/timeRange.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"ul\",\n    { staticClass: \"ds-state-list\" },\n    _vm._l(_vm.roomStateList, function(item, it) {\n      return _c(\"li\", { key: item.val }, [\n        _c(\n          \"label\",\n          {\n            on: {\n              click: function($event) {\n                return _vm.checkState(item, it)\n              }\n            }\n          },\n          [\n            _c(\"i\", { style: _vm.getSty(item) }),\n            _c(\"span\", [_vm._v(_vm._s(item.txt))])\n          ]\n        )\n      ])\n    }),\n    0\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <ul class=\"ds-state-list\">\r\n    <li v-for=\"(item, it) in roomStateList\" :key=\"item.val\">\r\n      <label @click=\"checkState(item, it)\">\r\n        <i :style=\"getSty(item)\"></i>\r\n        <span>{{item.txt}}</span>\r\n      </label>\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"colorStateList\",\r\n  props: {\r\n    roomStateList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    checkAble: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  created() {\r\n    //默认所有的房态都被选中\r\n    this.roomStateList.forEach(a => {\r\n      a.checked = true\r\n    })\r\n  },\r\n  methods: {\r\n    getSty(a) {\r\n      return {\r\n        backgroundColor: a.checked ? a.bgColor: \"rgba(255,255,255,0)\",\r\n        border: a.checked ? \"none\": \"2px solid \" + a.color\r\n      }\r\n    },\r\n    checkState(a, index){\r\n      if (!this.checkAble) return;\r\n      const arr = _.cloneDeep(this.roomStateList);\r\n      const temp = Object.assign({}, a);\r\n      temp.checked = !temp.checked\r\n      arr.splice(index, 1, temp)\r\n      this.$store.commit('dormitory/changeRoomStateList', arr)\r\n    },\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorStateList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorStateList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./colorStateList.vue?vue&type=template&id=31f69068&\"\nimport script from \"./colorStateList.vue?vue&type=script&lang=js&\"\nexport * from \"./colorStateList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('31f69068')) {\n      api.createRecord('31f69068', component.options)\n    } else {\n      api.reload('31f69068', component.options)\n    }\n    module.hot.accept(\"./colorStateList.vue?vue&type=template&id=31f69068&\", function () {\n      api.rerender('31f69068', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/colorStateList.vue\"\nexport default component.exports","<template>\r\n  <div class=\"top-tool\">\r\n    <div class=\"title\">{{title}}</div>\r\n    <div class=\"sec-box\">\r\n      <color-state-list :room-state-list=\"roomStateList\"></color-state-list>\r\n      <time-range :only-choose-future=\"!queryTimeCouldChooseHistory\" :form=\"queryTime\"></time-range>\r\n      <dsf-button @click=\"doQuery\">搜索</dsf-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport timeRange from \"_platform/pc/dormitory/dialog/timeRange\";\r\nimport colorStateList from \"_platform/pc/dormitory/room/colorStateList\";\r\nimport {assign} from \"_platform/pc/dormitory/func\";\r\n  \r\nexport default {\r\n  name: \"guestsTopTool\",\r\n  inject: ['rightConfigPointer'],\r\n  props: {\r\n    queryTime: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          sDate: \"\",\r\n          eDate: \"\",\r\n        }\r\n      }\r\n    },\r\n  },\r\n  computed:{\r\n    ...mapState('dormitory', [\r\n      'roomStateList'\r\n    ]),\r\n    rightConfig(){\r\n      return this.rightConfigPointer()\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      title: \"\",\r\n      queryTimeCouldChooseHistory: false\r\n    }\r\n  },\r\n  components: {\r\n    timeRange,\r\n    colorStateList\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig, ['roomStateList']);\r\n  },\r\n  methods: {\r\n    doQuery() {\r\n      eventBus.emit(eventBusEvent.queryRoomList);\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./guestsTopTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./guestsTopTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./guestsTopTool.vue?vue&type=template&id=33af2734&\"\nimport script from \"./guestsTopTool.vue?vue&type=script&lang=js&\"\nexport * from \"./guestsTopTool.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('33af2734')) {\n      api.createRecord('33af2734', component.options)\n    } else {\n      api.reload('33af2734', component.options)\n    }\n    module.hot.accept(\"./guestsTopTool.vue?vue&type=template&id=33af2734&\", function () {\n      api.rerender('33af2734', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/guestsTopTool.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [\n    _c(\n      \"div\",\n      { staticClass: \"top-tool\" },\n      [\n        _c(\"div\", { staticClass: \"title\" }, [_vm._v(_vm._s(_vm.title))]),\n        _c(\"color-state-list\", {\n          attrs: { \"room-state-list\": _vm.roomStateList }\n        }),\n        _c(\"inline-select-box\")\n      ],\n      1\n    ),\n    _vm.team\n      ? _c(\"div\", { staticClass: \"msg-box\" }, [\n          _c(\"div\", { staticClass: \"msg\" }, [\n            _c(\"label\", [_vm._v(\"当前团体：\")]),\n            _c(\"span\", [_vm._v(_vm._s(_vm.team.teamName))]),\n            _c(\"span\", { staticClass: \"time\" }, [\n              _vm._v(_vm._s(_vm.team.sDate))\n            ]),\n            _vm._v(\"至 \"),\n            _c(\"span\", { staticClass: \"time\" }, [\n              _vm._v(_vm._s(_vm.team.eDate))\n            ])\n          ])\n        ])\n      : _vm._e()\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.showSelect\n    ? _c(\n        \"div\",\n        { staticClass: \"select-box\" },\n        _vm._l(_vm.selectList, function(comp, co) {\n          return _c(\n            \"el-select\",\n            {\n              key: co,\n              attrs: { placeholder: comp.placeholder },\n              on: {\n                change: function($event) {\n                  return _vm.changeSelect(co)\n                }\n              },\n              model: {\n                value: comp.value,\n                callback: function($$v) {\n                  _vm.$set(comp, \"value\", $$v)\n                },\n                expression: \"comp.value\"\n              }\n            },\n            _vm._l(comp.option, function(item, it) {\n              return _c(\"el-option\", {\n                key: item.buildingId,\n                attrs: { value: item.buildingId, label: item.name }\n              })\n            }),\n            1\n          )\n        }),\n        1\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"showSelect\" class=\"select-box\">\r\n    <el-select\r\n      v-for=\"(comp, co) in selectList\"\r\n      v-model=\"comp.value\"\r\n      :key=\"co\"\r\n      @change=\"changeSelect(co)\"\r\n      :placeholder=\"comp.placeholder\"\r\n    >\r\n      <el-option\r\n        v-for=\"(item, it) in comp.option\"\r\n        :key=\"item.buildingId\"\r\n        :value=\"item.buildingId\"\r\n        :label=\"item.name\"\r\n      >\r\n      </el-option>\r\n    </el-select>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {assign} from \"_platform/pc/dormitory/func\";\r\n\r\nexport default {\r\n  name: \"inlineSelectBox\",\r\n  inject: ['rightConfigPointer'],\r\n  computed: {\r\n    rightConfig(){\r\n      return this.rightConfigPointer()\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      selectList: [],\r\n        \r\n      //项目属性\r\n      showSelect: false,\r\n      currentSelect: null,    //当前的选中项\r\n      firstTime: true,    //是否是第一次加载\r\n    }\r\n  },\r\n  created() {\r\n    let predis = dsf.url.queryString(\"predis\");\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig);\r\n    //预分配的团体入住不展示此控件\r\n    if (predis === \"1\") {\r\n      this.getFirstArea();     //将默认分区发送给groupRoomBox\r\n      return;\r\n    }\r\n      \r\n    this.showSelect = true;\r\n    this.selectList.forEach(item => {\r\n      item.value = \"\";\r\n      item.option = []\r\n    })\r\n    this.queryBuildList();\r\n  },\r\n  methods: {\r\n    queryBuildList(num = -1) {\r\n      let next = num + 1\r\n      if (!this.selectList[next]) return;\r\n        \r\n      let q = {};\r\n      if (this.currentSelect) {\r\n        q = {\r\n          buildingId: this.currentSelect.buildingId,\r\n          type: +this.currentSelect.typeValue + 1\r\n        }\r\n      }\r\n      this.$http.get(this.apiBuildingList.url, q).done(res => {\r\n        let obj = this.selectList.slice(next, next + 1);\r\n        //给楼宇选项添加 \"全部楼宇\"\r\n        if (next === 1) {\r\n          res.data.unshift({\r\n            buildingId: this.selectList[next-1].value,\r\n            name: \"全部\",\r\n            typeText: \"分区\",\r\n            typeValue: 0\r\n          })\r\n        }\r\n          \r\n        //给楼层选项添加 \"全部楼层\"\r\n        if (next === 2){\r\n          res.data.unshift({\r\n            buildingId: this.selectList[next-1].value,\r\n            name: \"全部\",\r\n            typeText: \"楼宇\",\r\n            typeValue: 1\r\n          })\r\n        }\r\n        obj.option = res.data;\r\n        this.selectList.splice(next, 1, obj);\r\n        //当楼宇选择了全部, 清除楼层(第三项)的所有下拉项\r\n        if (this.currentSelect?.name === \"全部\" && this.currentSelect?.typeValue === 0){\r\n          this.selectList[2].option = []\r\n        }\r\n          \r\n        //页面初始化时默认选中第一项\r\n        if (this.firstTime){\r\n          this.firstTime = false;\r\n          this.selectList[0].value = res.data[0].buildingId;\r\n          this.changeSelect(0)\r\n        }\r\n      })\r\n    },\r\n    changeSelect(num) {\r\n      this.currentSelect = this.selectList[num].option.find(a => a.buildingId === this.selectList[num].value);\r\n      eventBus.emit(eventBusEvent.queryRoomList, this.currentSelect);\r\n      //清除后面的项\r\n      for (let i = 0; i < this.selectList.length; i++) {\r\n        if (i <= num) continue;\r\n        let obj = this.selectList.slice(i, i + 1);\r\n        obj.option = [];\r\n        obj.value = \"\";\r\n        this.selectList.splice(i, 1, obj);\r\n      }\r\n      //查询下一项列表\r\n      this.queryBuildList(num);\r\n    },\r\n    getFirstArea(){\r\n      this.$http.get(this.apiBuildingList.url).done(res => {\r\n        let firstArea = res.data[0];\r\n        eventBus.emit(eventBusEvent.queryRoomList, firstArea)\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inlineSelectBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inlineSelectBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./inlineSelectBox.vue?vue&type=template&id=b0206cec&\"\nimport script from \"./inlineSelectBox.vue?vue&type=script&lang=js&\"\nexport * from \"./inlineSelectBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('b0206cec')) {\n      api.createRecord('b0206cec', component.options)\n    } else {\n      api.reload('b0206cec', component.options)\n    }\n    module.hot.accept(\"./inlineSelectBox.vue?vue&type=template&id=b0206cec&\", function () {\n      api.rerender('b0206cec', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/inlineSelectBox.vue\"\nexport default component.exports","<template>\r\n  <div>\r\n    <div class=\"top-tool\">\r\n      <div class=\"title\">{{title}}</div>\r\n      <color-state-list :room-state-list=\"roomStateList\"></color-state-list>\r\n      <inline-select-box></inline-select-box>\r\n    </div>\r\n    <div v-if=\"team\" class=\"msg-box\">\r\n      <div class=\"msg\">\r\n        <label>当前团体：</label>\r\n        <span>{{team.teamName}}</span>\r\n        <span class=\"time\">{{team.sDate}}</span>至\r\n        <span class=\"time\">{{team.eDate}}</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport colorStateList from \"_platform/pc/dormitory/room/colorStateList\";\r\nimport inlineSelectBox from \"_platform/pc/dormitory/room/inlineSelectBox\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {assign} from \"_platform/pc/dormitory/func\";\r\n  \r\nexport default {\r\n  name: \"resetGroupTopTool\",\r\n  inject: ['rightConfigPointer'],\r\n  props: {\r\n    personList:{\r\n      type: Array,\r\n      default(){\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    colorStateList,\r\n    inlineSelectBox\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      title: \"\",\r\n      apiBuildingList: null,\r\n        \r\n      //项目属性\r\n      btnLoading:{\r\n        checkOut: false,\r\n        cancel: false,\r\n        restore: false,\r\n        restoreAll: false,\r\n        auto: false\r\n      }\r\n    }\r\n  },\r\n  computed:{\r\n    rightConfig(){\r\n      return this.rightConfigPointer()\r\n    },\r\n    predis(){\r\n      return dsf.url.queryString(\"predis\")\r\n    },\r\n    ...mapState('dormitory', [\r\n      'roomStateList',\r\n      'activeTeamId'\r\n    ]),\r\n    team(){\r\n      let team = null;\r\n      for (let i=0; i<this.personList.length; i++){\r\n        let a = this.personList[i];\r\n        if (a.teamId === this.activeTeamId){\r\n          team = Object.assign({}, a);\r\n          team.sDate = a.sDate.replace(/:\\d\\d$/, \"\");\r\n          team.eDate = a.eDate.replace(/:\\d\\d$/, \"\");\r\n          break;\r\n        }\r\n      }\r\n      return team\r\n    },\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig, ['roomStateList']);\r\n  },\r\n  methods: {\r\n    preCheckOut() {\r\n      eventBus.emit(eventBusEvent.chosenRoomCheckOut, this.btnLoading);\r\n    },\r\n    preCancel() {\r\n      eventBus.emit(eventBusEvent.reserveRoomCancel, this.btnLoading)\r\n    },\r\n    preRestore() {\r\n      eventBus.emit(eventBusEvent.restoreSelectRoom, this.btnLoading);\r\n    },\r\n    preRestoreAll() {\r\n      eventBus.emit(eventBusEvent.restoreAllRoom, this.btnLoading)\r\n    },\r\n    preAuto() {\r\n      eventBus.emit(eventBusEvent.autoCheckIn, this.btnLoading)\r\n    },\r\n      \r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resetGroupTopTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resetGroupTopTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./resetGroupTopTool.vue?vue&type=template&id=2f24bb1e&\"\nimport script from \"./resetGroupTopTool.vue?vue&type=script&lang=js&\"\nexport * from \"./resetGroupTopTool.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2f24bb1e')) {\n      api.createRecord('2f24bb1e', component.options)\n    } else {\n      api.reload('2f24bb1e', component.options)\n    }\n    module.hot.accept(\"./resetGroupTopTool.vue?vue&type=template&id=2f24bb1e&\", function () {\n      api.rerender('2f24bb1e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/resetGroupTopTool.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"el-tree\", {\n    ref: \"tree\",\n    attrs: {\n      data: _vm.treeList,\n      props: _vm.leftProps,\n      \"icon-class\": \"el-icon-arrow-right\",\n      \"current-node-key\": _vm.currentNodeKey,\n      \"node-key\": _vm.mid,\n      \"default-expand-all\": false,\n      \"default-expanded-keys\": _vm.expandedKeys,\n      accordion: \"\"\n    },\n    on: {\n      \"current-change\": _vm.currentChange,\n      \"node-collapse\": _vm.nodeCollapse\n    }\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <el-tree\r\n    ref=\"tree\"\r\n    :data=\"treeList\"\r\n    :props=\"leftProps\"\r\n    icon-class=\"el-icon-arrow-right\"\r\n    :current-node-key=\"currentNodeKey\"\r\n    :node-key=\"mid\"\r\n    :default-expand-all=\"false\"\r\n    :default-expanded-keys=\"expandedKeys\"\r\n    accordion\r\n    @current-change=\"currentChange\"\r\n    @node-collapse=\"nodeCollapse\"\r\n  ></el-tree>\r\n</template>\r\n\r\n<script>\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {assign} from \"_platform/pc/dormitory/func\";\r\n\r\nexport default {\r\n  name: \"treeList\",\r\n  inject:['leftConfigPointer'],\r\n  props: {\r\n    treeList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      apiTree: null,\r\n      leftProps: null,\r\n      level: null,\r\n\r\n      //项目属性\r\n      defaultChosen: null,    //默认选中的项\r\n      currentNodeKey: \"\",     //选中项的key\r\n      expandedKeys: [],\r\n    }\r\n  },\r\n  computed: {\r\n    leftConfig(){\r\n      return this.leftConfigPointer()\r\n    },\r\n    \"mid\"() {\r\n      return this.leftProps.id\r\n    },\r\n    \"mtype\"() {\r\n      return this.leftProps.type\r\n    },\r\n    \"mchildren\"() {\r\n      return this.leftProps.children\r\n    }\r\n  },\r\n  watch: {\r\n    treeList() {\r\n      this.$nextTick(() => {\r\n        let buildingId = dsf.url.queryString(\"buildingId\");\r\n        if (buildingId) {\r\n          this.currentNodeKey = buildingId;\r\n        } else {\r\n          this.currentNodeKey = this.defaultChosen[this.mid];\r\n        }\r\n      })\r\n    },\r\n    currentNodeKey(val) {\r\n      console.log(\"currentNode改变了\")\r\n      this.$refs.tree.setCurrentKey(val);\r\n      const data = this.$refs.tree.getCurrentNode();\r\n      this.$store.commit(\"dormitory/currentFloor\", {\r\n        buildingId: data[this.mid],\r\n        type: data[this.mtype]\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.leftConfig);   //赋值部分配置项\r\n    assign(this, this.leftConfig);\r\n    this.queryTree();\r\n  },\r\n  mounted() {\r\n    eventBus.on(eventBusEvent.treeNextLevel, q => {\r\n      let nextLevel;\r\n      const data = _.cloneDeep(this.treeList);\r\n      const recurData = list => {\r\n        for (let i = 0; i < list.length; i++) {\r\n          let item = list[i];\r\n          let children = item[this.mchildren];\r\n          if (_.isArray(children) && children.length > 0) {\r\n            if (q.id === item[this.mid]) {\r\n              nextLevel = children\r\n            }\r\n            recurData(children)\r\n          }\r\n        }\r\n      }\r\n      recurData(data)\r\n      q.callback(nextLevel);\r\n    })\r\n\r\n    eventBus.on(eventBusEvent.treeCurrent, q => {\r\n      let current;\r\n      const data = _.cloneDeep(this.treeList);\r\n      const recurData = list => {\r\n        for (let i = 0; i < list.length; i++) {\r\n          let item = list[i];\r\n          let children = item[this.mchildren];\r\n\r\n          if (q.id === item[this.mid]) current = item;\r\n          if (_.isArray(children) && children.length > 0) {\r\n            recurData(children)\r\n          }\r\n        }\r\n      }\r\n\r\n      recurData(data)\r\n      q.callback(current);\r\n    })\r\n  },\r\n  methods: {\r\n    queryTree() {\r\n      const computeTree = list => {\r\n        let mlevel = 0;\r\n        const expandArr = [];     //默认展开的数组\r\n        let defaultChosen;        //第一个选中的节点\r\n\r\n        const recurData = list => {\r\n          for (let i = 0; i < list.length; i++) {\r\n            let item = list[i];\r\n            if (_.isArray(item[this.mchildren]) && item[this.mchildren].length > 0) {\r\n              //赋值默认展开的数组\r\n              if (mlevel < this.level) {\r\n                mlevel += 1\r\n                item.mlevel = mlevel;\r\n                expandArr.push(item[this.mid])\r\n              }\r\n              if (mlevel === this.level) {\r\n                !defaultChosen && (defaultChosen = item)\r\n              }\r\n\r\n              recurData(item[this.mchildren])\r\n            } else {\r\n              item.mlevel = mlevel + 1;\r\n              item.isLeaf = true;\r\n              !defaultChosen && (defaultChosen = item)\r\n            }\r\n          }\r\n        }\r\n        recurData(list);\r\n        return {\r\n          expandArr: expandArr,\r\n          defaultChosen: defaultChosen,\r\n        }\r\n      }\r\n\r\n      this.$http.get(this.apiTree.url)\r\n        .done(res => {\r\n          let data = res.data;\r\n          if (_.isFunction(this.apiTree.callback)) {\r\n            data = this.apiTree.callback(data);\r\n          }\r\n\r\n          //计算需要展开的节点\r\n          if (_.isNumber(this.level) && this.level > 0) {\r\n            const result = computeTree(data);\r\n            this.expandedKeys = result.expandArr;\r\n            this.defaultChosen = result.defaultChosen;\r\n          }\r\n\r\n          this.$emit(\"update:treeList\", data);\r\n        })\r\n        .error(() => {\r\n          dsf.layer.message(\"查询左侧房间列表异常\", false)\r\n        })\r\n    },\r\n    currentChange(data) {\r\n      this.$store.commit(\"dormitory/currentFloor\", {\r\n        buildingId: data[this.mid],\r\n        type: data[this.mtype]\r\n      });\r\n    },\r\n    nodeCollapse(data, node){\r\n      //如果是一级节点(校区)\r\n      if (node.level === 1){\r\n        node.childNodes.forEach(a => {\r\n          a.expanded = false\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./treeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./treeList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./treeList.vue?vue&type=template&id=d02897d0&\"\nimport script from \"./treeList.vue?vue&type=script&lang=js&\"\nexport * from \"./treeList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('d02897d0')) {\n      api.createRecord('d02897d0', component.options)\n    } else {\n      api.reload('d02897d0', component.options)\n    }\n    module.hot.accept(\"./treeList.vue?vue&type=template&id=d02897d0&\", function () {\n      api.rerender('d02897d0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/treeList.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"floor-container\" },\n    [\n      _c(\"floor-box\", {\n        attrs: {\n          \"floor-list\": _vm.floorList,\n          \"active-room-id\": _vm.activeRoomId\n        },\n        on: {\n          \"update:activeRoomId\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"update:active-room-id\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"click-room\": _vm.clickRoom\n        }\n      }),\n      _c(\"guests-opt-dialog\", {\n        attrs: {\n          visible: _vm.guestsVisible,\n          room: _vm.currentRoom,\n          info: _vm.roomStatusInfo,\n          \"tree-list\": _vm.treeList\n        },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.guestsVisible = $event\n          },\n          \"close-dialog\": _vm.onCloseDialog\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"el-dialog\",\n        {\n          attrs: {\n            visible: _vm.visible,\n            width: \"40%\",\n            \"before-close\": _vm.beforeClose,\n            modal: false,\n            \"append-to-body\": true,\n            \"lock-scroll\": true,\n            \"custom-class\": \"dsf-dormitory-dialog\"\n          },\n          on: {\n            \"update:visible\": function($event) {\n              _vm.visible = $event\n            },\n            close: _vm.guestsClose\n          },\n          scopedSlots: _vm._u([\n            {\n              key: \"title\",\n              fn: function() {\n                return [\n                  _c(\"div\", { staticClass: \"plain-title\" }, [\n                    _c(\"span\", [_vm._v(\"房间：\" + _vm._s(_vm.info.roomName))]),\n                    _c(\"span\", [\n                      _vm._v(\"房间床位：\" + _vm._s(_vm.info.emptyBedNum))\n                    ])\n                  ])\n                ]\n              },\n              proxy: true\n            },\n            {\n              key: \"footer\",\n              fn: function() {\n                return [\n                  _c(\n                    \"div\",\n                    { staticClass: \"dialog-footer\" },\n                    [\n                      _c(\"el-button\", { on: { click: _vm.closeDialog } }, [\n                        _vm._v(\"确 定\")\n                      ])\n                    ],\n                    1\n                  )\n                ]\n              },\n              proxy: true\n            }\n          ])\n        },\n        [\n          _c(\n            \"div\",\n            {\n              directives: [\n                {\n                  name: \"loading\",\n                  rawName: \"v-loading\",\n                  value: _vm.loadingOccupyInfo,\n                  expression: \"loadingOccupyInfo\"\n                }\n              ],\n              staticClass: \"list-box\"\n            },\n            _vm._l(_vm.list, function(item, it) {\n              return _c(\"div\", { key: it, staticClass: \"item\" }, [\n                _c(\"i\", { staticClass: \"ico-point\" }),\n                _c(\"p\", [_vm._v(_vm._s(item.timeStr))]),\n                _c(\n                  \"ul\",\n                  [\n                    _vm._l(item.person, function(one, o) {\n                      return _c(\"li\", { key: one.relId }, [\n                        _c(\"p\", [\n                          _vm._v(\n                            \" \" +\n                              _vm._s(one.typeStr) +\n                              \"：\" +\n                              _vm._s(one.personName) +\n                              \"[ \" +\n                              _vm._s(one.sexText) +\n                              \" ] \"\n                          )\n                        ]),\n                        _c(\"p\", [_vm._v(\" \" + _vm._s(one.phone) + \" \")]),\n                        _c(\n                          \"p\",\n                          [\n                            one.type === 1\n                              ? [\n                                  !_vm.isReserveModule\n                                    ? _c(\n                                        \"span\",\n                                        {\n                                          on: {\n                                            click: function($event) {\n                                              return _vm.renewal(one)\n                                            }\n                                          }\n                                        },\n                                        [_vm._v(\"续房\")]\n                                      )\n                                    : _vm._e(),\n                                  _c(\n                                    \"span\",\n                                    {\n                                      on: {\n                                        click: function($event) {\n                                          return _vm.checkOut(one)\n                                        }\n                                      }\n                                    },\n                                    [_vm._v(\"退房\")]\n                                  ),\n                                  !one.past\n                                    ? _c(\n                                        \"span\",\n                                        {\n                                          on: {\n                                            click: function($event) {\n                                              return _vm.changeRoom(one)\n                                            }\n                                          }\n                                        },\n                                        [_vm._v(\"换房\")]\n                                      )\n                                    : _vm._e()\n                                ]\n                              : _vm._e(),\n                            one.type === 0 && !_vm.isReserveModule\n                              ? [\n                                  _c(\n                                    \"span\",\n                                    {\n                                      on: {\n                                        click: function($event) {\n                                          return _vm.checkIn(one)\n                                        }\n                                      }\n                                    },\n                                    [_vm._v(\"入住\")]\n                                  ),\n                                  _c(\n                                    \"span\",\n                                    {\n                                      on: {\n                                        click: function($event) {\n                                          return _vm.cancelReserve(one)\n                                        }\n                                      }\n                                    },\n                                    [_vm._v(\"取消预定\")]\n                                  )\n                                ]\n                              : _vm._e(),\n                            one.type === 2 && !_vm.isReserveModule\n                              ? [\n                                  _c(\"span\", { on: { click: _vm.reserve } }, [\n                                    _vm._v(\"预定\")\n                                  ]),\n                                  _c(\"span\", { on: { click: _vm.checkIn } }, [\n                                    _vm._v(\"入住\")\n                                  ])\n                                ]\n                              : _vm._e()\n                          ],\n                          2\n                        )\n                      ])\n                    }),\n                    _vm._l(item.release, function(empty, em) {\n                      return _c(\"li\", { key: em }, [\n                        _c(\"p\", [_vm._v(\"未入住：\")]),\n                        _c(\"p\"),\n                        _vm.info.statusValue !== 0 && !_vm.isReserveModule\n                          ? _c(\"p\", [\n                              _c(\n                                \"span\",\n                                {\n                                  on: {\n                                    click: function($event) {\n                                      return _vm.reserve(item)\n                                    }\n                                  }\n                                },\n                                [_vm._v(\"预定\")]\n                              ),\n                              _c(\n                                \"span\",\n                                {\n                                  on: {\n                                    click: function($event) {\n                                      return _vm.checkIn(item)\n                                    }\n                                  }\n                                },\n                                [_vm._v(\"入住\")]\n                              )\n                            ])\n                          : _c(\"p\", [\n                              _c(\"span\", { staticClass: \"warning\" }, [\n                                _vm._v(\"当前房间不可排\")\n                              ])\n                            ])\n                      ])\n                    })\n                  ],\n                  2\n                )\n              ])\n            }),\n            0\n          )\n        ]\n      ),\n      _c(\"action-dialog\", {\n        attrs: { visible: _vm.checkInVisible, title: \"入住\" },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.checkInVisible = $event\n          },\n          save: _vm.checkInSave,\n          \"dialog-close\": function($event) {\n            return _vm.closeFormDialog(\"checkInForm\")\n          }\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"body\",\n            fn: function() {\n              return [\n                _c(\n                  \"el-form\",\n                  {\n                    ref: \"checkInForm\",\n                    attrs: {\n                      model: _vm.checkInForm,\n                      rules: _vm.formRules,\n                      \"label-width\": \"100px\"\n                    }\n                  },\n                  [\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"姓名\", prop: \"personName\" } },\n                      [\n                        _c(\"el-input\", {\n                          model: {\n                            value: _vm.checkInForm.personName,\n                            callback: function($$v) {\n                              _vm.$set(_vm.checkInForm, \"personName\", $$v)\n                            },\n                            expression: \"checkInForm.personName\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"身份证号\", prop: \"idCard\" } },\n                      [\n                        _c(\"el-input\", {\n                          model: {\n                            value: _vm.checkInForm.idCard,\n                            callback: function($$v) {\n                              _vm.$set(_vm.checkInForm, \"idCard\", $$v)\n                            },\n                            expression: \"checkInForm.idCard\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"联系方式\", prop: \"phone\" } },\n                      [\n                        _c(\"el-input\", {\n                          model: {\n                            value: _vm.checkInForm.phone,\n                            callback: function($$v) {\n                              _vm.$set(_vm.checkInForm, \"phone\", $$v)\n                            },\n                            expression: \"checkInForm.phone\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\"el-form-item\", { attrs: { label: \"入住时间\" } }, [\n                      _c(\"div\", { staticClass: \"date-box\" }, [\n                        _c(\"span\", [_vm._v(_vm._s(_vm.checkInForm.sDate))]),\n                        _c(\"span\", { staticClass: \"text-divider\" }, [\n                          _vm._v(\"至\")\n                        ]),\n                        _c(\"span\", [_vm._v(_vm._s(_vm.checkInForm.eDate))])\n                      ])\n                    ])\n                  ],\n                  1\n                )\n              ]\n            },\n            proxy: true\n          }\n        ])\n      }),\n      _c(\"action-dialog\", {\n        attrs: { visible: _vm.reserveVisible, title: \"预定\" },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.reserveVisible = $event\n          },\n          save: _vm.reserveSave,\n          \"dialog-close\": function($event) {\n            return _vm.closeFormDialog(\"reserveForm\")\n          }\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"body\",\n            fn: function() {\n              return [\n                _c(\n                  \"el-form\",\n                  {\n                    ref: \"reserveForm\",\n                    attrs: {\n                      model: _vm.reserveForm,\n                      rules: _vm.formRules,\n                      \"label-width\": \"100px\"\n                    }\n                  },\n                  [\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"姓名\", prop: \"personName\" } },\n                      [\n                        _c(\"el-input\", {\n                          model: {\n                            value: _vm.reserveForm.personName,\n                            callback: function($$v) {\n                              _vm.$set(_vm.reserveForm, \"personName\", $$v)\n                            },\n                            expression: \"reserveForm.personName\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"身份证号\", prop: \"idCard\" } },\n                      [\n                        _c(\"el-input\", {\n                          model: {\n                            value: _vm.reserveForm.idCard,\n                            callback: function($$v) {\n                              _vm.$set(_vm.reserveForm, \"idCard\", $$v)\n                            },\n                            expression: \"reserveForm.idCard\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"联系方式\", prop: \"phone\" } },\n                      [\n                        _c(\"el-input\", {\n                          model: {\n                            value: _vm.reserveForm.phone,\n                            callback: function($$v) {\n                              _vm.$set(_vm.reserveForm, \"phone\", $$v)\n                            },\n                            expression: \"reserveForm.phone\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\"el-form-item\", { attrs: { label: \"预定时间\" } }, [\n                      _c(\"div\", { staticClass: \"date-box\" }, [\n                        _c(\"span\", [_vm._v(_vm._s(_vm.reserveForm.sDate))]),\n                        _c(\"span\", { staticClass: \"text-divider\" }, [\n                          _vm._v(\"至\")\n                        ]),\n                        _c(\"span\", [_vm._v(_vm._s(_vm.reserveForm.eDate))])\n                      ])\n                    ])\n                  ],\n                  1\n                )\n              ]\n            },\n            proxy: true\n          }\n        ])\n      }),\n      _c(\"action-dialog\", {\n        attrs: { visible: _vm.renewalVisible, title: \"续房\" },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.renewalVisible = $event\n          },\n          save: _vm.renewalSave,\n          \"dialog-close\": function($event) {\n            return _vm.closeFormDialog(\"renewalForm\")\n          }\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"body\",\n            fn: function() {\n              return [\n                _c(\n                  \"el-form\",\n                  {\n                    ref: \"renewalForm\",\n                    attrs: {\n                      model: _vm.renewalForm,\n                      rules: _vm.formRules,\n                      \"label-width\": \"120px\"\n                    }\n                  },\n                  [\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"姓名\", prop: \"personName\" } },\n                      [\n                        _c(\"el-input\", {\n                          attrs: { readonly: true },\n                          model: {\n                            value: _vm.renewalForm.personName,\n                            callback: function($$v) {\n                              _vm.$set(_vm.renewalForm, \"personName\", $$v)\n                            },\n                            expression: \"renewalForm.personName\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"身份证号\", prop: \"idCard\" } },\n                      [\n                        _c(\"el-input\", {\n                          attrs: { readonly: true },\n                          model: {\n                            value: _vm.renewalForm.idCard,\n                            callback: function($$v) {\n                              _vm.$set(_vm.renewalForm, \"idCard\", $$v)\n                            },\n                            expression: \"renewalForm.idCard\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      {\n                        staticClass: \"justify\",\n                        attrs: { label: \"原入住时间\" }\n                      },\n                      [\n                        _c(\"time-range\", {\n                          attrs: {\n                            form: _vm.renewalForm,\n                            \"readonly-arr\": [true, true]\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      {\n                        staticClass: \"justify\",\n                        attrs: { label: \"续房入住时间\", prop: \"eDate\" }\n                      },\n                      [\n                        _c(\"time-range\", {\n                          attrs: {\n                            form: _vm.newTimeForm,\n                            \"readonly-arr\": [true, false]\n                          }\n                        })\n                      ],\n                      1\n                    )\n                  ],\n                  1\n                )\n              ]\n            },\n            proxy: true\n          }\n        ])\n      }),\n      _c(\"action-dialog\", {\n        attrs: {\n          visible: _vm.changeRoomVisible,\n          title: \"换房\",\n          width: \"80%\",\n          \"show-close\": false,\n          top: \"8vh\"\n        },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.changeRoomVisible = $event\n          },\n          save: _vm.changeRoomSave\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"topTool\",\n            fn: function() {\n              return [\n                _c(\n                  \"el-form\",\n                  { attrs: { inline: true } },\n                  [\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: _vm.inlineForm[0].label } },\n                      [\n                        _c(\n                          \"el-select\",\n                          {\n                            attrs: { placeholder: \"请选择\" },\n                            on: {\n                              change: function($event) {\n                                return _vm.changeSelect(0)\n                              }\n                            },\n                            model: {\n                              value: _vm.inlineForm[0].value,\n                              callback: function($$v) {\n                                _vm.$set(_vm.inlineForm[0], \"value\", $$v)\n                              },\n                              expression: \"inlineForm[0].value\"\n                            }\n                          },\n                          _vm._l(_vm.treeList, function(item, it) {\n                            return _c(\"el-option\", {\n                              key: item[_vm.mid],\n                              attrs: {\n                                value: item[_vm.mid],\n                                label: item[_vm.mlabel]\n                              }\n                            })\n                          }),\n                          1\n                        )\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: _vm.inlineForm[1].label } },\n                      [\n                        _c(\n                          \"el-select\",\n                          {\n                            attrs: { placeholder: \"请选择\" },\n                            on: {\n                              change: function($event) {\n                                return _vm.changeSelect(1)\n                              }\n                            },\n                            model: {\n                              value: _vm.inlineForm[1].value,\n                              callback: function($$v) {\n                                _vm.$set(_vm.inlineForm[1], \"value\", $$v)\n                              },\n                              expression: \"inlineForm[1].value\"\n                            }\n                          },\n                          _vm._l(_vm.selectList1, function(item, it) {\n                            return _c(\"el-option\", {\n                              key: item[_vm.mid],\n                              attrs: {\n                                value: item[_vm.mid],\n                                label: item[_vm.mlabel]\n                              }\n                            })\n                          }),\n                          1\n                        )\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: _vm.inlineForm[2].label } },\n                      [\n                        _c(\n                          \"el-select\",\n                          {\n                            attrs: { placeholder: \"请选择\" },\n                            on: {\n                              change: function($event) {\n                                return _vm.changeSelect(2)\n                              }\n                            },\n                            model: {\n                              value: _vm.inlineForm[2].value,\n                              callback: function($$v) {\n                                _vm.$set(_vm.inlineForm[2], \"value\", $$v)\n                              },\n                              expression: \"inlineForm[2].value\"\n                            }\n                          },\n                          _vm._l(_vm.selectList2, function(item, it) {\n                            return _c(\"el-option\", {\n                              key: item[_vm.mid],\n                              attrs: {\n                                value: item[_vm.mid],\n                                label: item[_vm.mlabel]\n                              }\n                            })\n                          }),\n                          1\n                        )\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"房间\" } },\n                      [\n                        _c(\"el-input\", {\n                          model: {\n                            value: _vm.queryRoomName,\n                            callback: function($$v) {\n                              _vm.queryRoomName = $$v\n                            },\n                            expression: \"queryRoomName\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      [\n                        _c(\"dsf-button\", { on: { click: _vm.reloadQuery } }, [\n                          _vm._v(\"重 置\")\n                        ]),\n                        _c(\"dsf-button\", {\n                          attrs: { icon: \"sousuo\" },\n                          on: { click: _vm.queryRoomList }\n                        })\n                      ],\n                      1\n                    )\n                  ],\n                  1\n                ),\n                _c(\n                  \"div\",\n                  {\n                    directives: [\n                      {\n                        name: \"show\",\n                        rawName: \"v-show\",\n                        value: false,\n                        expression: \"false\"\n                      }\n                    ],\n                    staticClass: \"time-item\"\n                  },\n                  [\n                    _c(\"label\", [_vm._v(\"时间\")]),\n                    _c(\"time-range\", { attrs: { form: _vm.newTimeForm } })\n                  ],\n                  1\n                )\n              ]\n            },\n            proxy: true\n          },\n          {\n            key: \"floorBox\",\n            fn: function() {\n              return [\n                _c(\"floor-box\", {\n                  attrs: {\n                    \"floor-list\": _vm.floorList,\n                    \"active-room-id\": _vm.activeRoomId\n                  },\n                  on: {\n                    \"update:activeRoomId\": function($event) {\n                      _vm.activeRoomId = $event\n                    },\n                    \"update:active-room-id\": function($event) {\n                      _vm.activeRoomId = $event\n                    }\n                  }\n                })\n              ]\n            },\n            proxy: true\n          }\n        ])\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"el-dialog\",\n    {\n      attrs: {\n        visible: _vm.visible,\n        width: _vm.width,\n        \"before-close\": _vm.closeDialog,\n        \"append-to-body\": true,\n        \"lock-scroll\": true,\n        \"custom-class\": \"dsf-dormitory-dialog action-dialog\",\n        \"show-close\": _vm.showClose,\n        top: _vm.top\n      },\n      on: {\n        \"update:visible\": function($event) {\n          _vm.visible = $event\n        }\n      },\n      scopedSlots: _vm._u(\n        [\n          {\n            key: \"title\",\n            fn: function() {\n              return [\n                _c(\"div\", { staticClass: \"bg-title\" }, [\n                  _c(\"span\", [_vm._v(_vm._s(_vm.title))]),\n                  _c(\"div\", { staticClass: \"top-tool\" }, [_vm._t(\"topTool\")], 2)\n                ])\n              ]\n            },\n            proxy: true\n          },\n          !_vm.noFooter\n            ? {\n                key: \"footer\",\n                fn: function() {\n                  return [\n                    _c(\n                      \"div\",\n                      { staticClass: \"action-footer\" },\n                      [\n                        _c(\"dsf-button\", { on: { click: _vm.closeDialog } }, [\n                          _vm._v(\"关 闭\")\n                        ]),\n                        _c(\n                          \"dsf-button\",\n                          {\n                            attrs: { loading: _vm.btnLoading.save },\n                            on: { click: _vm.save }\n                          },\n                          [_vm._v(\"保 存\")]\n                        )\n                      ],\n                      1\n                    )\n                  ]\n                },\n                proxy: true\n              }\n            : null\n        ],\n        null,\n        true\n      )\n    },\n    [\n      _c(\"div\", { staticClass: \"custom-body\" }, [_vm._t(\"body\")], 2),\n      _vm._t(\"inner\"),\n      _c(\"div\", { staticClass: \"floor-container\" }, [_vm._t(\"floorBox\")], 2)\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog\r\n    :visible.sync=\"visible\"\r\n    :width=\"width\"\r\n    :before-close=\"closeDialog\"\r\n    :append-to-body=\"true\"\r\n    :lock-scroll=\"true\"\r\n    custom-class=\"dsf-dormitory-dialog action-dialog\"\r\n    :show-close=\"showClose\"\r\n    :top=\"top\"\r\n  >\r\n    <template #title>\r\n      <div class=\"bg-title\">\r\n        <span>{{title}}</span>\r\n        <div class=\"top-tool\">\r\n          <slot name=\"topTool\"></slot>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <div class=\"custom-body\">\r\n      <slot name=\"body\"></slot>\r\n    </div>\r\n    <slot name=\"inner\"></slot>\r\n    <div class=\"floor-container\">\r\n      <slot name=\"floorBox\"></slot>\r\n    </div>\r\n    <template v-if=\"!noFooter\" #footer>\r\n      <div class=\"action-footer\">\r\n        <dsf-button @click=\"closeDialog\">关 闭</dsf-button>\r\n        <dsf-button @click=\"save\" :loading=\"btnLoading.save\">保 存</dsf-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"actionDialog\",\r\n  props:{\r\n    title:{\r\n      type: String,\r\n      required: true\r\n    },\r\n    visible: {\r\n      type: Boolean,\r\n      default: false,\r\n      required: true\r\n    },\r\n    width: {\r\n      type: String,\r\n      default: \"40%\"\r\n    },\r\n    showClose:{\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    top:{\r\n      type: String,\r\n      default: \"15vh\"\r\n    },\r\n    noFooter:{\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n  },\r\n  data(){\r\n    return{\r\n      btnLoading: {\r\n        save: false\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    closeDialog(){\r\n      this.$emit(\"dialog-close\");\r\n      this.$emit(\"update:visible\", false);\r\n    },\r\n    save(){\r\n      this.$emit(\"save\", this.btnLoading);\r\n    },\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./actionDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./actionDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./actionDialog.vue?vue&type=template&id=1b09ce0d&\"\nimport script from \"./actionDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./actionDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1b09ce0d')) {\n      api.createRecord('1b09ce0d', component.options)\n    } else {\n      api.reload('1b09ce0d', component.options)\n    }\n    module.hot.accept(\"./actionDialog.vue?vue&type=template&id=1b09ce0d&\", function () {\n      api.rerender('1b09ce0d', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/dialog/actionDialog.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    _vm._l(_vm.floorList, function(floor, fl) {\n      return _c(\"div\", { key: fl, staticClass: \"floor-box\" }, [\n        _c(\"div\", { staticClass: \"floor-title\" }, [\n          _vm.multipleChoose\n            ? _c(\n                \"div\",\n                {\n                  staticClass: \"check-box\",\n                  on: {\n                    click: function($event) {\n                      $event.stopPropagation()\n                      return _vm.checkAll(floor)\n                    }\n                  }\n                },\n                [\n                  _c(\"i\", {\n                    staticClass: \"iconfont\",\n                    class: _vm.pCheckCss(floor)\n                  }),\n                  _c(\"span\", [_vm._v(\"全选\")])\n                ]\n              )\n            : _vm._e(),\n          _c(\"span\", [\n            _vm._v(_vm._s(floor.buildingText) + \" / \" + _vm._s(floor.title))\n          ]),\n          _c(\"span\", [_vm._v(\"（\")]),\n          _c(\"span\", { staticClass: \"it\" }, [\n            _vm._v(\"单间：\" + _vm._s(floor.single))\n          ]),\n          _c(\"span\", { staticClass: \"it\" }, [\n            _vm._v(\"标间：\" + _vm._s(floor.standard))\n          ]),\n          _c(\"span\", { staticClass: \"it\" }, [\n            _vm._v(\"套房：\" + _vm._s(floor.suite))\n          ]),\n          _c(\"span\", { staticClass: \"it\" }, [\n            _vm._v(\"多人间：\" + _vm._s(floor.mul))\n          ]),\n          _c(\"span\", [_vm._v(\"）\")])\n        ]),\n        _c(\n          \"div\",\n          { staticClass: \"room-container\", on: { click: _vm.emptyPlace } },\n          [\n            _vm._l(floor[_vm.mchildren], function(room, ro) {\n              return _c(\n                \"div\",\n                {\n                  directives: [\n                    {\n                      name: \"loading\",\n                      rawName: \"v-loading\",\n                      value: _vm.judgeLoading(room[_vm.mroomId]),\n                      expression: \"judgeLoading(room[mroomId])\"\n                    }\n                  ],\n                  key: ro,\n                  staticClass: \"room\",\n                  class: _vm.roomCss(room),\n                  style: _vm.roomSty(room),\n                  attrs: { \"data-id\": room[_vm.mroomId] },\n                  on: {\n                    click: function($event) {\n                      $event.stopPropagation()\n                      return _vm.clickRoom(room)\n                    }\n                  }\n                },\n                [\n                  _vm.roomCheckbox\n                    ? _c(\n                        \"div\",\n                        {\n                          staticClass: \"check-box\",\n                          on: {\n                            click: function($event) {\n                              $event.stopPropagation()\n                              return _vm.checkRoom(room)\n                            }\n                          }\n                        },\n                        [\n                          _c(\"i\", {\n                            staticClass: \"iconfont\",\n                            class: _vm.checkCss(room)\n                          })\n                        ]\n                      )\n                    : _vm._e(),\n                  _c(\"div\", { staticClass: \"num\", style: _vm.numSty(room) }, [\n                    _vm._v(_vm._s(room[_vm.mroomNum]))\n                  ]),\n                  _c(\"div\", { staticClass: \"inner\" }, [\n                    _c(\"p\", [_vm._v(_vm._s(room.purposeText))]),\n                    _c(\"p\", [\n                      _c(\"i\", {\n                        directives: [\n                          {\n                            name: \"show\",\n                            rawName: \"v-show\",\n                            value: _vm.isAllocatedRoom(room.reserveId),\n                            expression: \"isAllocatedRoom(room.reserveId)\"\n                          }\n                        ],\n                        staticClass: \"iconfont icon-dui1\"\n                      }),\n                      _vm._v(_vm._s(room.roomText))\n                    ]),\n                    !room.sexValue\n                      ? _c(\"p\", [_vm._v(\"不限\")])\n                      : parseInt(room.sexValue) === 1\n                      ? _c(\"p\", [_vm._v(\"女性\")])\n                      : parseInt(room.sexValue) === 0\n                      ? _c(\"p\", [_vm._v(\"男性\")])\n                      : _vm._e()\n                  ])\n                ]\n              )\n            }),\n            _vm._l(_vm.appendOcc, function(item) {\n              return _c(\"div\", { key: fl + \"_\" + item, staticClass: \"occ\" })\n            })\n          ],\n          2\n        )\n      ])\n    }),\n    0\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div v-for=\"(floor, fl) in floorList\" :key=\"fl\" class=\"floor-box\">\r\n      <div class=\"floor-title\">\r\n        <div v-if=\"multipleChoose\" class=\"check-box\" @click.stop=\"checkAll(floor)\">\r\n          <i class=\"iconfont\" :class=\"pCheckCss(floor)\"></i>\r\n          <span>全选</span>\r\n        </div>\r\n        <span>{{floor.buildingText}} / {{floor.title}}</span>\r\n        <span>（</span>\r\n        <span class=\"it\">单间：{{floor.single}}</span>\r\n        <span class=\"it\">标间：{{floor.standard}}</span>\r\n        <span class=\"it\">套房：{{floor.suite}}</span>\r\n        <span class=\"it\">多人间：{{floor.mul}}</span>\r\n        <span>）</span>\r\n      </div>\r\n      <div @click=\"emptyPlace\" class=\"room-container\">\r\n        <div\r\n          v-for=\"(room, ro) in floor[mchildren]\"\r\n          class=\"room\"\r\n          :class=\"roomCss(room)\"\r\n          :style=\"roomSty(room)\"\r\n          :key=\"ro\"\r\n          :data-id=\"room[mroomId]\"\r\n          v-loading=\"judgeLoading(room[mroomId])\"\r\n          @click.stop=\"clickRoom(room)\"\r\n        >\r\n          <div v-if=\"roomCheckbox\" class=\"check-box\" @click.stop=\"checkRoom(room)\">\r\n            <i class=\"iconfont\" :class=\"checkCss(room)\"></i>\r\n          </div>\r\n          <div class=\"num\" :style=\"numSty(room)\">{{room[mroomNum]}}</div>\r\n          <div class=\"inner\">\r\n            <p>{{room.purposeText}}</p>\r\n            <p><i v-show=\"isAllocatedRoom(room.reserveId)\" class=\"iconfont icon-dui1\"></i>{{room.roomText}}</p>\r\n            <p v-if=\"!room.sexValue\">不限</p>\r\n            <p v-else-if=\"parseInt(room.sexValue) === 1\">女性</p>\r\n            <p v-else-if=\"parseInt(room.sexValue) === 0\">男性</p>\r\n          </div>\r\n        </div>\r\n        <div v-for=\"item in appendOcc\" :key=\"fl+'_'+item\" class=\"occ\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {assign} from \"_platform/pc/dormitory/func\";\r\n\r\nexport default {\r\n  inject: ['rightConfigPointer'],\r\n  name: \"floorBox\",\r\n  props: {\r\n    floorList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    chosenRoomId: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    multipleChoose: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    loadingRoomId: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    activeRoomId: {\r\n      type: String,\r\n      default: \"\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      apiRoomStatus: null,\r\n      roomCheckbox: true,\r\n        \r\n      //项目属性\r\n      appendOcc: [],  //添加的占位div数量\r\n    }\r\n  },\r\n  computed: {\r\n    rightConfig() {\r\n      return this.rightConfigPointer()\r\n    },\r\n    stateList() {\r\n      const obj = {};\r\n      for (let i = 0; i < this.rightConfig.roomStateList.length; i++) {\r\n        let state = this.rightConfig.roomStateList[i];\r\n        obj[state.val] = state\r\n      }\r\n      return obj\r\n    },\r\n    mchildren() {\r\n      return this.apiRoomStatus.childrenAlias\r\n    },\r\n    mroomNum() {\r\n      return this.apiRoomStatus.roomNumAlias\r\n    },\r\n    mroomId() {\r\n      return this.apiRoomStatus.roomIdAlias\r\n    },\r\n  },\r\n  watch: {\r\n    floorList(val) {\r\n      this.stateRoomObj(val);\r\n      this.$nextTick(() => {\r\n        this.resize();\r\n      })\r\n    },\r\n    loadingRoomId() {\r\n      const diffArr = _.difference(this.chosenRoomId, this.loadingRoomId);\r\n      this.$emit(\"update:chosenRoomId\", diffArr)\r\n    },\r\n    chosenRoomId(val) {\r\n      this.$store.commit(\"dormitory/chosenRoomId\", val)\r\n    },\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig)\r\n    assign(this, this.rightConfig);\r\n  },\r\n  methods: {\r\n    isAllocatedRoom(reserveId){\r\n      const opt = this.$route.query.opt;\r\n      if (opt !== \"allocation\") return false;\r\n      return reserveId === this.$route.query.reserveId\r\n    },\r\n    judgeLoading(roomId) {\r\n      return this.loadingRoomId.includes(roomId)\r\n    },\r\n    roomCss(room) {\r\n      return {\r\n        chosen: this.chosenRoomId.includes(room[this.mroomId]),\r\n        active: this.activeRoomId === room[this.mroomId]\r\n      }\r\n    },\r\n    pCheckCss(floor) {\r\n      let jud = 0;\r\n      for (let i = 0; i < floor[this.mchildren].length; i++) {\r\n        let room = floor[this.mchildren][i];\r\n        let roomId = room[this.mroomId];\r\n        for (let j = 0; j < this.chosenRoomId.length; j++) {\r\n          let chosenId = this.chosenRoomId[j];\r\n          if (roomId === chosenId) {\r\n            jud += 1;\r\n            break\r\n          }\r\n        }\r\n      }\r\n      floor.isAllCheck = jud === floor[this.mchildren].length;\r\n        \r\n      return floor.isAllCheck ? \"icon-kongjianyixuan\" : \"icon-kongjianweixuan\"\r\n    },\r\n    checkCss(room) {\r\n      return this.chosenRoomId.includes(room[this.mroomId]) ? \"icon-kongjianyixuan\" : \"icon-kongjianweixuan\"\r\n    },\r\n    roomSty(room) {\r\n      let border;\r\n      let color = this.stateList[room.statusValue]?.color || \"#000000\";\r\n      let showBorder = this.chosenRoomId.includes(room[this.mroomId]) || this.activeRoomId === room[this.mroomId];\r\n      border = showBorder ? \"4px solid \" + color : \"none\"\r\n        \r\n      return {\r\n        background: this.stateList[room.statusValue]?.bgColor || \"#555555\",\r\n        color: this.stateList[room.statusValue]?.color || \"#000000\",\r\n        border: border\r\n      }\r\n        \r\n    },\r\n    numSty(room) {\r\n      return {\r\n        background: this.stateList[room.statusValue]?.color || \"#000000\",\r\n      }\r\n    },\r\n    checkAll(floor) {\r\n      const chosenId = this.chosenRoomId.slice(0);\r\n      const obj = {};\r\n      let result = [];\r\n        \r\n      if (floor.isAllCheck) {\r\n        chosenId.forEach(a => {\r\n          obj[a] = a\r\n        })\r\n        floor[this.mchildren].forEach(a => {\r\n          if (obj[a[this.mroomId]]){\r\n            obj[a[this.mroomId]] = false\r\n          }\r\n        })\r\n        for (let i in obj){\r\n          if (obj[i]) {\r\n            result.push(i)\r\n          }\r\n        }\r\n      } else {\r\n        const arr = floor[this.mchildren].map(a => {\r\n          return a[this.mroomId]\r\n        })\r\n        chosenId.concat(arr).forEach(a => {\r\n          obj[a] = a\r\n        })\r\n        result = Object.getOwnPropertyNames(obj)\r\n      }\r\n      this.$emit(\"update:chosenRoomId\", result)\r\n    },\r\n    clickRoom(room) {\r\n      if (this.loadingRoomId.includes(room[this.mroomId])) return;    //处于loading状态的房间不予点击\r\n      this.$emit(\"update:activeRoomId\", room[this.mroomId])\r\n      this.$emit(\"click-room\", room)\r\n    },\r\n    resize() {\r\n      const allWid = $(\".room-container\").width();\r\n      const itemWid = $(\".room\").width() + 30;  //30是 margin-left\r\n      let rowNum = _.floor(allWid / itemWid);\r\n      if (rowNum === this.appendOcc.length) return;   //如果添加的占位div数量不需要改变，则返回\r\n      const temp = [];\r\n      for (let i = 0; i < rowNum; i++) {\r\n        temp.push(i);\r\n      }\r\n      this.appendOcc = temp;\r\n    },\r\n    emptyPlace() {\r\n      this.$emit(\"update:activeRoomId\", \"\")\r\n    },\r\n    stateRoomObj(val) {\r\n      let obj = {};\r\n      let mid = this.mroomId;\r\n      let mchildren = this.mchildren;\r\n      for (let i = 0; i < val.length; i++) {\r\n        let floor = val[i];\r\n        for (let j = 0; j < floor[mchildren].length; j++) {\r\n          let room = floor[mchildren][j];\r\n          obj[room[mid]] = room\r\n        }\r\n      }\r\n      this.$store.commit(\"dormitory/roomObj\", obj)\r\n    },\r\n    checkRoom(room) {\r\n      if (this.loadingRoomId.includes(room[this.mroomId])) return;    //处于loading状态的房间不予点击\r\n      if (this.multipleChoose) {\r\n        let index = this.chosenRoomId.findIndex(a => a === room[this.mroomId]);\r\n        if (index === -1) {\r\n          this.chosenRoomId.push(room[this.mroomId])\r\n        } else {\r\n          this.chosenRoomId.splice(index, 1)\r\n        }\r\n      } else {\r\n        this.$emit(\"update:chosenRoomId\", [room[this.mroomId]])\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      window.addEventListener('resize', _.debounce(() => {\r\n        this.resize();\r\n      }, 100))\r\n    })\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./floorBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./floorBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./floorBox.vue?vue&type=template&id=5a21d75b&\"\nimport script from \"./floorBox.vue?vue&type=script&lang=js&\"\nexport * from \"./floorBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5a21d75b')) {\n      api.createRecord('5a21d75b', component.options)\n    } else {\n      api.reload('5a21d75b', component.options)\n    }\n    module.hot.accept(\"./floorBox.vue?vue&type=template&id=5a21d75b&\", function () {\n      api.rerender('5a21d75b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/floorBox.vue\"\nexport default component.exports","<template>\r\n  <div>\r\n    <el-dialog\r\n      :visible.sync=\"visible\"\r\n      width=\"40%\"\r\n      :before-close=\"beforeClose\"\r\n      :modal=\"false\"\r\n      :append-to-body=\"true\"\r\n      :lock-scroll=\"true\"\r\n      custom-class=\"dsf-dormitory-dialog\"\r\n      @close=\"guestsClose\"\r\n    >\r\n      <template #title>\r\n        <div class=\"plain-title\">\r\n          <span>房间：{{info.roomName}}</span>\r\n          <span>房间床位：{{info.emptyBedNum}}</span>\r\n        </div>\r\n      </template>\r\n      <div v-loading=\"loadingOccupyInfo\" class=\"list-box\">\r\n        <div v-for=\"(item, it) in list\" :key=\"it\" class=\"item\">\r\n          <i class=\"ico-point\"></i>\r\n          <p>{{item.timeStr}}</p>\r\n          <ul>\r\n            <li v-for=\"(one, o) in item.person\" :key=\"one.relId\">\r\n              <p>\r\n                {{one.typeStr}}：{{one.personName}}[ {{one.sexText}} ]\r\n              </p>\r\n              <p>\r\n                {{one.phone}}\r\n              </p>\r\n              <p>\r\n                <template v-if=\"one.type === 1\">\r\n                  <span v-if=\"!isReserveModule\" @click=\"renewal(one)\">续房</span>\r\n                  <span @click=\"checkOut(one)\">退房</span>\r\n                  <span v-if=\"!one.past\" @click=\"changeRoom(one)\">换房</span>\r\n                </template>\r\n                <template v-if=\"one.type === 0 && !isReserveModule\">\r\n                  <span @click=\"checkIn(one)\">入住</span>\r\n                  <span @click=\"cancelReserve(one)\">取消预定</span>\r\n                </template>\r\n                <template v-if=\"one.type === 2 && !isReserveModule\">\r\n                  <span @click=\"reserve\">预定</span>\r\n                  <span @click=\"checkIn\">入住</span>\r\n                </template>\r\n              </p>\r\n            </li>\r\n            <li v-for=\"(empty, em) in item.release\" :key=\"em\">\r\n              <p>未入住：</p>\r\n              <p></p>\r\n              <p v-if=\"info.statusValue !== 0 && !isReserveModule\">\r\n                <span @click=\"reserve(item)\">预定</span>\r\n                <span @click=\"checkIn(item)\">入住</span>\r\n              </p>\r\n              <p v-else>\r\n                <span class=\"warning\">当前房间不可排</span>\r\n              </p>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"closeDialog\">确 定</el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n    <!--入住-->\r\n    <action-dialog\r\n      :visible.sync=\"checkInVisible\"\r\n      title=\"入住\"\r\n      @save=\"checkInSave\"\r\n      @dialog-close=\"closeFormDialog('checkInForm')\"\r\n    >\r\n      <template #body>\r\n        <el-form ref=\"checkInForm\" :model=\"checkInForm\" :rules=\"formRules\" label-width=\"100px\">\r\n          <el-form-item label=\"姓名\" prop=\"personName\">\r\n            <el-input v-model=\"checkInForm.personName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"身份证号\" prop=\"idCard\">\r\n            <el-input v-model=\"checkInForm.idCard\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"联系方式\" prop=\"phone\">\r\n            <el-input v-model=\"checkInForm.phone\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"入住时间\">\r\n            <div class=\"date-box\">\r\n              <span>{{checkInForm.sDate}}</span>\r\n              <span class=\"text-divider\">至</span>\r\n              <span>{{checkInForm.eDate}}</span>\r\n            </div>\r\n          </el-form-item>\r\n        </el-form>\r\n      </template>\r\n    </action-dialog>\r\n    \r\n    <!--预定-->\r\n    <action-dialog\r\n      :visible.sync=\"reserveVisible\"\r\n      title=\"预定\"\r\n      @save=\"reserveSave\"\r\n      @dialog-close=\"closeFormDialog('reserveForm')\"\r\n    >\r\n      <template #body>\r\n        <el-form ref=\"reserveForm\" :model=\"reserveForm\" :rules=\"formRules\" label-width=\"100px\">\r\n          <el-form-item label=\"姓名\" prop=\"personName\">\r\n            <el-input v-model=\"reserveForm.personName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"身份证号\" prop=\"idCard\">\r\n            <el-input v-model=\"reserveForm.idCard\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"联系方式\" prop=\"phone\">\r\n            <el-input v-model=\"reserveForm.phone\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"预定时间\">\r\n            <div class=\"date-box\">\r\n              <span>{{reserveForm.sDate}}</span>\r\n              <span class=\"text-divider\">至</span>\r\n              <span>{{reserveForm.eDate}}</span>\r\n            </div>\r\n          </el-form-item>\r\n        </el-form>\r\n      </template>\r\n    </action-dialog>\r\n    \r\n    <!--续房-->\r\n    <action-dialog\r\n      :visible.sync=\"renewalVisible\"\r\n      title=\"续房\"\r\n      @save=\"renewalSave\"\r\n      @dialog-close=\"closeFormDialog('renewalForm')\"\r\n    >\r\n      <template #body>\r\n        <el-form ref=\"renewalForm\" :model=\"renewalForm\" :rules=\"formRules\" label-width=\"120px\">\r\n          <el-form-item label=\"姓名\" prop=\"personName\">\r\n            <el-input v-model=\"renewalForm.personName\" :readonly=\"true\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"身份证号\" prop=\"idCard\">\r\n            <el-input v-model=\"renewalForm.idCard\" :readonly=\"true\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item class=\"justify\" label=\"原入住时间\">\r\n            <time-range :form=\"renewalForm\" :readonly-arr=\"[true, true]\"></time-range>\r\n          </el-form-item>\r\n          <el-form-item class=\"justify\" label=\"续房入住时间\" prop=\"eDate\">\r\n            <time-range :form=\"newTimeForm\" :readonly-arr=\"[true, false]\"></time-range>\r\n          </el-form-item>\r\n        </el-form>\r\n      </template>\r\n    </action-dialog>\r\n    \r\n    <!--换房-->\r\n    <action-dialog\r\n      :visible.sync=\"changeRoomVisible\"\r\n      title=\"换房\"\r\n      width=\"80%\"\r\n      :show-close=\"false\"\r\n      top=\"8vh\"\r\n      @save=\"changeRoomSave\"\r\n    >\r\n      <template #topTool>\r\n        <el-form :inline=\"true\">\r\n          <el-form-item :label=\"inlineForm[0].label\">\r\n            <el-select v-model=\"inlineForm[0].value\" @change=\"changeSelect(0)\" placeholder=\"请选择\">\r\n              <el-option\r\n                v-for=\"(item, it) in treeList\"\r\n                :key=\"item[mid]\"\r\n                :value=\"item[mid]\"\r\n                :label=\"item[mlabel]\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item :label=\"inlineForm[1].label\">\r\n            <el-select v-model=\"inlineForm[1].value\" @change=\"changeSelect(1)\" placeholder=\"请选择\">\r\n              <el-option\r\n                v-for=\"(item, it) in selectList1\"\r\n                :key=\"item[mid]\"\r\n                :value=\"item[mid]\"\r\n                :label=\"item[mlabel]\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item :label=\"inlineForm[2].label\">\r\n            <el-select v-model=\"inlineForm[2].value\" @change=\"changeSelect(2)\" placeholder=\"请选择\">\r\n              <el-option\r\n                v-for=\"(item, it) in selectList2\"\r\n                :key=\"item[mid]\"\r\n                :value=\"item[mid]\"\r\n                :label=\"item[mlabel]\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"房间\">\r\n            <el-input v-model=\"queryRoomName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <dsf-button @click=\"reloadQuery\">重 置</dsf-button>\r\n            <dsf-button icon=\"sousuo\" @click=\"queryRoomList\"></dsf-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div v-show=\"false\" class=\"time-item\">\r\n          <label>时间</label>\r\n          <time-range :form=\"newTimeForm\"></time-range>\r\n        </div>\r\n      </template>\r\n      <template #floorBox>\r\n        <floor-box\r\n          :floor-list=\"floorList\"\r\n          :active-room-id.sync=\"activeRoomId\"\r\n        ></floor-box>\r\n      </template>\r\n    </action-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters} from 'vuex'\r\nimport actionDialog from \"_platform/pc/dormitory/dialog/actionDialog\";\r\nimport floorBox from \"_platform/pc/dormitory/room/floorBox\";\r\nimport timeRange from \"_platform/pc/dormitory/dialog/timeRange\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {assign} from \"_platform/pc/dormitory/func\";\r\n  \r\nexport default {\r\n  name: \"guestsOptDialog\",\r\n  inject: ['leftConfigPointer', 'rightConfigPointer'],\r\n  props: {\r\n    info: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          roomName: \"\",\r\n          emptyBedNum: \"\",\r\n          roomId: \"\",\r\n          sDate: \"\",\r\n          eDate: \"\",\r\n          statusValue: null\r\n        }\r\n      }\r\n    },\r\n    visible: {\r\n      type: Boolean,\r\n      default: false,\r\n      required: true\r\n    },\r\n    room: {\r\n      type: Object,\r\n    },\r\n    treeList: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    actionDialog,\r\n    floorBox,\r\n    timeRange\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      apiRoomStatus: null,\r\n      apiRoomOccupyInfo: null,\r\n      apiCheckIn: null,\r\n      apiCheckOut: null,\r\n      apiRenewal: null,\r\n      apiReserve: null,\r\n      apiCancelReserve: null,\r\n      apiChangeRoom: null,\r\n        \r\n      //项目属性\r\n      checkInVisible: false,\r\n      checkInForm: {},\r\n      reserveVisible: false,\r\n      reserveForm: {},\r\n      renewalVisible: false,\r\n      renewalForm: {},\r\n      //表单验证\r\n      formRules: {\r\n        personName: [\r\n          {required: true, message: \"请输入姓名\"}\r\n        ],\r\n        idCard: [\r\n          {\r\n            required: true,\r\n            validator: (rule, value, callback) => {\r\n              if (!value) {\r\n                return callback(new Error('请输入身份证'));\r\n              }\r\n              if (!dsf.validate('isIDCard', value)) {\r\n                return callback(new Error('身份证号格式不正确'));\r\n              }\r\n              callback();\r\n            },\r\n            trigger: ['blur']\r\n          }\r\n        ],\r\n        phone: [\r\n          {\r\n            required: true,\r\n            validator: (rule, value, callback) => {\r\n              if (!value) {\r\n                return callback(new Error('请输入手机号码'));\r\n              }\r\n              if (!dsf.validate('isMobile', value)) {\r\n                return callback(new Error('手机号码格式不正确'));\r\n              }\r\n              callback()\r\n            },\r\n            trigger: ['blur']\r\n          },\r\n          {}\r\n        ]\r\n      },\r\n        \r\n      newTimeForm: {},\r\n        \r\n      changeRoomVisible: false,\r\n      queryInfo: {},\r\n        \r\n      list: [],\r\n      isDataChanged: false,   //数据是否发生了修改\r\n      selectList1: [],\r\n      selectList2: [],\r\n      inlineForm: [],\r\n      originInlineForm: [],   //最初的\r\n      queryRoomName: \"\",    //查询的房间名\r\n      currentSelectFloor: null,    //当前选中的楼层\r\n      floorList: [],\r\n      activeRoomId: \"\",   //换房到哪一个房间\r\n      loadingOccupyInfo: true,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('dormitory', [\r\n      'roomStateDict'\r\n    ]),\r\n    leftConfig() {\r\n      return this.leftConfigPointer()\r\n    },\r\n    rightConfig() {\r\n      return this.rightConfigPointer()\r\n    },\r\n    mid() {\r\n      return this.leftConfig.leftProps.id\r\n    },\r\n    mlabel() {\r\n      return this.leftConfig.leftProps.label\r\n    },\r\n    mtype() {\r\n      return this.leftConfig.leftProps.type\r\n    },\r\n    mroomId() {\r\n      return this.apiRoomStatus.roomIdAlias\r\n    },\r\n    // 预分配模式下，若room存在reserveId，则需要隐藏预定和入住、续房\r\n    isReserveModule() {\r\n      if (dsf.config.setting_sgcp_reserve == 1) {\r\n        return this.room.reserveId;\r\n      }\r\n      return false;\r\n    }\r\n  },\r\n  watch: {\r\n    \"visible\"(val) {\r\n      if (val) this.queryRoomOccupyInfo()\r\n    },\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig);\r\n    this.inlineForm = this.leftConfig.inlineForm;\r\n    this.originInlineForm = _.cloneDeep(this.leftConfig.inlineForm);\r\n  },\r\n  methods: {\r\n    changeSelect(num) {\r\n      const self = this;\r\n      let a = num;\r\n      //清空子项已选中的信息\r\n      while (self[\"selectList\" + (a + 1)]) {\r\n        self[\"selectList\" + (a + 1)] = []\r\n        self.inlineForm[a + 1].value = \"\";\r\n        a++\r\n      }\r\n        \r\n      //获取当前的选中项\r\n      const s = {\r\n        id: self.inlineForm[num].value,\r\n        callback(result) {\r\n          self.currentSelectFloor = result\r\n          self.queryRoomList()\r\n        }\r\n      }\r\n      eventBus.emit(eventBusEvent.treeCurrent, s);\r\n        \r\n      //获取当前选中项的子级\r\n      const q = {\r\n        id: self.inlineForm[num].value,\r\n        callback(result) {\r\n          self[\"selectList\" + (num + 1)] = result\r\n        }\r\n      }\r\n      eventBus.emit(eventBusEvent.treeNextLevel, q);\r\n    },\r\n    closeDialog() {\r\n      this.$emit(\"update:visible\", false);\r\n    },\r\n    beforeClose() {\r\n      this.closeDialog();\r\n      this.room.chosen = false;\r\n    },\r\n    // 续房\r\n    renewal(one) {\r\n      const time = new Date(one.edate).getTime() + 1000;\r\n      const date = new Date(time);\r\n      this.renewalForm = {\r\n        personName: one.personName,\r\n        phone: one.phone,\r\n        idCard: one.idCard,\r\n        occupyId: one.occupyId,\r\n        sDate: one.sdate,\r\n        eDate: one.edate,\r\n      }\r\n      this.newTimeForm = {\r\n        sDate: date,\r\n        eDate: \"\",\r\n      }\r\n      this.renewalVisible = true;\r\n    },\r\n    renewalSave(btnLoading) {\r\n      this.$refs.renewalForm.validate().then(() => {\r\n        if (!this.newTimeForm.eDate) {\r\n          dsf.layer.message(\"请选择续房入住结束时间\", false);\r\n          return\r\n        }\r\n        btnLoading.save = true\r\n        const q = {\r\n          occupyId: this.renewalForm.occupyId,\r\n          lastDate: this.renewalForm.eDate,\r\n          curDate: this.newTimeForm.eDate,\r\n          roomId: this.info.roomId\r\n        };\r\n        this.$http.post(this.apiRenewal.url, JSON.stringify(q), {\r\n          headers: {\r\n            \"Content-Type\": \"application/json; charset=utf-8\"\r\n          }\r\n        })\r\n          .done(res => {\r\n            if (!res.success) {\r\n              dsf.layer.message(res.message, false);\r\n              return\r\n            }\r\n              \r\n            this.isDataChanged = true;\r\n            this.renewalVisible = false;\r\n            dsf.layer.message(\"续房成功\");\r\n            this.queryRoomOccupyInfo();\r\n          })\r\n          .error(err => {\r\n            dsf.layer.message(\"续房失败\", false)\r\n          })\r\n          .always(() => {\r\n            setTimeout(() => {\r\n              btnLoading.save = false\r\n            }, 700)\r\n          })\r\n      }).catch(err => {\r\n        //表单验证不通过\r\n      })\r\n    },\r\n    // 入住\r\n    checkIn(one) {\r\n      if (isPastDue(one, 'edate')) {\r\n        dsf.layer.message(\"入住时间不能小于当前时间\", false)\r\n        return\r\n      }\r\n        \r\n      this.checkInForm = {\r\n        personName: one?.personName,\r\n        idCard: one?.idCard,\r\n        phone: one?.phone,\r\n        sDate: one?.sdate?.replace(/:\\d\\d$/, \"\"),\r\n        eDate: one?.edate?.replace(/:\\d\\d$/, \"\"),\r\n        reserveId: one?.relId,\r\n        roomId: this.info.roomId\r\n      }\r\n      this.checkInVisible = true;\r\n    },\r\n    checkInSave(btnLoading) {\r\n      this.$refs.checkInForm.validate().then(() => {\r\n        btnLoading.save = true\r\n        this.$http.post(this.apiCheckIn.url, JSON.stringify(this.checkInForm), {\r\n          headers: {\r\n            \"Content-Type\": \"application/json; charset=utf-8\"\r\n          }\r\n        })\r\n          .done(res => {\r\n            if (!res.success) {\r\n              dsf.layer.message(res.message, false);\r\n              return\r\n            }\r\n              \r\n            this.isDataChanged = true;\r\n            this.checkInVisible = false;\r\n            dsf.layer.message(\"入住成功\");\r\n            this.queryRoomOccupyInfo();\r\n          })\r\n          .error(err => {\r\n            dsf.layer.message(\"发生未知错误，入住失败\", false);\r\n          })\r\n          .always(() => {\r\n            setTimeout(()=>{\r\n              btnLoading.save = false\r\n            }, 700)\r\n          })\r\n      }).catch(err => {\r\n        //表单验证不通过\r\n      })\r\n    },\r\n    // 退房\r\n    checkOut(one) {\r\n      dsf.layer.confirm({\r\n        message: \"您确定要退房吗？\",\r\n        type: \"warning\",\r\n        customClass: \"el-message-box-center\"\r\n      })\r\n        .then(() => {\r\n          const q = {\r\n            roomId: this.info.roomId,\r\n            occupyId: one.relId\r\n          }\r\n          this.$http.post(this.apiCheckOut.url, JSON.stringify(q), {\r\n            headers: {\r\n              \"Content-Type\": \"application/json; charset=utf-8\"\r\n            }\r\n          })\r\n            .done(res => {\r\n              if (!res.success) {\r\n                dsf.layer.message(res.message, false);\r\n                return\r\n              }\r\n              this.isDataChanged = true;\r\n              dsf.layer.message(\"退房成功\");\r\n              this.queryRoomOccupyInfo();\r\n            })\r\n            .error(err => {\r\n              dsf.layer.message(\"退房失败\", false)\r\n            })\r\n        })\r\n        .catch(err => {\r\n          //取消退房\r\n        })\r\n        \r\n    },\r\n    // 预定\r\n    reserve(one) {\r\n      if (isPastDue(one, 'edate')) {\r\n        dsf.layer.message(\"预定时间不能小于当前时间\", false);\r\n        return\r\n      }\r\n      this.reserveForm = {\r\n        personName: \"\",\r\n        idCard: \"\",\r\n        phone: \"\",\r\n        sexValue: one.sexValue,\r\n        sexText: one.sexText,\r\n        sDate: one?.sdate?.replace(/:\\d\\d$/, \"\"),\r\n        eDate: one?.edate?.replace(/:\\d\\d$/, \"\"),\r\n        reserveId: one?.relId,\r\n        roomId: this.info.roomId\r\n      }\r\n      this.reserveVisible = true;\r\n    },\r\n    reserveSave(btnLoading) {\r\n      this.$refs.reserveForm.validate().then(() => {\r\n        btnLoading.save = true\r\n        this.$http.post(this.apiReserve.url, JSON.stringify(this.reserveForm), {\r\n          headers: {\r\n            \"Content-Type\": \"application/json; charset=utf-8\"\r\n          }\r\n        })\r\n          .done(res => {\r\n            if (!res.success) {\r\n              dsf.layer.message(res.message, false);\r\n              return\r\n            }\r\n              \r\n            this.isDataChanged = true;\r\n            this.reserveVisible = false;\r\n            dsf.layer.message(\"预约成功\");\r\n            this.queryRoomOccupyInfo();\r\n          })\r\n          .error(err => {\r\n            dsf.layer.message(\"发生未知错误，预约失败\", false);\r\n          })\r\n          .always(() => {\r\n            setTimeout(() => {\r\n              btnLoading.save = false\r\n            }, 700)\r\n          })\r\n      }).catch(err => {\r\n        //表单验证不通过\r\n      })\r\n    },\r\n    // todo 取消预定\r\n    cancelReserve(one) {\r\n      if (isPastDue(one, 'sdate')) {\r\n        dsf.layer.message(\"当前时间已超过可取消预定最晚时间\", false);\r\n        return\r\n      }\r\n      dsf.layer.message(\"该功能尚未完成\", false);\r\n      // let loading = dsf.layer.loading();\r\n      // this.$http.post(this.apiCancelReserve.url, JSON.stringify({\r\n      //\r\n      // }), {\r\n      //   headers: {\r\n      //     \"Content-Type\": \"application/json; charset=utf-8\"\r\n      //   }\r\n      // })\r\n      //   .done(({success, message}) => {\r\n      //     if (!success) {\r\n      //       dsf.layer.message(message, false);\r\n      //     }\r\n      //   })\r\n      //   .error(err => {\r\n      //     dsf.layer.message(\"发生未知错误，预约失败\", false);\r\n      //   })\r\n      //   .always(() => {\r\n      //     dsf.layer.closeLoading(loading);\r\n      //   })\r\n    },\r\n    reloadQuery() {\r\n      this.inlineForm = _.cloneDeep(this.originInlineForm);\r\n      this.selectList1 = [];\r\n      this.selectList2 = [];\r\n      this.queryRoomName = \"\"\r\n  \r\n      //校区默认选择第一项，然后查询\r\n      this.inlineForm[0].value = this.treeList[0][this.mid]\r\n      this.changeSelect(0)\r\n    },\r\n    // 换房\r\n    changeRoom(one) {\r\n      const currentTime = new Date().Format(\"yyyy-MM-dd hh:mm:ss\");\r\n      this.newTimeForm = {\r\n        sDate: currentTime,\r\n        eDate: one.edate,\r\n        occupyId: one.occupyId\r\n      }\r\n      this.floorList = [];\r\n      this.activeRoomId = \"\";\r\n      this.changeRoomVisible = true;\r\n        \r\n      //校区默认选择第一项，然后查询\r\n      this.inlineForm[0].value = this.treeList[0][this.mid]\r\n      this.changeSelect(0)\r\n    },\r\n    queryRoomOccupyInfo() {\r\n      this.loadingOccupyInfo = true;\r\n      const q = {\r\n        roomId: this.info.roomId,\r\n        sDate: this.info.sDate,\r\n        eDate: this.info.eDate\r\n      }\r\n      this.$http.get(this.apiRoomOccupyInfo.url, q)\r\n        .done(res => {\r\n          let data = res.data;\r\n          if (_.isFunction(this.apiRoomOccupyInfo.callback)) {\r\n            data = this.apiRoomOccupyInfo.callback(data);\r\n          }\r\n          this.list = data;\r\n        })\r\n        .always(() => {\r\n          this.loadingOccupyInfo = false\r\n        })\r\n    },\r\n    guestsClose() {\r\n      this.$emit(\"close-dialog\", this.isDataChanged);\r\n    },\r\n    queryRoomList() {\r\n      let q = {\r\n        buildingId: this.currentSelectFloor[this.mid],\r\n        type: this.currentSelectFloor[this.mtype],\r\n        sDate: this.newTimeForm.sDate,\r\n        eDate: this.newTimeForm.eDate,\r\n        name: this.queryRoomName\r\n      }\r\n        \r\n      this.$http.get(this.apiRoomStatus.url, q).done(res => {\r\n        this.activeRoomId = \"\";\r\n          \r\n        if (!res.success) {\r\n          this.floorList = []\r\n          return\r\n        }\r\n          \r\n        //筛选出可以换房的房间（正常房/未满房）\r\n        this.floorList = res.data.map(floor => {\r\n          floor.roomDtos = floor.roomDtos.filter(room =>\r\n            room.statusValue === this.roomStateDict.normal || room.statusValue === this.roomStateDict.some\r\n          )\r\n          return floor\r\n        })\r\n      })\r\n    },\r\n    changeRoomSave(btnLoading) {\r\n      if (!this.activeRoomId) {\r\n        dsf.layer.message(\"请先选择要换房的房间\", false);\r\n        return\r\n      }\r\n      btnLoading.save = true\r\n      const q = {\r\n        occupyId: this.newTimeForm.occupyId,\r\n        roomId: this.activeRoomId\r\n      }\r\n      this.$http.post(this.apiChangeRoom.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      })\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return\r\n          }\r\n            \r\n          this.isDataChanged = true;\r\n          this.changeRoomVisible = false;\r\n          dsf.layer.message(\"换房成功\");\r\n          this.queryRoomOccupyInfo();\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"换房失败\", false);\r\n        })\r\n        .always(() => {\r\n          setTimeout(()=>{\r\n            btnLoading.save = false\r\n          }, 700)\r\n        })\r\n    },\r\n    closeFormDialog(ref) {\r\n      this.$refs[ref].clearValidate()\r\n    },\r\n  },\r\n  mounted() {\r\n  }\r\n}\r\n\r\n// 判断当前时间是否大于该字段时间\r\nfunction isPastDue(one, key = 'edate') {\r\n  if (!one) return false;\r\n  const now = new Date().Format(\"yyyy-MM-dd hh:mm:00\");\r\n  const edate = one[key].replace(/:\\d\\d$/g, \"\") + \":00\";\r\n\r\n  const now_t = new Date(now).getTime();\r\n  const edate_t = new Date(edate).getTime();\r\n  return now_t > edate_t\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./guestsOptDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./guestsOptDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./guestsOptDialog.vue?vue&type=template&id=e0a63b3e&\"\nimport script from \"./guestsOptDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./guestsOptDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('e0a63b3e')) {\n      api.createRecord('e0a63b3e', component.options)\n    } else {\n      api.reload('e0a63b3e', component.options)\n    }\n    module.hot.accept(\"./guestsOptDialog.vue?vue&type=template&id=e0a63b3e&\", function () {\n      api.rerender('e0a63b3e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/dialog/guestsOptDialog.vue\"\nexport default component.exports","<template>\r\n  <div class=\"floor-container\">\r\n    <floor-box\r\n      :floor-list=\"floorList\"\r\n      :active-room-id.sync=\"activeRoomId\"\r\n      @click-room=\"clickRoom\"\r\n    ></floor-box>\r\n    <guests-opt-dialog\r\n      :visible.sync=\"guestsVisible\"\r\n      :room=\"currentRoom\"\r\n      :info=\"roomStatusInfo\"\r\n      :tree-list=\"treeList\"\r\n      @close-dialog=\"onCloseDialog\"\r\n    ></guests-opt-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport guestsOptDialog from \"_platform/pc/dormitory/dialog/guestsOptDialog\";\r\nimport floorBox from \"_platform/pc/dormitory/room/floorBox\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {customAssign, filterOriginFloor, assign} from \"_platform/pc/dormitory/func\";\r\n\r\nexport default {\r\n  name: \"roomBox\",\r\n  inject: ['rightConfigPointer'],\r\n  props: {\r\n    queryTime: {\r\n      type: Object,\r\n      default(){\r\n        return {\r\n          sDate: \"\",\r\n          eDate: \"\"\r\n        }\r\n      }\r\n    },\r\n    treeList:{\r\n      type: Array,\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      apiRoomStatus: null,\r\n      //项目属性\r\n      originFloorList: [],\r\n\r\n      guestsVisible: false,\r\n      currentRoom: null,\r\n      roomStatusInfo: {},\r\n      activeRoomId: \"\",   //激活的roomId\r\n    }\r\n  },\r\n  computed: {\r\n    rightConfig(){\r\n      return this.rightConfigPointer()\r\n    },\r\n    mchildren() {\r\n      return this.apiRoomStatus.childrenAlias\r\n    },\r\n    mroomNum() {\r\n      return this.apiRoomStatus.roomNumAlias\r\n    },\r\n    mroomId() {\r\n      return this.apiRoomStatus.roomIdAlias\r\n    },\r\n    floorList() {\r\n      return filterOriginFloor(this.originFloorList, this.roomStateList)\r\n    },\r\n    ...mapState('dormitory', [\r\n      \"currentFloor\",\r\n      \"roomStateList\"\r\n    ])\r\n  },\r\n  components: {\r\n    guestsOptDialog,\r\n    floorBox\r\n  },\r\n  watch: {\r\n    currentFloor() {\r\n      this.queryRoomList()\r\n    },\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig, ['roomStateList']);\r\n  },\r\n  mounted() {\r\n    eventBus.on(eventBusEvent.queryRoomList, () => {\r\n      this.queryRoomList()\r\n    })\r\n  },\r\n    \r\n  methods: {\r\n    clickRoom(item) {\r\n      this.currentRoom = item;\r\n      this.popGuests()\r\n    },\r\n    popGuests() {\r\n      this.roomStatusInfo = {\r\n        roomId: this.currentRoom[this.mroomId],\r\n        roomName: this.currentRoom[this.mroomNum],\r\n        emptyBedNum: this.currentRoom.beds,\r\n        statusValue: this.currentRoom.statusValue,    //房间状态\r\n        ...this.queryTime\r\n      }\r\n      this.guestsVisible = true;\r\n    },\r\n    queryRoomList() {\r\n      let q = {\r\n        ...this.currentFloor,\r\n      };\r\n  \r\n      if (_.isFunction(this.apiRoomStatus.query)){\r\n        let add = this.apiRoomStatus.query();\r\n        q = customAssign(q, add);\r\n      }\r\n      q = Object.assign({}, q, this.queryTime);\r\n        \r\n      this.$http.get(this.apiRoomStatus.url, q).done(res => {\r\n        this.originFloorList = res.success? res.data: [];\r\n        this.activeRoomId = \"\";\r\n      })\r\n    },\r\n    onCloseDialog(needReload){\r\n      this.chosenRoomId = \"\";\r\n      needReload && this.queryRoomList();\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roomBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roomBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./roomBox.vue?vue&type=template&id=7d3c02e4&\"\nimport script from \"./roomBox.vue?vue&type=script&lang=js&\"\nexport * from \"./roomBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7d3c02e4')) {\n      api.createRecord('7d3c02e4', component.options)\n    } else {\n      api.reload('7d3c02e4', component.options)\n    }\n    module.hot.accept(\"./roomBox.vue?vue&type=template&id=7d3c02e4&\", function () {\n      api.rerender('7d3c02e4', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/roomBox.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [\n    _c(\"div\", { staticClass: \"top-tool\" }, [\n      _c(\"div\", { staticClass: \"title\" }, [_vm._v(_vm._s(_vm.title))]),\n      _c(\n        \"div\",\n        { staticClass: \"sec-box\" },\n        [\n          _c(\n            \"dsf-button\",\n            {\n              attrs: { loading: _vm.btnLoading.checkOut },\n              on: { click: _vm.preCheckOut }\n            },\n            [_vm._v(\"已选房间退房\")]\n          ),\n          _vm.predis === \"1\"\n            ? _c(\n                \"dsf-button\",\n                {\n                  attrs: { loading: _vm.btnLoading.cancel },\n                  on: { click: _vm.preCancel }\n                },\n                [_vm._v(\"预约房取消\")]\n              )\n            : _vm._e(),\n          _c(\n            \"dsf-button\",\n            {\n              attrs: { loading: _vm.btnLoading.restore },\n              on: { click: _vm.preRestore }\n            },\n            [_vm._v(\"重置已选房间\")]\n          ),\n          _c(\n            \"dsf-button\",\n            {\n              attrs: { loading: _vm.btnLoading.restoreAll },\n              on: { click: _vm.preRestoreAll }\n            },\n            [_vm._v(\"重置全部\")]\n          ),\n          _c(\n            \"dsf-button\",\n            {\n              attrs: { loading: _vm.btnLoading.auto },\n              on: { click: _vm.preAuto }\n            },\n            [_vm._v(\"自动排房\")]\n          )\n        ],\n        1\n      )\n    ]),\n    _c(\n      \"div\",\n      { staticClass: \"state-box\" },\n      [\n        _c(\"color-state-list\", {\n          attrs: { \"room-state-list\": _vm.roomStateList }\n        }),\n        _c(\"inline-select-box\")\n      ],\n      1\n    ),\n    _vm.team\n      ? _c(\"div\", { staticClass: \"msg-box\" }, [\n          _c(\"div\", { staticClass: \"msg\" }, [\n            _c(\"label\", [_vm._v(\"当前团体：\")]),\n            _c(\"span\", [_vm._v(_vm._s(_vm.team.teamName))]),\n            _c(\"span\", { staticClass: \"time\" }, [\n              _vm._v(_vm._s(_vm.team.sDate))\n            ]),\n            _vm._v(\"至 \"),\n            _c(\"span\", { staticClass: \"time\" }, [\n              _vm._v(_vm._s(_vm.team.eDate))\n            ])\n          ])\n        ])\n      : _vm._e()\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"top-tool\">\r\n      <div class=\"title\">{{title}}</div>\r\n      <div class=\"sec-box\">\r\n        <dsf-button :loading=\"btnLoading.checkOut\" @click=\"preCheckOut\">已选房间退房</dsf-button>\r\n        <dsf-button v-if=\"predis === '1'\" :loading=\"btnLoading.cancel\" @click=\"preCancel\">预约房取消</dsf-button>\r\n        <dsf-button :loading=\"btnLoading.restore\" @click=\"preRestore\">重置已选房间</dsf-button>\r\n        <dsf-button :loading=\"btnLoading.restoreAll\" @click=\"preRestoreAll\">重置全部</dsf-button>\r\n        <dsf-button :loading=\"btnLoading.auto\" @click=\"preAuto\">自动排房</dsf-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"state-box\">\r\n      <color-state-list :room-state-list=\"roomStateList\"></color-state-list>\r\n      <inline-select-box></inline-select-box>\r\n    </div>\r\n    <div v-if=\"team\" class=\"msg-box\">\r\n      <div class=\"msg\">\r\n        <label>当前团体：</label>\r\n        <span>{{team.teamName}}</span>\r\n        <span class=\"time\">{{team.sDate}}</span>至\r\n        <span class=\"time\">{{team.eDate}}</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport colorStateList from \"_platform/pc/dormitory/room/colorStateList\";\r\nimport inlineSelectBox from \"_platform/pc/dormitory/room/inlineSelectBox\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {assign} from \"_platform/pc/dormitory/func\";\r\n  \r\nexport default {\r\n  name: \"groupTopTool\",\r\n  inject: ['dormitoryRoot', 'rightConfigPointer'],\r\n  props: {\r\n    personList:{\r\n      type: Array,\r\n      default(){\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    colorStateList,\r\n    inlineSelectBox\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      title: \"\",\r\n      apiBuildingList: null,\r\n        \r\n      //项目属性\r\n      btnLoading:{\r\n        checkOut: false,\r\n        cancel: false,\r\n        restore: false,\r\n        restoreAll: false,\r\n        auto: false\r\n      }\r\n    }\r\n  },\r\n  computed:{\r\n    rightConfig(){\r\n      return this.rightConfigPointer()\r\n    },\r\n    predis(){\r\n      return dsf.url.queryString(\"predis\")\r\n    },\r\n    ...mapState('dormitory', [\r\n      'roomStateList',\r\n      'activeTeamId'\r\n    ]),\r\n    team(){\r\n      let team = null;\r\n      for (let i=0; i<this.personList.length; i++){\r\n        let a = this.personList[i];\r\n        if (a.teamId === this.activeTeamId){\r\n          team = Object.assign({}, a);\r\n          team.sDate = a.sDate.replace(/:\\d\\d$/, \"\");\r\n          team.eDate = a.eDate.replace(/:\\d\\d$/, \"\");\r\n          break;\r\n        }\r\n      }\r\n      return team\r\n    },\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig, ['roomStateList']);\r\n  },\r\n  methods: {\r\n    preCheckOut() {\r\n      eventBus.emit(eventBusEvent.chosenRoomCheckOut, this.btnLoading);\r\n    },\r\n    preCancel() {\r\n      eventBus.emit(eventBusEvent.reserveRoomCancel, this.btnLoading)\r\n    },\r\n    preRestore() {\r\n      eventBus.emit(eventBusEvent.restoreSelectRoom, this.btnLoading);\r\n    },\r\n    preRestoreAll() {\r\n      let floorList = this.dormitoryRoot.$refs.room?.floorList;\r\n      // 预分配机制下，点击人员安排，若该团体无分配房间，点击重置全部按钮时，提示 该团体未分配房源，无法重置全部\r\n      if (dsf.config.setting_sgcp_reserve == 1 && !floorList?.length) {\r\n        dsf.layer.message('该团体未分配房源，无法重置全部', false);\r\n        return;\r\n      }\r\n      eventBus.emit(eventBusEvent.restoreAllRoom, this.btnLoading);\r\n    },\r\n    preAuto() {\r\n      eventBus.emit(eventBusEvent.autoCheckIn, this.btnLoading)\r\n    },\r\n      \r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./groupTopTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./groupTopTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./groupTopTool.vue?vue&type=template&id=f3d75e6c&\"\nimport script from \"./groupTopTool.vue?vue&type=script&lang=js&\"\nexport * from \"./groupTopTool.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('f3d75e6c')) {\n      api.createRecord('f3d75e6c', component.options)\n    } else {\n      api.reload('f3d75e6c', component.options)\n    }\n    module.hot.accept(\"./groupTopTool.vue?vue&type=template&id=f3d75e6c&\", function () {\n      api.rerender('f3d75e6c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/groupTopTool.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"group-list-warp\" },\n    [\n      _c(\n        \"el-collapse\",\n        {\n          attrs: { value: _vm.activeTeamId, accordion: _vm.accordion },\n          on: { change: _vm.changeCollapse }\n        },\n        _vm._l(_vm.personList, function(item, it) {\n          return _c(\n            \"el-collapse-item\",\n            {\n              key: item.teamId,\n              attrs: { title: item.teamName, name: item.teamId }\n            },\n            [\n              _c(\"div\", { staticClass: \"group-person-box\" }, [\n                _c(\n                  \"ul\",\n                  [\n                    _vm._l(item.boyList, function(boy, it) {\n                      return _c(\n                        \"li\",\n                        {\n                          key: boy.personId,\n                          attrs: {\n                            \"data-id\": boy.personId,\n                            \"data-name\": boy.personName\n                          }\n                        },\n                        [\n                          boy.headImg\n                            ? _c(\"img\", {\n                                attrs: { src: boy.headImg, alt: \"男性头像\" }\n                              })\n                            : _c(\"i\", { staticClass: \"icon-boy-head\" }),\n                          _c(\"span\", [_vm._v(_vm._s(boy.personName))])\n                        ]\n                      )\n                    }),\n                    !item.boyList || item.boyList.length === 0\n                      ? _c(\"div\", [_vm._v(\"（已排完）\")])\n                      : _vm._e()\n                  ],\n                  2\n                ),\n                _c(\n                  \"ul\",\n                  [\n                    _vm._l(item.girlList, function(girl, it) {\n                      return _c(\n                        \"li\",\n                        {\n                          key: girl.personId,\n                          attrs: {\n                            \"data-id\": girl.personId,\n                            \"data-name\": girl.personName\n                          }\n                        },\n                        [\n                          girl.headImg\n                            ? _c(\"img\", {\n                                attrs: { src: girl.headImg, alt: \"女性头像\" }\n                              })\n                            : _c(\"i\", { staticClass: \"icon-girl-head\" }),\n                          _c(\"span\", [_vm._v(_vm._s(girl.personName))])\n                        ]\n                      )\n                    }),\n                    !item.girlList || item.girlList.length === 0\n                      ? _c(\"div\", [_vm._v(\"（已排完）\")])\n                      : _vm._e()\n                  ],\n                  2\n                )\n              ])\n            ]\n          )\n        }),\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"group-list-warp\">\r\n    <el-collapse :value=\"activeTeamId\" :accordion=\"accordion\" @change=\"changeCollapse\">\r\n      <el-collapse-item v-for=\"(item, it) in personList\" :title=\"item.teamName\" :name=\"item.teamId\" :key=\"item.teamId\">\r\n        <div class=\"group-person-box\">\r\n          <ul>\r\n            <li\r\n              v-for=\"(boy, it) in item.boyList\"\r\n              :key=\"boy.personId\"\r\n              :data-id=\"boy.personId\"\r\n              :data-name=\"boy.personName\"\r\n            >\r\n              <img v-if=\"boy.headImg\" :src=\"boy.headImg\" alt=\"男性头像\">\r\n              <i v-else class=\"icon-boy-head\"></i>\r\n              <span>{{boy.personName}}</span>\r\n            </li>\r\n            <div v-if=\"!item.boyList || item.boyList.length === 0\">（已排完）</div>\r\n          </ul>\r\n          <ul>\r\n            <li\r\n              v-for=\"(girl, it) in item.girlList\"\r\n              :key=\"girl.personId\"\r\n              :data-id=\"girl.personId\"\r\n              :data-name=\"girl.personName\"\r\n            >\r\n              <img v-if=\"girl.headImg\" :src=\"girl.headImg\" alt=\"女性头像\">\r\n              <i v-else class=\"icon-girl-head\"></i>\r\n              <span>{{girl.personName}}</span>\r\n            </li>\r\n            <div v-if=\"!item.girlList || item.girlList.length === 0\">（已排完）</div>\r\n          </ul>\r\n        </div>\r\n      </el-collapse-item>\r\n    </el-collapse>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {customAssign, assign} from \"_platform/pc/dormitory/func\";\r\nimport {mapState} from 'vuex'\r\n  \r\nexport default {\r\n  inject: ['leftConfigPointer'],\r\n  name: \"groupList\",\r\n  props: {\r\n    personObj: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    },\r\n    personList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      //项目属性\r\n      apiGroupList: null,\r\n      accordion: null,\r\n    }\r\n  },\r\n  computed: {\r\n    leftConfig() {\r\n      return this.leftConfigPointer()\r\n    },\r\n    sexRule() {\r\n      return this.apiGroupList.sexRule;\r\n    },\r\n    ...mapState('dormitory', [\r\n      \"activeTeamId\"\r\n    ])\r\n  },\r\n  watch: {\r\n    personList(val) {\r\n      let obj = {};\r\n      if (!val || val.length === 0) return obj;\r\n      for (let i = 0; i < val.length; i++) {\r\n        let team = val[i];\r\n        if (!team.person) continue;\r\n        for (let j = 0; j < team.person.length; j++) {\r\n          let person = team.person[j];\r\n            \r\n          if (obj[person.personId]) {\r\n            dsf.layer.alert(\"团体人员列表，人员 personId 有重复的\")\r\n            return\r\n          }\r\n          obj[person.personId] = person\r\n        }\r\n      }\r\n      this.$emit(\"update:personObj\", obj);\r\n        \r\n      if (!this.activeTeamId) {\r\n        this.$store.commit(\"dormitory/activeTeamId\", val[0].teamId)\r\n      }\r\n      this.$nextTick(() => {\r\n        this.createInteraction()\r\n      })\r\n    }\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.leftConfig);\r\n    assign(this, this.leftConfig);\r\n    this.queryList();\r\n  },\r\n  mounted() {\r\n    eventBus.on(eventBusEvent.refreshGroupList, () => {\r\n      this.queryList()\r\n    })\r\n  },\r\n  methods: {\r\n    reset() {\r\n      this.queryList();\r\n    },\r\n    queryList() {\r\n      let q = {};\r\n      if (_.isFunction(this.apiGroupList.query)) {\r\n        let add = this.apiGroupList.query();\r\n        q = customAssign(q, add);\r\n      }\r\n      this.$http.get(this.apiGroupList.url, q).done(res => {\r\n        let result = res.data;\r\n        if (_.isFunction(this.apiGroupList.callback)) {\r\n          result = this.apiGroupList.callback(result);\r\n        }\r\n          \r\n        for (let i = 0; i < result.length; i++) {\r\n          let item = result[i];\r\n          item.boyList = [];\r\n          item.girlList = [];\r\n          if (!_.isArray(item.person)) continue;\r\n          for (let j = 0; j < item.person.length; j++) {\r\n            let person = item.person[j];\r\n            if (person.occupy === 1) continue;    //occupy 为1 表示已经入住\r\n            if (person.sexValue === this.sexRule.male) item.boyList.push(person);\r\n            if (person.sexValue === this.sexRule.female) item.girlList.push(person);\r\n          }\r\n        }\r\n        this.$emit(\"update:personList\", result)\r\n      })\r\n    },\r\n    changeCollapse(val) {\r\n      this.$store.commit(\"dormitory/activeTeamId\", val);\r\n      this.createInteraction()\r\n    },\r\n    createInteraction() {\r\n      $(\".group-person-box li\").draggable({\r\n        addClasses: false,\r\n        start: function(evt) {\r\n          console.log(\"ss\")\r\n        },\r\n        helper() {\r\n          let txt = $(this).data(\"name\");\r\n          let id = $(this).data(\"id\");\r\n          return $(`<div class=\"drag-item\" data-id=${id}>${txt}</div>`);\r\n        },\r\n        cursor: \"default\",\r\n        cursorAt: {\r\n          top: -5,\r\n          left: -5\r\n        },\r\n        stop(evt, ui) {\r\n      \r\n        }\r\n      });\r\n    },\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./groupList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./groupList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./groupList.vue?vue&type=template&id=648d9e31&\"\nimport script from \"./groupList.vue?vue&type=script&lang=js&\"\nexport * from \"./groupList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('648d9e31')) {\n      api.createRecord('648d9e31', component.options)\n    } else {\n      api.reload('648d9e31', component.options)\n    }\n    module.hot.accept(\"./groupList.vue?vue&type=template&id=648d9e31&\", function () {\n      api.rerender('648d9e31', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/groupList.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"floor-container group\" },\n    [\n      _c(\"floor-box\", {\n        attrs: {\n          \"multiple-choose\": true,\n          \"floor-list\": _vm.floorList,\n          \"chosen-room-id\": _vm.chosenRoomId,\n          \"active-room-id\": _vm.activeRoomId,\n          \"loading-room-id\": _vm.loadingRoomId\n        },\n        on: {\n          \"update:chosenRoomId\": function($event) {\n            _vm.chosenRoomId = $event\n          },\n          \"update:chosen-room-id\": function($event) {\n            _vm.chosenRoomId = $event\n          },\n          \"update:activeRoomId\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"update:active-room-id\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"click-room\": _vm.clickRoom\n        }\n      }),\n      _c(\"action-dialog\", {\n        attrs: {\n          title: \"自动排房\",\n          visible: _vm.autoDialogVisible,\n          top: \"20px\",\n          width: \"60%\"\n        },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.autoDialogVisible = $event\n          },\n          save: _vm.saveAuto\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"body\",\n            fn: function() {\n              return [\n                _c(\n                  \"el-form\",\n                  {\n                    staticClass: \"auto-checkin-form\",\n                    attrs: { model: _vm.form, \"label-width\": \"100px\" }\n                  },\n                  [\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"团体名称\" } },\n                      [\n                        _c(\n                          \"el-select\",\n                          {\n                            attrs: { multiple: \"\", placeholder: \"请选择团体\" },\n                            on: {\n                              change: _vm.changeTeamSelect,\n                              \"visible-change\": _vm.selectExpand\n                            },\n                            model: {\n                              value: _vm.form.reserveIds,\n                              callback: function($$v) {\n                                _vm.$set(_vm.form, \"reserveIds\", $$v)\n                              },\n                              expression: \"form.reserveIds\"\n                            }\n                          },\n                          _vm._l(_vm.personList, function(team) {\n                            return _c(\"el-option\", {\n                              key: team.reserveId,\n                              attrs: {\n                                label: team.teamName,\n                                value: team.reserveId\n                              }\n                            })\n                          }),\n                          1\n                        )\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"楼宇\" } },\n                      [\n                        _c(\n                          \"el-checkbox-group\",\n                          {\n                            on: { change: _vm.changeBuildCheckGroup },\n                            model: {\n                              value: _vm.form.buildingIds,\n                              callback: function($$v) {\n                                _vm.$set(_vm.form, \"buildingIds\", $$v)\n                              },\n                              expression: \"form.buildingIds\"\n                            }\n                          },\n                          _vm._l(_vm.buildList, function(item, it) {\n                            return _c(\n                              \"div\",\n                              { key: it, staticClass: \"checkbox-warp\" },\n                              [\n                                _c(\n                                  \"el-checkbox\",\n                                  { attrs: { label: item.buildingId } },\n                                  [_vm._v(_vm._s(item.name))]\n                                )\n                              ],\n                              1\n                            )\n                          }),\n                          0\n                        )\n                      ],\n                      1\n                    ),\n                    _c(\"el-form-item\", { attrs: { label: \"楼层\" } }, [\n                      _vm.rowList.length > 0\n                        ? _c(\n                            \"div\",\n                            { staticClass: \"floor-checkbox-warp\" },\n                            _vm._l(_vm.rowList, function(row, r) {\n                              return _c(\n                                \"div\",\n                                { key: r },\n                                [\n                                  _c(\"label\", { staticClass: \"floor-name\" }, [\n                                    _c(\"span\", [_vm._v(_vm._s(row.floorName))])\n                                  ]),\n                                  _c(\n                                    \"el-checkbox-group\",\n                                    {\n                                      model: {\n                                        value: _vm.form.floorIds,\n                                        callback: function($$v) {\n                                          _vm.$set(_vm.form, \"floorIds\", $$v)\n                                        },\n                                        expression: \"form.floorIds\"\n                                      }\n                                    },\n                                    _vm._l(row.floorItems, function(item, it) {\n                                      return _c(\n                                        \"div\",\n                                        {\n                                          key: it,\n                                          staticClass: \"checkbox-warp\"\n                                        },\n                                        [\n                                          _c(\n                                            \"el-checkbox\",\n                                            {\n                                              attrs: { label: item.buildingId }\n                                            },\n                                            [_vm._v(_vm._s(item.name))]\n                                          )\n                                        ],\n                                        1\n                                      )\n                                    }),\n                                    0\n                                  )\n                                ],\n                                1\n                              )\n                            }),\n                            0\n                          )\n                        : _c(\"div\", { staticClass: \"no-check-group\" }, [\n                            _vm._v(\"请先选择楼宇\")\n                          ])\n                    ]),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"房间类型\" } },\n                      [\n                        _c(\n                          \"el-checkbox-group\",\n                          {\n                            model: {\n                              value: _vm.form.types,\n                              callback: function($$v) {\n                                _vm.$set(_vm.form, \"types\", $$v)\n                              },\n                              expression: \"form.types\"\n                            }\n                          },\n                          _vm._l(_vm.roomTypesByAuto, function(item, it) {\n                            return _c(\n                              \"div\",\n                              { key: it, staticClass: \"checkbox-warp\" },\n                              [\n                                _c(\n                                  \"el-checkbox\",\n                                  { attrs: { label: item.val } },\n                                  [_vm._v(_vm._s(item.name))]\n                                )\n                              ],\n                              1\n                            )\n                          }),\n                          0\n                        )\n                      ],\n                      1\n                    ),\n                    _c(\n                      \"el-form-item\",\n                      { attrs: { label: \"入住规则\" } },\n                      [\n                        _c(\n                          \"el-checkbox-group\",\n                          { attrs: { value: _vm.form.rules } },\n                          _vm._l(_vm.rulesByAuto, function(item, it) {\n                            return _c(\n                              \"div\",\n                              { key: it, staticClass: \"checkbox-warp\" },\n                              [\n                                _c(\n                                  \"el-checkbox\",\n                                  {\n                                    attrs: {\n                                      label: item.val,\n                                      disabled: item.disabled,\n                                      checked: item.default\n                                    },\n                                    on: {\n                                      change: function(status) {\n                                        return _vm.changeRuleCheck(status, item)\n                                      }\n                                    }\n                                  },\n                                  [_vm._v(\" \" + _vm._s(item.name) + \" \")]\n                                )\n                              ],\n                              1\n                            )\n                          }),\n                          0\n                        )\n                      ],\n                      1\n                    ),\n                    _c(\"el-form-item\", { attrs: { label: \"入住时间\" } }, [\n                      _vm.timeForm.sDate\n                        ? _c(\"div\", { staticClass: \"date-box\" }, [\n                            _c(\"span\", [_vm._v(_vm._s(_vm.timeForm.sDate))]),\n                            _c(\"span\", { staticClass: \"text-divider\" }, [\n                              _vm._v(\"至\")\n                            ]),\n                            _c(\"span\", [_vm._v(_vm._s(_vm.timeForm.eDate))])\n                          ])\n                        : _c(\"span\", [_vm._v(\" -- \")])\n                    ])\n                  ],\n                  1\n                )\n              ]\n            },\n            proxy: true\n          }\n        ])\n      }),\n      _c(\"room-history-dialog\", {\n        attrs: { visible: _vm.roomStatusVisible, info: _vm.roomStatusInfo },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.roomStatusVisible = $event\n          },\n          \"dialog-close\": function($event) {\n            _vm.activeRoomId = \"\"\n          }\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"el-dialog\",\n    {\n      attrs: {\n        visible: _vm.visible,\n        width: \"40%\",\n        \"custom-class\": \"dsf-dormitory-dialog\",\n        \"before-close\": _vm.closeDialog,\n        modal: false\n      },\n      on: {\n        \"update:visible\": function($event) {\n          _vm.visible = $event\n        },\n        opened: _vm.queryRoomOccupyInfo\n      },\n      scopedSlots: _vm._u([\n        {\n          key: \"title\",\n          fn: function() {\n            return [\n              _c(\"div\", { staticClass: \"plain-title\" }, [\n                _c(\"span\", [_vm._v(\"房间：\" + _vm._s(_vm.info.roomName))]),\n                _c(\"span\", [\n                  _vm._v(\"房间床位：\" + _vm._s(_vm.info.emptyBedNum))\n                ])\n              ])\n            ]\n          },\n          proxy: true\n        },\n        {\n          key: \"footer\",\n          fn: function() {\n            return [\n              _c(\n                \"div\",\n                { staticClass: \"dialog-footer\" },\n                [\n                  _c(\"el-button\", { on: { click: _vm.closeDialog } }, [\n                    _vm._v(\"确 定\")\n                  ])\n                ],\n                1\n              )\n            ]\n          },\n          proxy: true\n        }\n      ])\n    },\n    [\n      _c(\n        \"div\",\n        {\n          directives: [\n            {\n              name: \"loading\",\n              rawName: \"v-loading\",\n              value: _vm.loadingOccupyInfo,\n              expression: \"loadingOccupyInfo\"\n            }\n          ],\n          staticClass: \"list-box\"\n        },\n        _vm._l(_vm.list, function(item, it) {\n          return _c(\"div\", { key: it, staticClass: \"item\" }, [\n            _c(\"i\", { staticClass: \"ico-point\" }),\n            _c(\"p\", [_vm._v(_vm._s(item.timeStr))]),\n            _c(\n              \"ul\",\n              [\n                _vm._l(item.person, function(one, o) {\n                  return _c(\"li\", { key: one.relId }, [\n                    _c(\"p\", [\n                      _vm._v(\n                        \" \" +\n                          _vm._s(one.typeStr) +\n                          \"：\" +\n                          _vm._s(one.personName) +\n                          \"[ \" +\n                          _vm._s(one.sexText) +\n                          \" ] \"\n                      )\n                    ]),\n                    _c(\"p\", [_vm._v(\" \" + _vm._s(one.phone) + \" \")]),\n                    _c(\n                      \"p\",\n                      {\n                        staticStyle: {\n                          \"text-align\": \"right\",\n                          \"padding-right\": \"10px\"\n                        }\n                      },\n                      [\n                        _vm.opt === \"resetGroup\"\n                          ? _c(\n                              \"span\",\n                              {\n                                on: {\n                                  click: function($event) {\n                                    return _vm.resetGroup(one)\n                                  }\n                                }\n                              },\n                              [_vm._v(\"重置\")]\n                            )\n                          : _vm._e(),\n                        _c(\n                          \"span\",\n                          {\n                            on: {\n                              click: function($event) {\n                                return _vm.go2Info(one)\n                              }\n                            }\n                          },\n                          [_vm._v(\"详情\")]\n                        )\n                      ]\n                    )\n                  ])\n                }),\n                _vm._l(item.release, function(empty, em) {\n                  return _c(\"li\", { key: em }, [_c(\"p\", [_vm._v(\"未入住：\")])])\n                })\n              ],\n              2\n            )\n          ])\n        }),\n        0\n      )\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog :visible.sync=\"visible\" width=\"40%\" custom-class=\"dsf-dormitory-dialog\" :before-close=\"closeDialog\" :modal=\"false\" @opened=\"queryRoomOccupyInfo\">\r\n    <template #title>\r\n      <div class=\"plain-title\">\r\n        <span>房间：{{info.roomName}}</span>\r\n        <span>房间床位：{{info.emptyBedNum}}</span>\r\n      </div>\r\n    </template>\r\n    <div v-loading=\"loadingOccupyInfo\" class=\"list-box\">\r\n      <div v-for=\"(item, it) in list\" :key=\"it\" class=\"item\">\r\n        <i class=\"ico-point\"></i>\r\n        <p>{{item.timeStr}}</p>\r\n        <ul>\r\n          <li v-for=\"(one, o) in item.person\" :key=\"one.relId\">\r\n            <p>\r\n              {{one.typeStr}}：{{one.personName}}[ {{one.sexText}} ]\r\n            </p>\r\n            <p>\r\n              {{one.phone}}\r\n            </p>\r\n            <p style=\"text-align: right;padding-right: 10px\">\r\n              <span v-if=\"opt === 'resetGroup'\" @click=\"resetGroup(one)\">重置</span>\r\n              <span @click=\"go2Info(one)\">详情</span>\r\n            </p>\r\n          </li>\r\n          <li v-for=\"(empty, em) in item.release\" :key=\"em\">\r\n            <p>未入住：</p>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"closeDialog\">确 定</el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {assign} from \"_platform/pc/dormitory/func\";\r\n\r\nexport default {\r\n  name: \"roomHistoryDialog\",\r\n  inject: [\"dormitoryRoot\", \"rightConfigPointer\"],\r\n  props: {\r\n    info: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          roomName: \"\",\r\n          emptyBedNum: \"\",\r\n          roomId: \"\",\r\n          sDate: \"\",\r\n          eDate: \"\"\r\n        };\r\n      }\r\n    },\r\n    visible: {\r\n      type: Boolean,\r\n      default: false,\r\n      required: true\r\n    }\r\n  },\r\n  computed: {\r\n    rightConfig() {\r\n      return this.rightConfigPointer();\r\n    },\r\n    opt() {\r\n      return this.$route.query.opt;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      apiRoomOccupyInfo: null,\r\n      roomStatusDetailClick: null,\r\n      apiResetPerson: null,\r\n\r\n      //项目属性\r\n      loadingOccupyInfo: false,\r\n      list: []\r\n    };\r\n  },\r\n  /*watch: {\r\n      \"info.roomId\"() {\r\n        this.queryRoomOccupyInfo()\r\n      },\r\n    },*/\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig);\r\n  },\r\n  methods: {\r\n    closeDialog() {\r\n      this.$emit(\"dialog-close\");\r\n      this.$emit(\"update:visible\", false);\r\n    },\r\n    queryRoomOccupyInfo() {\r\n      this.loadingOccupyInfo = true;\r\n      const q = {\r\n        roomId: this.info.roomId,\r\n        sDate: this.info.sDate,\r\n        eDate: this.info.eDate\r\n      };\r\n      this.$http\r\n        .get(this.apiRoomOccupyInfo.url, q)\r\n        .done((res) => {\r\n          let data = res.data;\r\n          if (_.isFunction(this.apiRoomOccupyInfo.callback)) {\r\n            data = this.apiRoomOccupyInfo.callback(data);\r\n          }\r\n          this.list = data;\r\n        })\r\n        .always(() => {\r\n          this.loadingOccupyInfo = false;\r\n        });\r\n    },\r\n    go2Info(one) {\r\n      if (!_.isFunction(this.roomStatusDetailClick)) return;\r\n      this.roomStatusDetailClick.call(this, one);\r\n    },\r\n    resetGroup(one) {\r\n      const q = {\r\n        personId: one.personId\r\n      };\r\n      this.$http\r\n        .post(this.apiResetPerson.url, q)\r\n        .done((res) => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return;\r\n          }\r\n          this.queryRoomOccupyInfo();\r\n          this.dormitoryRoot.reset();\r\n          dsf.layer.message(\"人员重置成功\");\r\n        })\r\n        .error((err) => {\r\n          dsf.layer.message(\"人员重置失败\", false);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roomHistoryDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roomHistoryDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./roomHistoryDialog.vue?vue&type=template&id=73c3c1fc&\"\nimport script from \"./roomHistoryDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./roomHistoryDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('73c3c1fc')) {\n      api.createRecord('73c3c1fc', component.options)\n    } else {\n      api.reload('73c3c1fc', component.options)\n    }\n    module.hot.accept(\"./roomHistoryDialog.vue?vue&type=template&id=73c3c1fc&\", function () {\n      api.rerender('73c3c1fc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/dialog/roomHistoryDialog.vue\"\nexport default component.exports","<template>\r\n  <div class=\"floor-container group\">\r\n    <floor-box\r\n      :multiple-choose=\"true\"\r\n      :floor-list=\"floorList\"\r\n      :chosen-room-id.sync=\"chosenRoomId\"\r\n      :active-room-id.sync=\"activeRoomId\"\r\n      :loading-room-id=\"loadingRoomId\"\r\n      @click-room=\"clickRoom\"\r\n    ></floor-box>\r\n    \r\n    <action-dialog title=\"自动排房\" :visible.sync=\"autoDialogVisible\" top=\"20px\" width=\"60%\" @save=\"saveAuto\">\r\n      <template #body>\r\n        <el-form :model=\"form\" label-width=\"100px\" class=\"auto-checkin-form\">\r\n          <el-form-item label=\"团体名称\">\r\n            <el-select\r\n              v-model=\"form.reserveIds\"\r\n              multiple\r\n              placeholder=\"请选择团体\"\r\n              @change=\"changeTeamSelect\"\r\n              @visible-change=\"selectExpand\">\r\n              <el-option\r\n                v-for=\"team in personList\"\r\n                :label=\"team.teamName\"\r\n                :value=\"team.reserveId\"\r\n                :key=\"team.reserveId\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"楼宇\">\r\n            <el-checkbox-group v-model=\"form.buildingIds\" @change=\"changeBuildCheckGroup\">\r\n              <div v-for=\"(item, it) in buildList\" :key=\"it\" class=\"checkbox-warp\">\r\n                <el-checkbox :label=\"item.buildingId\">{{item.name}}</el-checkbox>\r\n              </div>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"楼层\">\r\n            <div class=\"floor-checkbox-warp\" v-if=\"rowList.length > 0\">\r\n              <div v-for=\"(row, r) in rowList\" :key=\"r\">\r\n                <label class=\"floor-name\"><span>{{row.floorName}}</span></label>\r\n                <el-checkbox-group v-model=\"form.floorIds\">\r\n                  <div v-for=\"(item, it) in row.floorItems\" :key=\"it\" class=\"checkbox-warp\">\r\n                    <el-checkbox :label=\"item.buildingId\">{{item.name}}</el-checkbox>\r\n                  </div>\r\n                </el-checkbox-group>\r\n              </div>\r\n            </div>\r\n            \r\n            <div v-else class=\"no-check-group\">请先选择楼宇</div>\r\n          </el-form-item>\r\n          <el-form-item label=\"房间类型\">\r\n            <el-checkbox-group v-model=\"form.types\">\r\n              <div v-for=\"(item, it) in roomTypesByAuto\" :key=\"it\" class=\"checkbox-warp\">\r\n                <el-checkbox :label=\"item.val\">{{item.name}}</el-checkbox>\r\n              </div>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"入住规则\">\r\n            <el-checkbox-group :value=\"form.rules\">\r\n              <div v-for=\"(item, it) in rulesByAuto\" :key=\"it\" class=\"checkbox-warp\">\r\n                <el-checkbox\r\n                  :label=\"item.val\"\r\n                  @change=\"status => changeRuleCheck(status, item)\"\r\n                  :disabled=\"item.disabled\"\r\n                  :checked=\"item.default\"\r\n                >\r\n                  {{item.name}}\r\n                </el-checkbox>\r\n              </div>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"入住时间\">\r\n            <div v-if=\"timeForm.sDate\" class=\"date-box\">\r\n              <span>{{timeForm.sDate}}</span>\r\n              <span class=\"text-divider\">至</span>\r\n              <span>{{timeForm.eDate}}</span>\r\n            </div>\r\n            <span v-else> -- </span>\r\n          </el-form-item>\r\n        </el-form>\r\n      </template>\r\n    </action-dialog>\r\n    <room-history-dialog\r\n      :visible.sync=\"roomStatusVisible\"\r\n      :info=\"roomStatusInfo\"\r\n      @dialog-close=\"activeRoomId= ''\"\r\n    ></room-history-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport floorBox from \"_platform/pc/dormitory/room/floorBox\";\r\nimport actionDialog from \"_platform/pc/dormitory/dialog/actionDialog\";\r\nimport roomHistoryDialog from \"_platform/pc/dormitory/dialog/roomHistoryDialog\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {customAssign, filterOriginFloor, assign} from \"_platform/pc/dormitory/func\";\r\nimport {mapState} from \"vuex\"\r\n  \r\nexport default {\r\n  name: \"groupRoomBox\",\r\n  inject: ['rightConfigPointer'],\r\n  components: {\r\n    roomHistoryDialog,\r\n    floorBox,\r\n    actionDialog,\r\n  },\r\n  props: {\r\n    queryTime: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          sDate: \"\",\r\n          eDate: \"\"\r\n        }\r\n      }\r\n    },\r\n    personObj: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    },\r\n    personList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      apiRoomStatus: null,\r\n      dropAble: null,\r\n      apiTeamCheckin: null,\r\n      apiTeamCheckOut: null,\r\n      apiRestoreSelectRoom: null,\r\n      apiBuildingList: null,\r\n      apiAutoCheckIn: null,\r\n      apiReserveCancel: null,\r\n      roomTypesByAuto: null,    //自动排房表单里面的房间类型\r\n      rulesByAuto: null,        //自动排房表单里面的规则\r\n        \r\n      originFloorList: [],\r\n      chosenRoomId: [],     //选中的roomId\r\n      activeRoomId: \"\",     //激活的roomId\r\n      currentFloor: null,   //当前选中的楼层\r\n      loadingRoomId: [],    //loading状态的房间\r\n      autoDialogVisible: false,\r\n      form: {},\r\n      buildList: [],    //所有的楼宇多选框\r\n      rowList: [],    //楼层多选框\r\n      timeForm: {},    //自动排房时间选择\r\n        \r\n      //房间历史\r\n      roomStatusVisible: false,\r\n      roomStatusInfo: {},\r\n        \r\n      firstQueryRoomList: true,   //是否是第一次查询房间状态\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('dormitory', [\r\n      \"activeTeamId\",\r\n      \"roomStateList\"\r\n    ]),\r\n    rightConfig() {\r\n      return this.rightConfigPointer()\r\n    },\r\n    mchildren() {\r\n      return this.apiRoomStatus.childrenAlias\r\n    },\r\n    roomObj() {\r\n      let obj = {};\r\n      let mid = this.mid;\r\n      let mchildren = this.mchildren;\r\n      if (!this.floorList || this.floorList.length === 0) return obj;\r\n      for (let i = 0; i < this.floorList.length; i++) {\r\n        let floor = this.floorList[i];\r\n        for (let j = 0; j < floor[mchildren].length; j++) {\r\n          let room = floor[mchildren][j];\r\n          if (obj[room[mid]]) {\r\n            dsf.layer.alert(\"房间roomId有重复的\")\r\n            return\r\n          }\r\n          obj[room[mid]] = room\r\n        }\r\n      }\r\n      return obj\r\n    },\r\n    mid() {\r\n      return this.apiRoomStatus.roomIdAlias;\r\n    },\r\n    mnum() {\r\n      return this.apiRoomStatus.roomNumAlias;\r\n    },\r\n    floorList() {\r\n      return filterOriginFloor(this.originFloorList, this.roomStateList)\r\n    },\r\n  },\r\n  watch: {\r\n    floorList() {\r\n      this.$nextTick(() => {\r\n        this.createInteraction()\r\n      })\r\n    },\r\n    activeTeamId() {\r\n      this.queryRoomList()\r\n    },\r\n    autoDialogVisible(val) {\r\n      if (!val) return;\r\n      $(\".el-select-dropdown__list\").children(\"li.hover\").removeClass(\"hover\")\r\n    },\r\n    roomStateList(){\r\n      this.chosenRoomId = []\r\n    }\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig, ['roomStateList']);\r\n    const currentTime = new Date().Format(\"yyyy-MM-dd\");\r\n      \r\n    let start = dsf.url.queryString(\"sDate\");\r\n    let end = dsf.url.queryString(\"eDate\");\r\n    let sDate = start ? decodeURIComponent(start) : (currentTime + \" 00:00:00\");\r\n    let eDate = end ? decodeURIComponent(end) : (currentTime + \" 23:59:59\");\r\n    this.startTime = sDate;\r\n    this.endTime = eDate;\r\n  },\r\n  mounted() {\r\n    this.GetAllBuildList()\r\n    eventBus.on(eventBusEvent.queryRoomList, floor => {\r\n      this.currentFloor = floor;\r\n      //页面最初完成时，不查询房间（此时房间的查询交给 activeTeamId 的改变来触发）\r\n      if (!this.firstQueryRoomList){\r\n        this.queryRoomList()\r\n      }\r\n    })\r\n    eventBus.on(eventBusEvent.chosenRoomCheckOut, btnLoading => {\r\n      this.chosenRoomCheckOut(btnLoading);\r\n    })\r\n    eventBus.on(eventBusEvent.reserveRoomCancel, btnLoading => {\r\n      this.reserveRoomCancel(btnLoading);\r\n    })\r\n    eventBus.on(eventBusEvent.restoreSelectRoom, btnLoading => {\r\n      this.restoreSelectRoom(btnLoading);\r\n    })\r\n    eventBus.on(eventBusEvent.restoreAllRoom, btnLoading => {\r\n      this.restoreAllRoom(btnLoading)\r\n    })\r\n    eventBus.on(eventBusEvent.autoCheckIn, () => {\r\n      if (!_.isArray(this.floorList) || this.floorList.length === 0){\r\n        dsf.layer.message(\"该团体未分配房源，无法自动排房\", false);\r\n        return\r\n      }\r\n        \r\n      this.rowList = [];\r\n        \r\n      let reserveIds, team;\r\n      if (_.isArray(this.personList)) {\r\n        team = this.activeTeamId ? getTeam.call(this): this.personList[0];\r\n        reserveIds = [team.reserveId];\r\n        this.timeForm = {\r\n          sDate: team.sDate.replace(/:\\d\\d$/, \"\"),\r\n          eDate: team.eDate.replace(/:\\d\\d$/, \"\")\r\n        }\r\n          \r\n      } else {\r\n        reserveIds = []\r\n        this.timeForm = {\r\n          sDate: \"\",\r\n          eDate: \"\"\r\n        }\r\n      }\r\n        \r\n      //默认选中的入住规则\r\n      const defaultChosenTypes = [];\r\n      this.rulesByAuto.forEach(a => {\r\n        if (a.default === \"checked\") defaultChosenTypes.push(a.val)\r\n      });\r\n        \r\n      this.form = {\r\n        reserveIds: reserveIds,\r\n        buildingIds: [],\r\n        floorIds: [],\r\n        types: [],\r\n        rules: defaultChosenTypes\r\n      }\r\n      this.autoDialogVisible = true\r\n    })\r\n  },\r\n  methods: {\r\n    reserveRoomCancel(btnLoading) {\r\n      const team = getTeam.call(this);\r\n      if (!this.chosenRoomId || this.chosenRoomId.length === 0) {\r\n        dsf.layer.message(\"您还没有选择房间\", false);\r\n        return false\r\n      }\r\n      if (!team) {\r\n        dsf.layer.message(\"没有选择指定的团体\", false)\r\n        return;\r\n      }\r\n        \r\n      btnLoading.cancel = true\r\n      this.loadingRoomId = this.chosenRoomId;\r\n      const q = {\r\n        roomIds: this.chosenRoomId,\r\n        reserveId: team.reserveId\r\n      }\r\n      this.$http.post(this.apiReserveCancel.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      })\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return\r\n          }\r\n          dsf.layer.message(\"取消预约房成功\");\r\n          this.queryRoomList();\r\n          eventBus.emit(eventBusEvent.refreshGroupList);\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"取消预约房失败\", false)\r\n        })\r\n        .always(() => {\r\n          btnLoading.cancel = false;\r\n          this.loadingRoomId = [];\r\n        })\r\n        \r\n        \r\n    },\r\n    selectExpand(val) {\r\n      console.log(val)\r\n      $(\".el-select-dropdown__list\").children(\"li.hover\").removeClass(\"hover\")\r\n    },\r\n    clickRoom(room) {\r\n      this.roomStatusInfo = {\r\n        roomId: room[this.mid],\r\n        roomName: room[this.mnum],\r\n        emptyBedNum: room.beds,\r\n        ...this.queryTime\r\n      }\r\n        \r\n      const team = getTeam.call(this);\r\n      if (team) {\r\n        this.roomStatusInfo.sDate = team.sDate;\r\n        this.roomStatusInfo.eDate = team.eDate;\r\n      }\r\n        \r\n      this.roomStatusVisible = true;\r\n    },\r\n    queryRoomList() {\r\n      const team = getTeam.call(this);\r\n      let q = {\r\n        buildingId: this.currentFloor?.buildingId,\r\n        type: this.currentFloor?.typeValue,\r\n        sDate: team ? team.sDate : this.startTime,\r\n        eDate: team ? team.eDate : this.endTime\r\n      };\r\n      if (_.isFunction(this.apiRoomStatus.query)) {\r\n        let add = this.apiRoomStatus.query();\r\n        q = customAssign(q, add);\r\n      }\r\n        \r\n      this.$http.get(this.apiRoomStatus.url, q)\r\n        .done(res => {\r\n          this.originFloorList = res.success ? res.data : [];\r\n          this.chosenRoomId = [];\r\n        })\r\n        .always(() => {\r\n          this.firstQueryRoomList = false;\r\n        })\r\n    },\r\n    drop2room(person, room) {\r\n      const roomId = room[this.mid];\r\n      this.loadingRoomId.push(roomId);\r\n        \r\n      const q = {\r\n        personId: person.personId,\r\n        personName: person.personName,\r\n        sexValue: person.sexValue,\r\n        sexText: person.sexText,\r\n        reserveId: person.reserveId,\r\n        roomId: roomId\r\n      }\r\n      this.$http.post(this.apiTeamCheckin.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      }).done(res => {\r\n        if (!res.success) {\r\n          dsf.layer.message(res.message, false);\r\n          return\r\n        }\r\n        dsf.layer.message(\"入住成功\");\r\n        eventBus.emit(eventBusEvent.refreshGroupList);\r\n        this.queryRoomList();\r\n      })\r\n        .error(err => {\r\n          dsf.layer.message(\"入住失败\", false)\r\n        })\r\n        .always(() => {\r\n          let index = this.loadingRoomId.findIndex(a => a === roomId);\r\n          this.loadingRoomId.splice(index, 1);\r\n        })\r\n    },\r\n    createInteraction() {\r\n      const self = this;\r\n      $(\".floor-container .room\").droppable({\r\n        addClasses: false,\r\n        tolerance: \"pointer\",\r\n        over(evt, ui) {\r\n          console.log(\"droppable over\")\r\n          const seatDOM = $(evt.target);\r\n          seatDOM.css({\"box-shadow\": \"0 0 5px inset #409eff\"})\r\n        },\r\n        drop(evt, ui) {\r\n          const seatDOM = $(evt.target);\r\n          seatDOM.css(\"box-shadow\", \"none\");\r\n          const seatId = seatDOM.data(\"id\");\r\n          const personId = ui.helper.data(\"id\");\r\n          //如果当前座位已经处于loading状态则返回\r\n          if (self.loadingRoomId.includes(seatId)) return;\r\n            \r\n          const seat = self.roomObj[seatId];\r\n          const person = self.personObj[personId];\r\n            \r\n            \r\n          let isError = false; //是否可以入住\r\n          if (_.isFunction(self.dropAble)) {\r\n            isError = self.dropAble(person, seat);\r\n          }\r\n            \r\n          if (isError) {\r\n            const temp = {\r\n              type: \"warning\",\r\n            }\r\n            dsf.layer.confirm(Object.assign(isError, temp))\r\n            return\r\n          }\r\n            \r\n          self.drop2room(person, seat);\r\n        },\r\n        out(evt, ui) {\r\n          const seatDOM = $(evt.target);\r\n          seatDOM.css(\"box-shadow\", \"none\");\r\n        }\r\n      })\r\n        \r\n    },\r\n    chosenRoomCheckOut(btnLoading) {\r\n      if (!this.chosenRoomId || this.chosenRoomId.length === 0) {\r\n        dsf.layer.message(\"您还没有选择房间\", false);\r\n        return false\r\n      }\r\n      const team = getTeam.call(this);\r\n      if (!team) {\r\n        dsf.layer.message(\"没有选择指定的团体\", false)\r\n        return;\r\n      }\r\n      btnLoading.checkOut = true\r\n      this.loadingRoomId = this.chosenRoomId;\r\n      const q = {\r\n        reserveId: team.reserveId,\r\n        roomIds: this.chosenRoomId\r\n      }\r\n      this.$http.post(this.apiTeamCheckOut.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      })\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return\r\n          }\r\n            \r\n          dsf.layer.message(\"退房成功\");\r\n          this.queryRoomList();\r\n          eventBus.emit(eventBusEvent.refreshGroupList);\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"退房失败\", false)\r\n        })\r\n        .always(() => {\r\n          btnLoading.checkOut = false;\r\n          this.loadingRoomId = [];\r\n        })\r\n    },\r\n    restoreSelectRoom(btnLoading) {\r\n      if (!this.chosenRoomId || this.chosenRoomId.length === 0) {\r\n        dsf.layer.message(\"您还没有选择房间\", false);\r\n        return false\r\n      }\r\n      const team = getTeam.call(this);\r\n      if (!team) {\r\n        dsf.layer.message(\"没有选择指定的团体\", false)\r\n        return;\r\n      }\r\n        \r\n      let roomMsg = \"\"\r\n      this.chosenRoomId.forEach(a => {\r\n        let roomName = this[\"roomObj\"][a][this.mnum]\r\n        roomMsg += `<span>${roomName}号房间</span>`\r\n      })\r\n        \r\n      const func1 = () => {\r\n        this.loadingRoomId = this.chosenRoomId;\r\n        btnLoading.restore = true;\r\n        const q = {\r\n          reserveId: team.reserveId,\r\n          roomIds: this.chosenRoomId,\r\n        }\r\n        this.$http.post(this.apiRestoreSelectRoom.url, JSON.stringify(q), {\r\n          headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n        }).done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return\r\n          }\r\n          dsf.layer.message(\"重置已选房间成功\");\r\n          this.queryRoomList();\r\n          eventBus.emit(eventBusEvent.refreshGroupList);\r\n        }).error(err => {\r\n          dsf.layer.message(\"重置已选房间失败\", false)\r\n        })\r\n          .always(() => {\r\n            btnLoading.restore = false;\r\n            this.loadingRoomId = [];\r\n          })\r\n      }\r\n        \r\n      dsf.layer.confirm({\r\n        message: `<p>您即将重置<b>${team.teamName}</b>的：</p><p class=\"room-msg\">${roomMsg}</p><p>是否继续？</p>`,\r\n        customClass: \"dormitory-restore-select-room-confirm\"\r\n      }).then(() => {\r\n        func1()\r\n      }).catch(() => {\r\n      })\r\n        \r\n    },\r\n    restoreAllRoom(btnLoading) {\r\n      const team = getTeam.call(this);\r\n      if (!team) {\r\n        dsf.layer.message(\"没有选择指定的团体\", false)\r\n        return;\r\n      }\r\n      dsf.layer.confirm({\r\n        message: `<p>当前操作会重置<b>${team.teamName}</b>的所有房间</p><p>是否继续？</p>`\r\n      }).then(() => {\r\n        btnLoading.restoreAll = true;\r\n        const q = {\r\n          reserveId: team.reserveId,\r\n        }\r\n        this.$http.post(this.apiRestoreSelectRoom.url, JSON.stringify(q), {\r\n          headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n        })\r\n          .done(res => {\r\n            if (!res.success) {\r\n              dsf.layer.message(res.message, false);\r\n              return\r\n            }\r\n            dsf.layer.message(\"重置全部房间成功\");\r\n            this.queryRoomList();\r\n            eventBus.emit(eventBusEvent.refreshGroupList);\r\n          })\r\n          .error(err => {\r\n            dsf.layer.message(\"重置全部房间失败\", false)\r\n          })\r\n          .always(() => {\r\n            btnLoading.restoreAll = false;\r\n          })\r\n      })\r\n        .catch(() => {\r\n        })\r\n    },\r\n    GetAllBuildList() {\r\n      this.$http.get(this.apiBuildingList.url, {\r\n        type: 1\r\n      }).done(res => {\r\n        this.buildList = res.data;\r\n      })\r\n    },\r\n    changeBuildCheckGroup(checkList) {\r\n      const callback = (list, obj) => {\r\n        console.log(list)\r\n        console.log(obj)\r\n        //删除已选择的楼层\r\n        this.form.floorIds = this.form.floorIds.filter(id => !!obj[id]);\r\n        this.rowList = list\r\n      }\r\n      getRowList.call(this, checkList, callback);\r\n    },\r\n    saveAuto(btnLoading) {\r\n      //判断楼宇\r\n      if (!this.form.buildingIds || this.form.buildingIds.length === 0) {\r\n        dsf.layer.message(\"楼宇不能为空\", false);\r\n        return\r\n      }\r\n      //判断团体\r\n      if (!this.form.reserveIds || this.form.reserveIds.length === 0) {\r\n        dsf.layer.message(\"自动排房至少需要选择一个团体\", false)\r\n        return\r\n      }\r\n        \r\n      //判断选中团体之间的时间\r\n      if (!judgeTeamTimeArrange.call(this)) return;\r\n        \r\n      if (!teamIsNotEmpty.call(this)) {\r\n        dsf.layer.message(\"选择的团体是空的，没有可以排房的人员\", false)\r\n        return;\r\n      }\r\n        \r\n      btnLoading.save = true\r\n      const teamNames = [];\r\n      this.personList.forEach(a => {\r\n        if (this.form.reserveIds.includes(a.reserveId)) {\r\n          teamNames.push(a.teamName)\r\n        }\r\n      });\r\n      const q = {\r\n        ...this.form,\r\n        ...this.timeForm,\r\n        teamNames: teamNames\r\n      }\r\n      this.$http.post(this.apiAutoCheckIn.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      })\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return\r\n          }\r\n          this.autoDialogVisible = false;\r\n          dsf.layer.message(\"自动排房成功\");\r\n          this.queryRoomList();\r\n          eventBus.emit(eventBusEvent.refreshGroupList);\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"自动排房失败\", false)\r\n        })\r\n        .always(() => {\r\n          btnLoading.save = false;\r\n        })\r\n    },\r\n    changeRuleCheck(status, item) {\r\n      if (!status) {\r\n        this.form.rules = this.form.rules.filter(a => a !== item.val);\r\n      } else {\r\n        if (!item.atomicity) {\r\n          this.form.rules.push(item.val)\r\n          return;\r\n        }\r\n          \r\n        const arr = [];\r\n        this.rulesByAuto.forEach(a => {\r\n          if (a.atomicity === item.atomicity) arr.push(a.val)\r\n        });\r\n        this.form.rules = this.form.rules.filter(a => !arr.includes(a))\r\n        this.form.rules.push(item.val)\r\n      }\r\n    },\r\n    changeTeamSelect(val) {\r\n      const isOK = judgeTeamTimeArrange.call(this);\r\n      if (isOK) {\r\n        //重置入住时间\r\n        if (val.length === 0) {\r\n          this.timeForm = {\r\n            sDate: \"\",\r\n            eDate: \"\"\r\n          }\r\n        }\r\n        if (val.length === 1) {\r\n          const team = this.personList.find(a => a.reserveId === val[0])\r\n          this.timeForm = {\r\n            sDate: team.sDate,\r\n            eDate: team.eDate\r\n          }\r\n        }\r\n        return\r\n      }\r\n      this.form.reserveIds.pop()\r\n    }\r\n  }\r\n}\r\n  \r\nfunction getTeam() {\r\n  if (!this.activeTeamId) return false;\r\n  return this.personList.find(a => a.teamId === this.activeTeamId)\r\n}\r\n  \r\nfunction getRowList(list, callback) {\r\n  const all = [];\r\n  for (let i = 0; i < list.length; i++) {\r\n    let p = new Promise(resolve => {\r\n      this.$http.get(this.apiBuildingList.url, {\r\n        buildingId: list[i],\r\n        type: 2\r\n      })\r\n        .done(res => {\r\n          const build = this.buildList.find(a => a.buildingId === list[i]);\r\n          resolve({\r\n            floorName: build.name,\r\n            floorItems: res.data\r\n          });\r\n        })\r\n    })\r\n    all.push(p)\r\n  }\r\n  Promise.all(all).then(res => {\r\n    let obj = {};\r\n    for (let i = 0; i < res.length; i++) {\r\n      let item = res[i].floorItems;\r\n      for (let j = 0; j < item.length; j++) {\r\n        let one = item[j];\r\n        if (obj[one.buildingId]) {\r\n          dsf.error(\"楼层buildingId 有重复的\")\r\n          return false\r\n        }\r\n          \r\n        obj[one.buildingId] = one;\r\n      }\r\n    }\r\n    callback(res, obj);\r\n  })\r\n}\r\n  \r\nfunction judgeTeamTimeArrange() {\r\n  //如果没有选中的团体, 则不进行团体之间的时间范围判断\r\n  if (!this.form.reserveIds || this.form.reserveIds.length === 0) {\r\n    return true\r\n  }\r\n  const teams = this.personList.filter(team => {\r\n    return this.form.reserveIds.includes(team.reserveId)\r\n  })\r\n  let team;\r\n  const sDate = teams[0].sDate.replace(/:\\d\\d$/, \"\")\r\n  const eDate = teams[0].eDate.replace(/:\\d\\d$/, \"\")\r\n  const timeNotPass = teams.some(a => {\r\n    team = a;\r\n    const start = a.sDate.replace(/:\\d\\d$/, \"\")\r\n    const end = a.eDate.replace(/:\\d\\d$/, \"\")\r\n    return start !== sDate || end !== eDate\r\n  })\r\n  if (timeNotPass) {\r\n    dsf.layer.message(`${team.teamName} 与 ${teams[0].teamName} 的入住时间不符合`, false);\r\n    return false\r\n  }\r\n    \r\n  return true\r\n}\r\n  \r\nfunction teamIsNotEmpty() {\r\n  return this.personList.some(a => {\r\n    if (this.form.reserveIds.includes(a.reserveId)) {\r\n      if (a?.person?.length > 0) {\r\n        //判断是否至少有一个未入住的用户\r\n        return a.person.some(p => +p.occupy === 0)\r\n      }\r\n    }\r\n  })\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./groupRoomBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./groupRoomBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./groupRoomBox.vue?vue&type=template&id=bd96e4a6&\"\nimport script from \"./groupRoomBox.vue?vue&type=script&lang=js&\"\nexport * from \"./groupRoomBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('bd96e4a6')) {\n      api.createRecord('bd96e4a6', component.options)\n    } else {\n      api.reload('bd96e4a6', component.options)\n    }\n    module.hot.accept(\"./groupRoomBox.vue?vue&type=template&id=bd96e4a6&\", function () {\n      api.rerender('bd96e4a6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/groupRoomBox.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"floor-container group\" },\n    [\n      _c(\"floor-box\", {\n        attrs: {\n          \"multiple-choose\": false,\n          \"floor-list\": _vm.floorList,\n          \"active-room-id\": _vm.activeRoomId,\n          \"loading-room-id\": _vm.loadingRoomId\n        },\n        on: {\n          \"update:activeRoomId\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"update:active-room-id\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"click-room\": _vm.clickRoom\n        }\n      }),\n      _c(\"room-history-dialog\", {\n        attrs: { visible: _vm.roomStatusVisible, info: _vm.roomStatusInfo },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.roomStatusVisible = $event\n          },\n          \"dialog-close\": _vm.closeDialog\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"floor-container group\">\r\n    <floor-box\r\n      :multiple-choose=\"false\"\r\n      :floor-list=\"floorList\"\r\n      :active-room-id.sync=\"activeRoomId\"\r\n      :loading-room-id=\"loadingRoomId\"\r\n      @click-room=\"clickRoom\"\r\n    ></floor-box>\r\n    \r\n    <room-history-dialog\r\n      :visible.sync=\"roomStatusVisible\"\r\n      :info=\"roomStatusInfo\"\r\n      @dialog-close=\"closeDialog\"\r\n    ></room-history-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport floorBox from \"_platform/pc/dormitory/room/floorBox\";\r\nimport roomHistoryDialog from \"_platform/pc/dormitory/dialog/roomHistoryDialog\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {customAssign, filterOriginFloor, assign} from \"_platform/pc/dormitory/func\";\r\nimport {mapState} from \"vuex\"\r\n  \r\nexport default {\r\n  name: \"groupRoomBox\",\r\n  inject: ['rightConfigPointer'],\r\n  components: {\r\n    roomHistoryDialog,\r\n    floorBox,\r\n  },\r\n  props: {\r\n    queryTime: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          sDate: \"\",\r\n          eDate: \"\"\r\n        }\r\n      }\r\n    },\r\n    personObj: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    },\r\n    personList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      apiRoomStatus: null,\r\n      dropAble: null,\r\n      apiTeamCheckin: null,\r\n      apiBuildingList: null,\r\n      originFloorList: [],\r\n      loadingRoomId: [],    //loading状态的房间\r\n      activeRoomId: '',\r\n      //房间历史\r\n      roomStatusVisible: false,\r\n      roomStatusInfo: {},\r\n      firstQueryRoomList: true,   //是否是第一次查询房间状态\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('dormitory', [\r\n      \"activeTeamId\",\r\n      \"roomStateList\"\r\n    ]),\r\n    activeTeam() {\r\n      return this.personList.find(it => it.teamId === this.activeTeamId);\r\n    },\r\n    rightConfig() {\r\n      return this.rightConfigPointer()\r\n    },\r\n    mchildren() {\r\n      return this.apiRoomStatus.childrenAlias\r\n    },\r\n    roomObj() {\r\n      let obj = {};\r\n      let mid = this.mid;\r\n      let mchildren = this.mchildren;\r\n      if (!this.floorList || this.floorList.length === 0) return obj;\r\n      for (let i = 0; i < this.floorList.length; i++) {\r\n        let floor = this.floorList[i];\r\n        for (let j = 0; j < floor[mchildren].length; j++) {\r\n          let room = floor[mchildren][j];\r\n          if (obj[room[mid]]) {\r\n            dsf.layer.alert(\"房间roomId有重复的\")\r\n            return\r\n          }\r\n          obj[room[mid]] = room\r\n        }\r\n      }\r\n      return obj\r\n    },\r\n    mid() {\r\n      return this.apiRoomStatus.roomIdAlias;\r\n    },\r\n    mnum() {\r\n      return this.apiRoomStatus.roomNumAlias;\r\n    },\r\n    floorList() {\r\n      return filterOriginFloor(this.originFloorList, this.roomStateList)\r\n    },\r\n  },\r\n  watch: {\r\n    floorList() {\r\n      this.$nextTick(() => {\r\n        this.createInteraction()\r\n      })\r\n    },\r\n    activeTeamId() {\r\n      this.queryRoomList()\r\n    },\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig, ['roomStateList']);\r\n\r\n    const currentTime = new Date().Format(\"yyyy-MM-dd\");\r\n      \r\n    let start = dsf.url.queryString(\"sDate\");\r\n    let end = dsf.url.queryString(\"eDate\");\r\n    let sDate = start ? decodeURIComponent(start) : (currentTime + \" 00:00:00\");\r\n    let eDate = end ? decodeURIComponent(end) : (currentTime + \" 23:59:59\");\r\n    this.startTime = sDate;\r\n    this.endTime = eDate;\r\n  },\r\n  mounted() {\r\n    eventBus.on(eventBusEvent.queryRoomList, floor => {\r\n      this.currentFloor = floor;\r\n      //页面最初完成时，不查询房间（此时房间的查询交给 activeTeamId 的改变来触发）\r\n      if (!this.firstQueryRoomList){\r\n        this.queryRoomList()\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    clickRoom(room) {\r\n      this.roomStatusInfo = {\r\n        roomId: room[this.mid],\r\n        roomName: room[this.mnum],\r\n        emptyBedNum: room.beds,\r\n        ...this.queryTime\r\n      }\r\n        \r\n      const team = getTeam.call(this);\r\n      if (team) {\r\n        this.roomStatusInfo.sDate = team.sDate;\r\n        this.roomStatusInfo.eDate = team.eDate;\r\n      }\r\n        \r\n      this.roomStatusVisible = true;\r\n    },\r\n    queryRoomList() {\r\n      const team = getTeam.call(this);\r\n      let q = {\r\n        buildingId: this.currentFloor?.buildingId,\r\n        type: this.currentFloor?.typeValue,\r\n        sDate: team ? team.sDate : this.startTime,\r\n        eDate: team ? team.eDate : this.endTime\r\n      };\r\n      if (_.isFunction(this.apiRoomStatus.query)) {\r\n        let add = this.apiRoomStatus.query();\r\n        q = customAssign(q, add);\r\n      }\r\n      q = dsf.mix(q, {\r\n        reserveId: this.activeTeam?.reserveId\r\n      });\r\n      this.$http.get(this.apiRoomStatus.url, q)\r\n        .done(res => {\r\n          this.originFloorList = res.success ? res.data : [];\r\n        })\r\n        .always(() => {\r\n          this.firstQueryRoomList = false;\r\n        })\r\n    },\r\n    drop2room(person, room) {\r\n      const roomId = room[this.mid];\r\n      this.loadingRoomId.push(roomId);\r\n        \r\n      const q = {\r\n        personId: person.personId,\r\n        personName: person.personName,\r\n        sexValue: person.sexValue,\r\n        sexText: person.sexText,\r\n        reserveId: person.reserveId,\r\n        roomId: roomId\r\n      }\r\n      this.$http.post(this.apiTeamCheckin.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      }).done(res => {\r\n        if (!res.success) {\r\n          dsf.layer.message(res.message, false);\r\n          return\r\n        }\r\n        dsf.layer.message(\"入住成功\");\r\n        eventBus.emit(eventBusEvent.refreshGroupList);\r\n        this.queryRoomList();\r\n      })\r\n        .error(err => {\r\n          dsf.layer.message(\"入住失败\", false)\r\n        })\r\n        .always(() => {\r\n          let index = this.loadingRoomId.findIndex(a => a === roomId);\r\n          this.loadingRoomId.splice(index, 1);\r\n        })\r\n    },\r\n    createInteraction() {\r\n      const self = this;\r\n      $(\".floor-container .room\").droppable({\r\n        addClasses: false,\r\n        tolerance: \"pointer\",\r\n        over(evt, ui) {\r\n          console.log(\"droppable over\")\r\n          const seatDOM = $(evt.target);\r\n          seatDOM.css({\"box-shadow\": \"0 0 5px inset #409eff\"})\r\n        },\r\n        drop(evt, ui) {\r\n          const seatDOM = $(evt.target);\r\n          seatDOM.css(\"box-shadow\", \"none\");\r\n          const seatId = seatDOM.data(\"id\");\r\n          const personId = ui.helper.data(\"id\");\r\n          //如果当前座位已经处于loading状态则返回\r\n          if (self.loadingRoomId.includes(seatId)) return;\r\n            \r\n          const seat = self.roomObj[seatId];\r\n          const person = self.personObj[personId];\r\n            \r\n            \r\n          let isError = false; //是否可以入住\r\n          if (_.isFunction(self.dropAble)) {\r\n            isError = self.dropAble(person, seat);\r\n          }\r\n            \r\n          if (isError) {\r\n            const temp = {\r\n              type: \"warning\",\r\n            }\r\n            dsf.layer.confirm(Object.assign(isError, temp))\r\n            return\r\n          }\r\n            \r\n          self.drop2room(person, seat);\r\n        },\r\n        out(evt, ui) {\r\n          const seatDOM = $(evt.target);\r\n          seatDOM.css(\"box-shadow\", \"none\");\r\n        }\r\n      })\r\n        \r\n    },\r\n    closeDialog(){\r\n      this.activeRoomId= ''\r\n      this.queryRoomList()\r\n    },\r\n  }\r\n}\r\n  \r\nfunction getTeam() {\r\n  if (!this.activeTeamId) return false;\r\n  return this.personList.find(a => a.teamId === this.activeTeamId)\r\n}\r\n  \r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resetGroupRoomBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resetGroupRoomBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./resetGroupRoomBox.vue?vue&type=template&id=038ddf54&\"\nimport script from \"./resetGroupRoomBox.vue?vue&type=script&lang=js&\"\nexport * from \"./resetGroupRoomBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('038ddf54')) {\n      api.createRecord('038ddf54', component.options)\n    } else {\n      api.reload('038ddf54', component.options)\n    }\n    module.hot.accept(\"./resetGroupRoomBox.vue?vue&type=template&id=038ddf54&\", function () {\n      api.rerender('038ddf54', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/resetGroupRoomBox.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [\n    _c(\"div\", { staticClass: \"top-tool\" }, [\n      _c(\"div\", { staticClass: \"title\" }, [_vm._v(_vm._s(_vm.title))]),\n      _c(\n        \"div\",\n        { staticClass: \"sec-box\" },\n        [\n          _c(\n            \"dsf-button\",\n            {\n              attrs: { loading: _vm.btnLoading.occupied },\n              on: {\n                click: function($event) {\n                  return _vm.preClick(\"resetOccupiedRoom\")\n                }\n              }\n            },\n            [_vm._v(\"重置已配房源\")]\n          ),\n          _c(\n            \"dsf-button\",\n            {\n              attrs: { loading: _vm.btnLoading.checked },\n              on: {\n                click: function($event) {\n                  return _vm.preClick(\"resetCheckedRoom\")\n                }\n              }\n            },\n            [_vm._v(\"重置已选房源\")]\n          ),\n          _c(\n            \"dsf-button\",\n            {\n              attrs: { loading: _vm.btnLoading.sure },\n              on: {\n                click: function($event) {\n                  return _vm.preClick(\"sureRoomResource\")\n                }\n              }\n            },\n            [_vm._v(\"确定分配\")]\n          ),\n          _c(\n            \"dsf-button\",\n            {\n              attrs: { loading: _vm.btnLoading.auto },\n              on: {\n                click: function($event) {\n                  return _vm.preClick(\"autoRoomResource\")\n                }\n              }\n            },\n            [_vm._v(\"自动分配\")]\n          )\n        ],\n        1\n      )\n    ]),\n    _c(\n      \"div\",\n      { staticClass: \"msg-box\" },\n      [\n        _c(\"color-state-list\", {\n          attrs: { \"room-state-list\": _vm.roomStateList }\n        }),\n        _c(\n          \"div\",\n          { staticClass: \"msg\" },\n          [\n            _c(\"label\", [_vm._v(\"已分配\")]),\n            _vm._l(_vm.computeAssign, function(item, it) {\n              return _c(\"span\", { key: it }, [\n                _vm._v(_vm._s(item.name) + \"：\"),\n                _c(\"b\", [_vm._v(_vm._s(item.num))]),\n                _vm._v(\"间\")\n              ])\n            })\n          ],\n          2\n        )\n      ],\n      1\n    ),\n    _c(\"div\", { staticClass: \"msg-box\" }, [\n      _c(\"div\", { staticClass: \"msg\" }, [\n        _c(\"label\", [_vm._v(\"当前团体：\")]),\n        _c(\"span\", [_vm._v(_vm._s(_vm.team.teamName))]),\n        _c(\"span\", { staticClass: \"time\" }, [_vm._v(_vm._s(_vm.team.sDate))]),\n        _vm._v(\"至 \"),\n        _c(\"span\", { staticClass: \"time\" }, [_vm._v(_vm._s(_vm.team.eDate))])\n      ]),\n      _c(\n        \"div\",\n        { staticClass: \"msg\" },\n        [\n          _c(\"label\", [_vm._v(\"该次需要\")]),\n          _vm._l(_vm.computeReserve, function(item, it) {\n            return _c(\"span\", { key: it }, [\n              _vm._v(_vm._s(item.name) + \"：\"),\n              _c(\"b\", [_vm._v(_vm._s(item.num))]),\n              _vm._v(\"间\")\n            ])\n          }),\n          _c(\"span\", [_vm._v(\"共\" + _vm._s(_vm.allNeedReserve) + \"间客房\")])\n        ],\n        2\n      ),\n      _c(\n        \"div\",\n        { staticClass: \"msg\" },\n        [\n          _c(\"label\", [_vm._v(\"已选取\")]),\n          _c(\"span\", [\n            _vm._v(\"床位：\"),\n            _c(\"b\", { staticClass: \"blue\" }, [\n              _vm._v(_vm._s(_vm.chosenBedNum))\n            ]),\n            _vm._v(\"个\")\n          ]),\n          _vm._l(_vm.chosenRoomNum, function(item, it) {\n            return _c(\"span\", { key: it }, [\n              _vm._v(_vm._s(item.name) + \"：\"),\n              _c(\"b\", { staticClass: \"blue\" }, [\n                _vm._v(_vm._s(_vm.msgChosenNum[item.code]))\n              ]),\n              _vm._v(\"间\")\n            ])\n          })\n        ],\n        2\n      )\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"top-tool\">\r\n      <div class=\"title\">{{title}}</div>\r\n      <div class=\"sec-box\">\r\n        <dsf-button :loading=\"btnLoading.occupied\" @click=\"preClick('resetOccupiedRoom')\">重置已配房源</dsf-button>\r\n        <dsf-button :loading=\"btnLoading.checked\" @click=\"preClick('resetCheckedRoom')\">重置已选房源</dsf-button>\r\n        <dsf-button :loading=\"btnLoading.sure\" @click=\"preClick('sureRoomResource')\">确定分配</dsf-button>\r\n        <dsf-button :loading=\"btnLoading.auto\" @click=\"preClick('autoRoomResource')\">自动分配</dsf-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"msg-box\">\r\n      <color-state-list :room-state-list=\"roomStateList\"></color-state-list>\r\n      <div class=\"msg\">\r\n        <label>已分配</label>\r\n        <span v-for=\"(item, it) in computeAssign\" :key=\"it\">{{item.name}}：<b>{{item.num}}</b>间</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"msg-box\">\r\n      <div class=\"msg\">\r\n        <label>当前团体：</label>\r\n        <span>{{team.teamName}}</span>\r\n        <span class=\"time\">{{team.sDate}}</span>至\r\n        <span class=\"time\">{{team.eDate}}</span>\r\n      </div>\r\n      <div class=\"msg\">\r\n        <label>该次需要</label>\r\n        <span v-for=\"(item, it) in computeReserve\" :key=\"it\">{{item.name}}：<b>{{item.num}}</b>间</span>\r\n        <span>共{{allNeedReserve}}间客房</span>\r\n      </div>\r\n      <div class=\"msg\">\r\n        <label>已选取</label>\r\n        <span>床位：<b class=\"blue\">{{chosenBedNum}}</b>个</span>\r\n        <span v-for=\"(item, it) in chosenRoomNum\" :key=\"it\">{{item.name}}：<b class=\"blue\">{{msgChosenNum[item.code]}}</b>间</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport colorStateList from \"_platform/pc/dormitory/room/colorStateList\";\r\nimport inlineSelectBox from \"_platform/pc/dormitory/room/inlineSelectBox\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {customAssign, assign} from \"_platform/pc/dormitory/func\";\r\n  \r\nexport default {\r\n  name: \"allocationTopTool\",\r\n  inject: [\"rightConfigPointer\"],\r\n  components: {\r\n    colorStateList,\r\n    inlineSelectBox\r\n  },\r\n  computed: {\r\n    rightConfig(){\r\n      return this.rightConfigPointer()\r\n    },\r\n    roomTypeObj() {\r\n      let obj = {}\r\n      for (let i = 0; i < this.roomTypes.length; i++) {\r\n        let item = this.roomTypes[i];\r\n        if (obj[item.val]) {\r\n          dsf.error(\"roomTypes 有重复的val\");\r\n          return {}\r\n        }\r\n        obj[item.val] = item\r\n      }\r\n      return obj\r\n    },\r\n    ...mapState('dormitory', [\r\n      \"chosenRoomId\",\r\n      \"roomObj\",\r\n      \"roomStateList\"\r\n    ]),\r\n    chosenRoomNum(){\r\n      return this.roomTypes.filter(a => this.msgChosenNum[a.code] > 0)\r\n    },\r\n    computeReserve(){\r\n      let arr = [];\r\n      for (let i=0; i<this.roomTypes.length; i++){\r\n        let a = this.roomTypes[i];\r\n        let num = this.mReserve[a.code]\r\n        if (!num || num <= 0 ) continue;\r\n        let obj = {\r\n          name: a.name,\r\n          num: num\r\n        }\r\n        arr.push(obj)\r\n      }\r\n      return arr\r\n    },\r\n    computeAssign(){\r\n      let arr = [];\r\n      for (let i=0; i<this.roomTypes.length; i++){\r\n        let a = this.roomTypes[i];\r\n        let num = this.mAssign[a.code]\r\n        if (!num || num <= 0 ) continue;\r\n        let obj = {\r\n          name: a.name,\r\n          num: num\r\n        }\r\n        arr.push(obj)\r\n      }\r\n      return arr\r\n    },\r\n    chosenBedNum(){\r\n      if (_.isArray(this.chosenRoomId) && this.chosenRoomId.length > 0){\r\n        let num = 0;\r\n        this.chosenRoomId.forEach(a => {\r\n          num += parseInt(this.roomObj[a][\"beds\"])\r\n        })\r\n        return num\r\n      }\r\n      return 0\r\n    },\r\n    team(){\r\n      const q = this.$route.query;\r\n      return {\r\n        teamName: q.name,\r\n        sDate: decodeURIComponent(q.sDate),\r\n        eDate: decodeURIComponent(q.eDate)\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      title: \"\",\r\n      roomTypes: null,\r\n      apiRoomReserveInfo: null,\r\n  \r\n      //项目属性\r\n      btnLoading: {\r\n        occupied: false,\r\n        checked: false,\r\n        sure: false,\r\n        auto: false\r\n      },\r\n      msgChosenNum: {},\r\n      mReserve: {},     //需预留的房间\r\n      mAssign: {},      //已分配的房间\r\n      allNeedReserve: null,       //总共需要预留的房间\r\n    }\r\n  },\r\n  watch: {\r\n    chosenRoomId(val) {\r\n      this.computeRoomNum(val)\r\n    }\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig, ['roomStateList']);\r\n    this.queryReserveInfo();\r\n  },\r\n  methods: {\r\n    preClick(type) {\r\n      let temp = type === \"autoRoomResource\"? this.mReserve: this.btnLoading;\r\n      eventBus.emit(eventBusEvent[type], temp);\r\n    },\r\n    computeRoomNum(checkedArr) {\r\n      this.msgChosenNum = {};\r\n      for (let i = 0; i < checkedArr.length; i++) {\r\n        let roomId = checkedArr[i]\r\n        let room = this.roomObj[roomId];\r\n        let code = this.roomTypeObj[room.roomType].code;\r\n        this.msgChosenNum[code] = (this.msgChosenNum[code] && this.msgChosenNum[code] > 0) ? this.msgChosenNum[code] + 1 : 1\r\n      }\r\n    },\r\n    queryReserveInfo(){\r\n      let q = {}\r\n      if (_.isFunction(this.apiRoomReserveInfo.query)) {\r\n        const add = this.apiRoomReserveInfo.query();\r\n        q = customAssign(q, add);\r\n      }\r\n      this.$http.get(this.apiRoomReserveInfo.url, q).done(res => {\r\n        this.mReserve = res.data.reserve;\r\n        this.mAssign = res.data.assign;\r\n          \r\n        //计算总共需要预留的房间\r\n        let a = 0;\r\n        for (let i=0; i<this.roomTypes.length; i++){\r\n          let item = this.roomTypes[i];\r\n          a += parseInt(this.mReserve[item.code])\r\n        }\r\n        this.allNeedReserve = a\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./allocationTopTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./allocationTopTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./allocationTopTool.vue?vue&type=template&id=755863fe&\"\nimport script from \"./allocationTopTool.vue?vue&type=script&lang=js&\"\nexport * from \"./allocationTopTool.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('755863fe')) {\n      api.createRecord('755863fe', component.options)\n    } else {\n      api.reload('755863fe', component.options)\n    }\n    module.hot.accept(\"./allocationTopTool.vue?vue&type=template&id=755863fe&\", function () {\n      api.rerender('755863fe', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/allocationTopTool.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"floor-container allocation\" },\n    [\n      _c(\"floor-box\", {\n        attrs: {\n          \"floor-list\": _vm.floorList,\n          \"chosen-room-id\": _vm.chosenRoomId,\n          \"active-room-id\": _vm.activeRoomId,\n          \"loading-room-id\": _vm.loadingRoomId,\n          \"multiple-choose\": true\n        },\n        on: {\n          \"update:chosenRoomId\": function($event) {\n            _vm.chosenRoomId = $event\n          },\n          \"update:chosen-room-id\": function($event) {\n            _vm.chosenRoomId = $event\n          },\n          \"update:activeRoomId\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"update:active-room-id\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"click-room\": _vm.clickRoom\n        }\n      }),\n      _c(\"action-dialog\", {\n        attrs: {\n          title: \"自动分配房间\",\n          visible: _vm.autoDialogVisible,\n          width: \"30%\"\n        },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.autoDialogVisible = $event\n          },\n          save: _vm.saveAuto\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"body\",\n            fn: function() {\n              return [\n                _c(\n                  \"el-form\",\n                  {\n                    ref: \"form\",\n                    staticClass: \"auto-checkin-form\",\n                    attrs: { model: _vm.form, \"label-width\": \"80px\" }\n                  },\n                  _vm._l(_vm.roomTypes, function(item, it) {\n                    return _c(\n                      \"el-form-item\",\n                      { key: it, attrs: { label: item.name } },\n                      [\n                        _c(\"el-input-number\", {\n                          attrs: { controls: false, precision: 0 },\n                          model: {\n                            value: _vm.form[item.code],\n                            callback: function($$v) {\n                              _vm.$set(_vm.form, item.code, $$v)\n                            },\n                            expression: \"form[item.code]\"\n                          }\n                        })\n                      ],\n                      1\n                    )\n                  }),\n                  1\n                )\n              ]\n            },\n            proxy: true\n          }\n        ])\n      }),\n      _c(\"room-history-dialog\", {\n        attrs: { visible: _vm.roomStatusVisible, info: _vm.roomStatusInfo },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.roomStatusVisible = $event\n          },\n          \"dialog-close\": function($event) {\n            _vm.activeRoomId = \"\"\n          }\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"floor-container allocation\">\r\n    <floor-box\r\n      :floor-list=\"floorList\"\r\n      :chosen-room-id.sync=\"chosenRoomId\"\r\n      :active-room-id.sync=\"activeRoomId\"\r\n      :loading-room-id=\"loadingRoomId\"\r\n      :multiple-choose=\"true\"\r\n      @click-room=\"clickRoom\"\r\n    ></floor-box>\r\n    \r\n    <action-dialog\r\n      title=\"自动分配房间\"\r\n      :visible.sync=\"autoDialogVisible\"\r\n      width=\"30%\"\r\n      @save=\"saveAuto\"\r\n    >\r\n      <template #body>\r\n        <el-form ref=\"form\" :model=\"form\" class=\"auto-checkin-form\" label-width=\"80px\">\r\n          <el-form-item v-for=\"(item, it) in roomTypes\" :key=\"it\" :label=\"item.name\">\r\n            <el-input-number v-model=\"form[item.code]\" :controls=\"false\" :precision=\"0\"></el-input-number>\r\n          </el-form-item>\r\n        </el-form>\r\n      </template>\r\n    </action-dialog>\r\n    \r\n    <room-history-dialog\r\n      :visible.sync=\"roomStatusVisible\"\r\n      :info=\"roomStatusInfo\"\r\n      @dialog-close=\"activeRoomId= ''\"\r\n    ></room-history-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport floorBox from \"_platform/pc/dormitory/room/floorBox\";\r\nimport actionDialog from \"_platform/pc/dormitory/dialog/actionDialog\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport ActionDialog from \"_platform/pc/dormitory/dialog/actionDialog\";\r\nimport {customAssign, filterOriginFloor, assign} from \"_platform/pc/dormitory/func\";\r\nimport roomHistoryDialog from \"_platform/pc/dormitory/dialog/roomHistoryDialog\";\r\n  \r\nexport default {\r\n  name: \"allocationRoomBox\",\r\n  inject: [\"rightConfigPointer\"],\r\n  props: {\r\n    queryTime: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          sDate: \"\",\r\n          eDate: \"\"\r\n        }\r\n      }\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      //配置属性\r\n      apiRoomStatus: null,\r\n      roomTypes: null,\r\n      apiResetRoomStatus: null,\r\n      apiAssignRoomStatus: null,\r\n      apiAutoAssign: null,\r\n        \r\n      //项目属性\r\n      startTime: \"\",\r\n      endTime: \"\",\r\n      originFloorList: [],\r\n      chosenRoomId: [],     //选择的roomId\r\n      activeRoomId: \"\",     //激活的roomId\r\n      loadingRoomId: [],\r\n      autoDialogVisible: false,\r\n      form: {},\r\n      roomStatusVisible: false,\r\n      roomStatusInfo: {}\r\n    }\r\n  },\r\n  computed: {\r\n    rightConfig() {\r\n      return this.rightConfigPointer()\r\n    },\r\n    mid() {\r\n      return this.apiRoomStatus.roomIdAlias;\r\n    },\r\n    mnum() {\r\n      return this.apiRoomStatus.roomNumAlias;\r\n    },\r\n    floorList(){\r\n      return filterOriginFloor(this.originFloorList, this.roomStateList)\r\n    },\r\n    ...mapState('dormitory', [\r\n      \"currentFloor\",\r\n      \"roomStateList\"\r\n    ]),\r\n  },\r\n  watch: {\r\n    currentFloor() {\r\n      this.queryRoomList()\r\n    },\r\n    roomStateList(){\r\n      this.chosenRoomId = [];\r\n    }\r\n  },\r\n  components: {\r\n    roomHistoryDialog,\r\n    ActionDialog,\r\n    floorBox,\r\n    actionDialog\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig, ['roomStateList']);\r\n    const currentTime = new Date().Format(\"yyyy-MM-dd\");\r\n    this.startTime = currentTime + \" 00:00:00\";\r\n    this.endTime = currentTime + \" 23:59:59\";\r\n  },\r\n  mounted() {\r\n    eventBus.on(eventBusEvent.resetOccupiedRoom, (btnLoading) => {\r\n      this.preResetOccupiedRoom(btnLoading)\r\n    })\r\n    eventBus.on(eventBusEvent.resetCheckedRoom, (btnLoading) => {\r\n      if (!this.chosenRoomId || this.chosenRoomId.length === 0) {\r\n        dsf.layer.message(\"未选择任何房间\", false)\r\n        return\r\n      }\r\n      this.resetCheckedRoom(btnLoading)\r\n    })\r\n    eventBus.on(eventBusEvent.sureRoomResource, btnLoading => {\r\n      this.preSureRoomResource(btnLoading)\r\n    })\r\n    eventBus.on(eventBusEvent.autoRoomResource, mRserve => {\r\n      let obj = {};\r\n      for (let i = 0; i < this.roomTypes.length; i++) {\r\n        let item = this.roomTypes[i];\r\n        let num = mRserve[item.code];\r\n        obj[item.code] = (num && +num > 0) ? +num : undefined\r\n      }\r\n      this.form = obj;\r\n      this.autoDialogVisible = true\r\n    })\r\n  },\r\n  methods: {\r\n    clickRoom(room) {\r\n      this.roomStatusInfo = {\r\n        roomId: room[this.mid],\r\n        roomName: room[this.mnum],\r\n        emptyBedNum: room.beds,\r\n        ...this.queryTime\r\n      }\r\n      this.roomStatusVisible = true;\r\n    },\r\n      \r\n    queryRoomList() {\r\n      let q = {\r\n        ...this.currentFloor,\r\n        sDate: this.startTime,\r\n        eDate: this.endTime\r\n      };\r\n      if (_.isFunction(this.apiRoomStatus.query)) {\r\n        let add = this.apiRoomStatus.query();\r\n        q = customAssign(q, add);\r\n      }\r\n        \r\n      this.$http.get(this.apiRoomStatus.url, q).done(res => {\r\n        this.originFloorList = res.success ? res.data : [];\r\n        this.chosenRoomId = [];\r\n      })\r\n    },\r\n    preResetOccupiedRoom(btnLoading) {\r\n      dsf.layer.confirm({\r\n        message: \"该操作会重置所有已分配的房源，是否继续？\"\r\n      }).then(() => {\r\n        this.resetOccupiedRoom(btnLoading);\r\n      })\r\n        .catch(() => {\r\n        })\r\n    },\r\n    resetOccupiedRoom(btnLoading) {\r\n      btnLoading.occupied = true;\r\n      let q = {};\r\n      if (_.isFunction(this.apiResetRoomStatus.query)) {\r\n        const add = this.apiResetRoomStatus.query();\r\n        q = Object.assign({}, q, add)\r\n      }\r\n        \r\n      this.$http.post(this.apiResetRoomStatus.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      })\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return;\r\n          }\r\n          dsf.layer.message(\"重置已分配房源成功\");\r\n          this.queryRoomList();\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"重置已分配房源失败\", false);\r\n        })\r\n        .always(() => {\r\n          btnLoading.occupied = false\r\n        })\r\n    },\r\n    resetCheckedRoom(btnLoading) {\r\n      btnLoading.checked = true;\r\n      this.loadingRoomId = this.chosenRoomId;\r\n      let q = {\r\n        roomIds: this.chosenRoomId\r\n      };\r\n      if (_.isFunction(this.apiResetRoomStatus.query)) {\r\n        const add = this.apiResetRoomStatus.query();\r\n        q = Object.assign({}, q, add)\r\n      }\r\n        \r\n      this.$http.post(this.apiResetRoomStatus.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      })\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return;\r\n          }\r\n          dsf.layer.message(\"所有选择的房源，重置成功\");\r\n          this.queryRoomList();\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"重置已选择房源失败\", false);\r\n        })\r\n        .always(() => {\r\n          btnLoading.checked = false;\r\n          this.loadingRoomId = [];\r\n        })\r\n    },\r\n    preSureRoomResource(btnLoading) {\r\n      if (!this.chosenRoomId || this.chosenRoomId.length === 0) {\r\n        dsf.layer.message(\"未选择任何房间\", false)\r\n        return\r\n      }\r\n        \r\n      const roomObjs = getRoomObjs(this.floorList, this.mid);\r\n      const passRoomId = [];\r\n      let couldRooms = \"\";    //可以分配的房间\r\n      let unRooms = \"\";       //不能分配的房间\r\n      this.chosenRoomId.forEach(id => {\r\n        const room = roomObjs[id];\r\n        if (room.statusValue !== 1) {\r\n          unRooms += \"<span>\" + room[this.mnum] + \"</span>\";\r\n        } else {\r\n          passRoomId.push(id);\r\n          couldRooms += \"<span>\" + room[this.mnum] + \"</span>\";\r\n        }\r\n      })\r\n        \r\n      //没有不能分配的房间，则直接进行分配\r\n      if (unRooms.length === 0) {\r\n        this.sureRoomResource(btnLoading);\r\n        return\r\n      }\r\n        \r\n      const unHtml = `<p class=\"room-msg un-pass\">${unRooms}</p>`;\r\n      const passHtml = `<p class=\"room-msg pass\">${couldRooms}</p>`;\r\n      const msg = passRoomId.length === 0 ? \"没有可以分配的房间\" : `是否继续分配以下房间？${passHtml}`\r\n      dsf.layer.confirm({\r\n        message: `以下房间不可以被分配：${unHtml}${msg}`,\r\n        customClass: \"dormitory-restore-select-room-confirm\"\r\n      }).then(() => {\r\n        this.chosenRoomId = passRoomId;\r\n        if (passRoomId.length > 0){\r\n          this.sureRoomResource(btnLoading);\r\n        }\r\n      }).catch(() => {\r\n        console.log(\"取消分配\")\r\n      })\r\n    },\r\n    sureRoomResource(btnLoading) {\r\n      btnLoading.sure = true;\r\n      this.loadingRoomId = this.chosenRoomId;\r\n      let q = {\r\n        roomIds: this.chosenRoomId\r\n      };\r\n      if (_.isFunction(this.apiAssignRoomStatus.query)) {\r\n        const add = this.apiAssignRoomStatus.query();\r\n        q = Object.assign({}, q, add)\r\n      }\r\n        \r\n      this.$http.post(this.apiAssignRoomStatus.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      })\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return;\r\n          }\r\n          dsf.layer.message(\"所有选择的房源，分配成功\");\r\n          this.queryRoomList();\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"分配已选择房源失败\", false);\r\n        })\r\n        .always(() => {\r\n          btnLoading.sure = false;\r\n          this.loadingRoomId = [];\r\n        })\r\n    },\r\n    saveAuto(btnLoading) {\r\n      btnLoading.save = true;\r\n      const arr = [];\r\n      for (let i = 0; i < this.roomTypes.length; i++) {\r\n        let room = this.roomTypes[i];\r\n        if (!this.form[room.code] || parseInt(this.form[room.code]) <= 0) continue;\r\n        let obj = {\r\n          type: room.val,\r\n          amount: this.form[room.code]\r\n        }\r\n          \r\n        arr.push(obj);\r\n      }\r\n      let q = {\r\n        roomTypes: arr\r\n      }\r\n      if (_.isFunction(this.apiAutoAssign.query)) {\r\n        const add = this.apiAutoAssign.query();\r\n        q = Object.assign({}, q, add)\r\n      }\r\n        \r\n      this.$http.post(this.apiAutoAssign.url, JSON.stringify(q), {\r\n        headers: {\"Content-Type\": \"application/json; charset=utf-8\"}\r\n      })\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(res.message, false);\r\n            return;\r\n          }\r\n          this.autoDialogVisible = false;\r\n          dsf.layer.message(\"自动分配房源成功\");\r\n          this.queryRoomList();\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"自动分配房源失败\", false);\r\n        })\r\n        .always(() => {\r\n          btnLoading.save = false;\r\n        })\r\n        \r\n    },\r\n  }\r\n}\r\n  \r\nfunction getRoomObjs(floorList, roomId) {\r\n  const obj = {};\r\n  for (let i = 0; i < floorList.length; i++) {\r\n    const floor = floorList[i];\r\n    for (let j = 0; j < floor.roomDtos.length; j++) {\r\n      const room = floor.roomDtos[j];\r\n      obj[room[roomId]] = room\r\n    }\r\n  }\r\n  return obj\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./allocationRoomBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./allocationRoomBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./allocationRoomBox.vue?vue&type=template&id=3f17ea38&\"\nimport script from \"./allocationRoomBox.vue?vue&type=script&lang=js&\"\nexport * from \"./allocationRoomBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3f17ea38')) {\n      api.createRecord('3f17ea38', component.options)\n    } else {\n      api.reload('3f17ea38', component.options)\n    }\n    module.hot.accept(\"./allocationRoomBox.vue?vue&type=template&id=3f17ea38&\", function () {\n      api.rerender('3f17ea38', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/allocationRoomBox.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"floor-container\" },\n    [\n      _c(\"floor-box\", {\n        attrs: {\n          \"floor-list\": _vm.floorList,\n          \"active-room-id\": _vm.activeRoomId\n        },\n        on: {\n          \"update:activeRoomId\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"update:active-room-id\": function($event) {\n            _vm.activeRoomId = $event\n          },\n          \"click-room\": _vm.clickRoom\n        }\n      }),\n      _c(\"room-history-dialog\", {\n        attrs: { visible: _vm.roomStatusVisible, info: _vm.roomStatusInfo },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.roomStatusVisible = $event\n          },\n          \"dialog-close\": _vm.onCloseDialog\n        }\n      }),\n      _c(\"action-dialog\", {\n        attrs: {\n          title: \"房间动态信息\",\n          visible: _vm.roomMonthVisible,\n          \"no-footer\": true\n        },\n        on: {\n          \"update:visible\": function($event) {\n            _vm.roomMonthVisible = $event\n          },\n          \"dialog-close\": _vm.onCloseDialog\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"inner\",\n            fn: function() {\n              return [\n                _c(\"div\", { staticClass: \"month-box\" }, [\n                  _c(\"div\", { staticClass: \"month-title\" }, [\n                    _c(\"span\", [_vm._v(_vm._s(_vm.monthRoomInfo.title))]),\n                    _c(\"span\", [_vm._v(_vm._s(_vm.monthRoomInfo.type))])\n                  ]),\n                  _c(\n                    \"div\",\n                    { staticClass: \"month-body\" },\n                    _vm._l(_vm.monthArr, function(item, it) {\n                      return _c(\"div\", { key: it, style: _vm.mSty(item) }, [\n                        _vm._v(_vm._s(item.text))\n                      ])\n                    }),\n                    0\n                  )\n                ]),\n                _c(\n                  \"div\",\n                  { staticClass: \"month-footer\" },\n                  [\n                    _c(\"color-state-list\", {\n                      attrs: {\n                        \"room-state-list\": _vm.monthStateList,\n                        \"check-able\": false\n                      }\n                    })\n                  ],\n                  1\n                )\n              ]\n            },\n            proxy: true\n          }\n        ])\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"floor-container\">\r\n    <floor-box\r\n      :floor-list=\"floorList\"\r\n      :active-room-id.sync=\"activeRoomId\"\r\n      @click-room=\"clickRoom\"\r\n    ></floor-box>\r\n    <room-history-dialog\r\n      :visible.sync=\"roomStatusVisible\"\r\n      :info=\"roomStatusInfo\"\r\n      @dialog-close=\"onCloseDialog\"\r\n    ></room-history-dialog>\r\n    <action-dialog\r\n      title=\"房间动态信息\"\r\n      :visible.sync=\"roomMonthVisible\"\r\n      :no-footer=\"true\"\r\n      @dialog-close=\"onCloseDialog\"\r\n    >\r\n      <template #inner>\r\n        <div class=\"month-box\">\r\n          <div class=\"month-title\">\r\n            <span>{{monthRoomInfo.title}}</span>\r\n            <span>{{monthRoomInfo.type}}</span>\r\n          </div>\r\n          <div class=\"month-body\">\r\n            <div v-for=\"(item, it) in monthArr\" :key=\"it\" :style=\"mSty(item)\">{{item.text}}</div>\r\n          </div>\r\n        </div>\r\n  \r\n        <div class=\"month-footer\">\r\n          <color-state-list :room-state-list=\"monthStateList\" :check-able=\"false\"></color-state-list>\r\n        </div>\r\n      </template>\r\n    </action-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport roomHistoryDialog from \"_platform/pc/dormitory/dialog/roomHistoryDialog\";\r\nimport floorBox from \"_platform/pc/dormitory/room/floorBox\";\r\nimport actionDialog from \"_platform/pc/dormitory/dialog/actionDialog\";\r\nimport colorStateList from \"_platform/pc/dormitory/room/colorStateList\";\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/pc/dormitory/constant\";\r\nimport {customAssign, filterOriginFloor, assign} from \"_platform/pc/dormitory/func\";\r\n  \r\nexport default {\r\n  name: \"roomBox\",\r\n  inject: ['rightConfigPointer'],\r\n  props: {\r\n    queryTime: {\r\n      type: Object,\r\n      default(){\r\n        return {\r\n          sDate: \"\",\r\n          eDate: \"\"\r\n        }\r\n      }\r\n    },\r\n    treeList:{\r\n      type: Array,\r\n    },\r\n    // roomStateList: {\r\n    //   type: Array,\r\n    //   default() {\r\n    //     return [];\r\n    //   }\r\n    // },\r\n  },\r\n  data() {\r\n    return {\r\n      //配置项属性\r\n      apiRoomStatus: null,\r\n      apiOneMonthRoomInfo: null,\r\n        \r\n      //项目属性\r\n      originFloorList: [],\r\n      roomStatusVisible: false,\r\n      roomStatusInfo: {},\r\n      activeRoomId: \"\",   //激活的roomId\r\n      timeDistance: 0,    //点击的时间间隔\r\n      timeTicker: null,   //倒计时的计时器\r\n  \r\n      roomMonthVisible: false,\r\n      monthRoomInfo: {},\r\n      monthArr: [],\r\n    }\r\n  },\r\n  computed: {\r\n    rightConfig(){\r\n      return this.rightConfigPointer()\r\n    },\r\n    mchildren() {\r\n      return this.apiRoomStatus.childrenAlias\r\n    },\r\n    mroomNum() {\r\n      return this.apiRoomStatus.roomNumAlias\r\n    },\r\n    mroomId() {\r\n      return this.apiRoomStatus.roomIdAlias\r\n    },\r\n    monthStateList(){\r\n      return this.roomStateList.slice(0, 3);\r\n    },\r\n    floorList(){\r\n      return filterOriginFloor(this.originFloorList, this.roomStateList)\r\n    },\r\n    ...mapState('dormitory', [\r\n      \"currentFloor\",\r\n      \"roomStateList\"\r\n    ])\r\n  },\r\n  components: {\r\n    roomHistoryDialog,\r\n    floorBox,\r\n    actionDialog,\r\n    colorStateList\r\n  },\r\n  watch: {\r\n    currentFloor() {\r\n      this.queryRoomList()\r\n    },\r\n  },\r\n  created() {\r\n    // Object.assign(this, this.rightConfig);\r\n    assign(this, this.rightConfig, ['roomStateList']);\r\n  },\r\n  beforeDestroy(){\r\n    if (this.timeTicker){\r\n      clearTimeout(this.timeTicker);\r\n      this.timeTicker = null;\r\n    }\r\n  },\r\n  mounted() {\r\n    eventBus.on(eventBusEvent.queryRoomList, () => {\r\n      this.queryRoomList()\r\n    })\r\n  },\r\n    \r\n  methods: {\r\n    clickRoom(item) {\r\n      this.timeDistance += 1;\r\n        \r\n      if (!this.timeTicker){\r\n        this.timeTicker = setTimeout(()=>{\r\n          if (this.timeDistance >= 2){\r\n            this.dbClickRoom(item);\r\n          }\r\n          else {\r\n            this.singleClickRoom(item);\r\n          }\r\n            \r\n          this.timeDistance = 0\r\n          clearTimeout(this.timeTicker);\r\n          this.timeTicker = null;\r\n        }, 250)\r\n      }\r\n    },\r\n    dbClickRoom(item){\r\n      let q = {\r\n        roomId: item[this.mroomId]\r\n      }\r\n      this.$http.get(this.apiOneMonthRoomInfo.url, q).done(res => {\r\n        if (!res.success){\r\n          dsf.layer.message(\"查询此房间一个月房态失败：\\n\" + res.message, false);\r\n          return\r\n        }\r\n          \r\n        this.monthRoomInfo = {\r\n          title: `${item.buildingText} / ${item.floorText} / ${item.name}`,\r\n          type: item.roomText\r\n        };\r\n          \r\n        let data = res.data;\r\n        if (_.isFunction(this.apiOneMonthRoomInfo.callback)){\r\n          data = this.apiOneMonthRoomInfo.callback(data)\r\n        }\r\n          \r\n        this.monthArr = data;\r\n        this.roomMonthVisible = true;\r\n      })\r\n    },\r\n    singleClickRoom(item){\r\n      this.roomStatusInfo = {\r\n        roomId: item[this.mroomId],\r\n        roomName: item[this.mroomNum],\r\n        emptyBedNum: item.beds,\r\n        ...this.queryTime\r\n      }\r\n      this.roomStatusVisible = true;\r\n    },\r\n    queryRoomList() {\r\n      let q = {\r\n        ...this.currentFloor,\r\n      };\r\n      if (_.isFunction(this.apiRoomStatus.query)){\r\n        let add = this.apiRoomStatus.query();\r\n        q = customAssign(q, add);\r\n      }\r\n      q = Object.assign({}, q, this.queryTime);\r\n        \r\n      this.$http.get(this.apiRoomStatus.url, q).done(res => {\r\n        this.originFloorList = res.success? res.data: [];\r\n        this.activeRoomId = \"\";\r\n      })\r\n    },\r\n    onCloseDialog(){\r\n      this.activeRoomId = \"\";\r\n    },\r\n    mSty(item){\r\n      return {\r\n        backgroundColor: item.bgColor\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stateRoomBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stateRoomBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./stateRoomBox.vue?vue&type=template&id=4a7ba05b&\"\nimport script from \"./stateRoomBox.vue?vue&type=script&lang=js&\"\nexport * from \"./stateRoomBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4a7ba05b')) {\n      api.createRecord('4a7ba05b', component.options)\n    } else {\n      api.reload('4a7ba05b', component.options)\n    }\n    module.hot.accept(\"./stateRoomBox.vue?vue&type=template&id=4a7ba05b&\", function () {\n      api.rerender('4a7ba05b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/room/stateRoomBox.vue\"\nexport default component.exports","<template>\r\n  <div class=\"ds-dormitory-container\">\r\n    <left-menu :title=\"leftMenuTitle\">\r\n      <template #inner>\r\n        <component ref=\"left\" :is=\"dynamicLeft\" v-bind.sync=\"commonProps\"></component>\r\n      </template>\r\n    </left-menu>\r\n    <div class=\"ds-dormitory-right\">\r\n      <div class=\"top-tool-container\">\r\n        <component ref=\"top\" :is=\"dynamicTop\" v-bind.sync=\"commonProps\"></component>\r\n      </div>\r\n      <component ref=\"room\" :is=\"dynamicRoom\" v-bind.sync=\"commonProps\"></component>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {customAssign, DateFormat} from \"_platform/pc/dormitory/func\";\r\nimport leftMenu from \"_platform/pc/dormitory/room/leftMenu\";\r\nimport guestsTopTool from \"_platform/pc/dormitory/room/guestsTopTool\";\r\nimport resetGroupTopTool from \"_platform/pc/dormitory/room/resetGroupTopTool\";\r\nimport treeList from \"_platform/pc/dormitory/room/treeList\";\r\nimport roomBox from \"_platform/pc/dormitory/room/roomBox\";\r\nimport groupTopTool from \"_platform/pc/dormitory/room/groupTopTool\";\r\nimport groupList from \"_platform/pc/dormitory/room/groupList\";\r\nimport groupRoomBox from \"_platform/pc/dormitory/room/groupRoomBox\";\r\nimport resetGroupRoomBox from \"_platform/pc/dormitory/room/resetGroupRoomBox\";\r\nimport allocationTopTool from \"_platform/pc/dormitory/room/allocationTopTool\";\r\nimport allocationRoomBox from \"_platform/pc/dormitory/room/allocationRoomBox\";\r\nimport stateRoomBox from \"_platform/pc/dormitory/room/stateRoomBox\";\r\nimport ConfigBuilder from \"_platform/designer/seat/util/configBuilder.js\";\r\n  \r\nexport default {\r\n  name: \"DsfDormitory\",\r\n  provide() {\r\n    return {\r\n      dormitoryRoot: this,\r\n      leftConfigPointer: () => this.leftConfig,\r\n      rightConfigPointer: () => this.rightConfig\r\n    };\r\n  },\r\n  components: {\r\n    leftMenu\r\n  },\r\n  data() {\r\n    return {\r\n      leftMenuTitle: \"\",\r\n      //共用的props\r\n      commonProps: {\r\n        queryTime: {}, //查询时间\r\n        treeList: [], //左侧楼层树（散客入住时用）\r\n        personObj: {}, //左侧人员对象（团体入住时用）\r\n        personList: [], //左侧人员列表（团体入住时用）\r\n      },\r\n        \r\n      //动态组件\r\n      dynamicLeft: null,\r\n      dynamicTop: null,\r\n      dynamicRoom: null,\r\n        \r\n      //配置文件\r\n      leftConfig: null,\r\n      rightConfig: null\r\n    };\r\n  },\r\n  watch: {\r\n    \"$route.fullPath\"() {\r\n      if (getRightLayoutConfig) {\r\n        this.rightConfig = new ConfigBuilder(getRightLayoutConfig(), this.$route.query.opt);\r\n      }\r\n    },\r\n    \"$route.query.opt\"() {\r\n      this.createDormitory()\r\n    }\r\n  },\r\n  methods: {\r\n    reset() {\r\n      loop(this, 'reset');\r\n    },\r\n    initGuestLayout() {\r\n      this.dynamicTop = guestsTopTool;\r\n      this.dynamicLeft = treeList;\r\n      this.dynamicRoom = roomBox;\r\n    },\r\n    initGroup() {\r\n      this.dynamicTop = groupTopTool;\r\n      this.dynamicLeft = groupList;\r\n      this.dynamicRoom = groupRoomBox;\r\n    },\r\n    initAllocation() {\r\n      this.dynamicTop = allocationTopTool;\r\n      this.dynamicLeft = treeList;\r\n      this.dynamicRoom = allocationRoomBox;\r\n    },\r\n    initStatus() {\r\n      this.dynamicTop = guestsTopTool;\r\n      this.dynamicLeft = treeList;\r\n      this.dynamicRoom = stateRoomBox;\r\n    },\r\n    initResetGroup() {\r\n      this.dynamicTop = resetGroupTopTool;\r\n      this.dynamicLeft = groupList;\r\n      this.dynamicRoom = resetGroupRoomBox;\r\n    },\r\n    renderInner() {\r\n      //Date 原型链上添加时间格式化方法\r\n      DateFormat();\r\n      this.commonProps.queryTime = getDefaultTime.call(this);\r\n      const q = this.$route.query.opt;\r\n      console.log(q)\r\n      switch (q) {\r\n      case \"guests\":\r\n        this.initGuestLayout();\r\n        break;\r\n      case \"group\":\r\n        this.initGroup();\r\n        break;\r\n      case \"allocation\":\r\n        this.initAllocation();\r\n        break;\r\n      case \"roomStatus\":\r\n        this.initStatus();\r\n        break;\r\n      case \"resetGroup\":\r\n        this.initResetGroup();\r\n        break;\r\n      }\r\n        \r\n      const {title} = this.leftConfig;\r\n      const {roomStateList} = this.rightConfig;\r\n      this.leftMenuTitle = title;\r\n      this.$store.commit(\"dormitory/changeRoomStateList\", roomStateList)\r\n        \r\n      this.$nextTick(() => {\r\n        $(window).off(\"scroll\").on(\"scroll\", function () {\r\n          let left = $(window).scrollLeft();\r\n          $(\".top-tool-container\").css(\"margin-left\", -left);\r\n        });\r\n      });\r\n    },\r\n    createDormitory() {\r\n      eventBus.clear();   //清除所有的监听\r\n      this.$store.commit(\"dormitory/activeTeamId\", \"\")\r\n      this.leftConfig = new ConfigBuilder(leftTreeConfig, this.$route.query.opt);\r\n      this.rightConfig = new ConfigBuilder(getRightLayoutConfig(), this.$route.query.opt);\r\n      this.renderInner();\r\n    },\r\n  },\r\n  created() {\r\n    const leftConfigUrl = dsf.url.getWebPath(\"$/seat_config/dormitory/leftTree.js\");\r\n    const rightLayoutUrl = dsf.url.getWebPath(\"$/seat_config/dormitory/rightLayout.js\");\r\n    this.$http.importFiles([leftConfigUrl, rightLayoutUrl]).then((res) => {\r\n      this.createDormitory()\r\n    });\r\n  }\r\n};\r\n  \r\nfunction getDefaultTime() {\r\n  const sys_start = dsf.config.setting_sgcp_sdate;\r\n  const sys_end = dsf.config.setting_sgcp_edate;\r\n  const toDay = new Date().Format(\"yyyy-MM-dd\");\r\n    \r\n  const tomorrow = new Date(new Date().getTime() + 24 * 60 * 60 * 1000).Format(\"yyyy-MM-dd\");\r\n  const mStart = sys_start ? toDay + \" \" + sys_start : toDay + \" \" + \"00:00:00\";\r\n  const mEnd = sys_end ? tomorrow + \" \" + sys_end : toDay + \" \" + \"23:59:59\";\r\n    \r\n  let originTime = {\r\n    sDate: mStart,\r\n    eDate: mEnd\r\n  };\r\n    \r\n  const {defaultQueryByUrl: defaultQuery} = this.rightConfig;\r\n  let mTime = {\r\n    sDate: decodeURIComponent(dsf.url.queryString(defaultQuery[\"startTime\"])),\r\n    eDate: decodeURIComponent(dsf.url.queryString(defaultQuery[\"endTime\"]))\r\n  };\r\n    \r\n  return customAssign(originTime, mTime);\r\n}\r\n\r\nfunction loop(map, funName) {\r\n  Object.values(map.$refs).forEach(vm => {\r\n    if (vm?.$refs) {\r\n      loop(vm, funName);\r\n        vm[funName]?.()\r\n    }\r\n  });\r\n}\r\n</script>","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dormitory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dormitory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dormitory.vue?vue&type=template&id=35c151a6&\"\nimport script from \"./dormitory.vue?vue&type=script&lang=js&\"\nexport * from \"./dormitory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('35c151a6')) {\n      api.createRecord('35c151a6', component.options)\n    } else {\n      api.reload('35c151a6', component.options)\n    }\n    module.hot.accept(\"./dormitory.vue?vue&type=template&id=35c151a6&\", function () {\n      api.rerender('35c151a6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"pc/dormitory/dormitory.vue\"\nexport default component.exports"],"sourceRoot":""}