{"version":3,"sources":["webpack://platform/./designer/seat/util/eventBus.js","webpack://platform/./designer/seat/constant.js","webpack://platform/./designer/seat/func.js","webpack://platform/./node_modules/core-js/modules/es.object.get-own-property-names.js","webpack://platform/./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack://platform/./designer/seat/util/configBuilder.js","webpack://platform/./designer/seat/printingDesign.vue?33fb","webpack://platform/./node_modules/core-js/modules/es.string.italics.js","webpack://platform/./assets/styles/themes/seatDesign/image.png","webpack://platform/./designer/seat/printingDesign.vue?8299","webpack://platform/./designer/seat/printingDesign.vue?e1ee","webpack://platform/./designer/seat/printingDesign.vue?43c0","webpack://platform/./designer/seat/printingDesign/topTools.vue?c8dc","webpack://platform/./designer/seat/printingDesign/widthInput.vue?8c5a","webpack://platform/designer/seat/printingDesign/widthInput.vue","webpack://platform/./designer/seat/printingDesign/widthInput.vue?8aca","webpack://platform/./designer/seat/printingDesign/widthInput.vue","webpack://platform/designer/seat/printingDesign/topTools.vue","webpack://platform/./designer/seat/printingDesign/topTools.vue?03ad","webpack://platform/./designer/seat/printingDesign/topTools.vue","webpack://platform/./designer/seat/printingDesign/leftTools.vue?3781","webpack://platform/designer/seat/printingDesign/leftTools.vue","webpack://platform/./designer/seat/printingDesign/leftTools.vue?f023","webpack://platform/./designer/seat/printingDesign/leftTools.vue","webpack://platform/./designer/seat/printingDesign/rightTools.vue?816b","webpack://platform/designer/seat/printingDesign/rightTools.vue","webpack://platform/./designer/seat/printingDesign/rightTools.vue?5654","webpack://platform/./designer/seat/printingDesign/rightTools.vue","webpack://platform/./designer/seat/printingDesign/canvas.vue?51e7","webpack://platform/./designer/seat/printingDesign/region.vue?230e","webpack://platform/designer/seat/printingDesign/region.vue","webpack://platform/./designer/seat/printingDesign/region.vue?b8e2","webpack://platform/./designer/seat/printingDesign/region.vue","webpack://platform/designer/seat/printingDesign/canvas.vue","webpack://platform/./designer/seat/printingDesign/canvas.vue?ebe3","webpack://platform/./designer/seat/printingDesign/canvas.vue","webpack://platform/./designer/seat/printingDesign/seatItem.vue?a067","webpack://platform/designer/seat/printingDesign/seatItem.vue","webpack://platform/./designer/seat/printingDesign/seatItem.vue?f078","webpack://platform/./designer/seat/printingDesign/seatItem.vue","webpack://platform/designer/seat/printingDesign.vue","webpack://platform/./designer/seat/printingDesign.vue?d8dd","webpack://platform/./designer/seat/printingDesign.vue"],"names":["EventBus","this","events","event","callback","undefined","arr","_","isArray","push","params","eventDeal","forEach","a","Object","entries","eventBus","window","$simpleEventBus","uploadUrl","eventBusEvent","uploadImg","formData","self","config","headers","transformRequest","data","loadingIndex","dsf","layer","loading","$http","post","done","res","isDef","success","message","error","err","always","closeLoading","updateGroupMemberPosition","group","member","totalTop","height","rows","totalLeft","width","cols","eachTop","eachLeft","item","rowIndex","top","floor","colIndex","left","getMemberSpaceLeft","getMemberSpaceTop","forzenOtherItems","isForzenMemberSty","items","el","isFrozenSty","selectedItems","select","id","groups","length","isFrozenMemberSty","unForzenAllItems","createUploadFileInput","inputName","$","remove","upDOM","document","createElement","type","accept","style","display","name","body","appendChild","changePanelSizeForBgImage","isEmpty","postData","backgroundImage","bg_w","bg_h","box_w","canvasSet","scale","css","absolutePath","sysBindShortKey","keyStack","stopList","keyCode","keyNum2Str","on","evt","index","indexOf","keyStr","join","includes","stopPropagation","preventDefault","emit","KEY_CTRL_D","KEY_DELETE","pull","newRelative","seat","person","pid","parentId","belong","currentState","stateList","seatNum","fails","getOwnPropertyNames","f","FAILS_ON_PRIMITIVES","target","stat","forced","toIndexedObject","$getOwnPropertyNames","toString","windowNames","getWindowNames","it","slice","module","exports","call","ConfigBuilder","business","alert","key","msg","title","Error","content","i","locals","add","default","createHTML","forcedStringHTMLMethod","proto","italics","render","_vm","_h","$createElement","_c","_self","staticClass","_b","saveLayout","scopedSlots","_u","fn","proxy","staticRenderFns","_withStripped","_l","layout","buttons","button","$index","attrs","icon","text","click","$event","handler","value","showBorderLine","change","changeShowBorder","class","active","_v","hasBg","inline","model","label","controls","precision","placeholder","$$v","$set","expression","disabled","props","required","Boolean","watch","$store","commit","val","deep","component","options","__file","url","components","widthInput","normalButtons","computed","$nextTick","created","methods","backStep","$emit","restoreLayout","compelPanelSize","panelSize","updateBG","files","append","result","setBgImage2Panel","levelUp","levelDown","exportImage","addClass","download","href","dataUrl","removeChild","removeClass","loader","image","src","getWebPath","relativePath","onload","naturalWidth","naturalHeight","onerror","leftMenu","activeName","staticStyle","padding","itemindex","_s","originWidth","originHeight","mounted","draggable","addClasses","helper","cursor","cursorAt","stop","x","pageX","y","pageY","uuid","angle","zIndex","temp","bgImg","assign","basic","fontFamily","fontSize","letterSpacing","lineHeight","color","textAlign","bold","italic","underline","fontStyFrozen","showTool","showGroup","groupVisible","placement","trigger","closeGroup","domProps","textContent","getInfoTypeName","info","size","v","min","updateWidth","updateHeight","max","slot","fontFamilyList","input","_e","uploadSingle","getImagePath","alt","visiblePointer","oldVisibleStatus","activeId","fill","pointer","path","canvasCss","mousedown","_k","preRegion","apply","arguments","visible","regionVisible","region","regionRect","panelSty","_t","regionSty","test","addEventListener","handleScroll","ctrlKey","wheelAction","newS","Math","round","sw","sh","l","t","handleMouseMove","downPos","movePos","abs","handleMouseUp","off","one","verLine","verLineSty","horLine","horLineSty","selectPosition","selectSty","selectMove","selectRotate","selectScale","getItemSty","preMove","dblclick","openEdit","preRotate","preScale","getFontSty","Array","rectMinSize","transform","newSeatItem","seatItem","regionPosition","restSelectPostion","filter","getSelectPosition","seatInfo","beforeDestroy","sty","background","getBgSty","fontSty","whiteSpace","fontStyle","fontWeight","textDecoration","clearSelectedItems","handleScale","action","basePoint","afterScaleRect","handleUp","debounce","setRect2Active","handleMove","localPos","parseInt","old_x","moveDir","old_y","isNumber","handleRotate","rotateRect","center","p","math","getRotatedPiont","c","oldSeat","offsetAngle","seatObj","scaleRect","oldRect","newRect","mousePosition","newSeat","deleteActiveSeatItem","b","textArea","e","_submit","bind","focus","judgePos","regionLeft","anchor","regionTop","regionWid","regionHit","small_position","convertLocalCoordinate","large_position","d","getRectPoint","obj","lt","lb","rt","rb","tar","pos","xCenter","yCenter","right","bottom","getRectBasePointByScale","rect","minSize","cos","dist","sin","w","h","sc","U","K","S","__parseIntSize","ceil","getRatioBySeat2SelectBox","seats","selectBox","ratio","getNewSize","oldSelectBox","newSelectBox","_seat","ratioSize","sc1","__roundSize","getRectCenter","getPointRange","rectPoints","forIn","min_x","max_x","min_y","max_y","getExtNum","num","getOtherSeatPoints","otherSeat","map","computeAlignLine","xy","otherXy","times","getPointsXy","points","uniqWith","isEqual","topTools","leftTools","rightTools","canvas","_id","importFiles","layoutUrl","then","saveByPub","bindShortKey","saveByDev","purePostData","localStorage","setItem","$router","replace","JSON","stringify","layoutConfig","saveLayoutUrl","getSeatInfo","getInfoPub","getInfoDev","getPurePostData"],"mappings":"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","file":"modules/platform/js/dsf-platform.printingDesign.js","sourcesContent":["class EventBus {\r\n  constructor() {\r\n    this.events = {};\r\n  }\r\n  \r\n  listen(event, callback){\r\n    if (this.events[event] === undefined){\r\n      this.events[event] = [callback];\r\n    }\r\n    else {\r\n      const arr = this.events[event];\r\n      if (!_.isArray(arr)){\r\n        console.log(`请使用 on 来监听 ${event} 事件`)\r\n        return\r\n      }\r\n      arr.push(callback)\r\n    }\r\n  }\r\n  dispatch(event, params){\r\n    const eventDeal = this.events[event];\r\n    if (!eventDeal){\r\n      console.log(event + \"未使用listen 注册\")\r\n      return;\r\n    }\r\n    \r\n    if (!_.isArray(eventDeal)){\r\n      console.log(event + \"被on注册, 应使用emit触发\")\r\n      return\r\n    }\r\n    eventDeal.forEach(a => {\r\n      a(params)\r\n    })\r\n  }\r\n\r\n  on(event, callback)  {\r\n    if (this.events[event] === undefined){\r\n      this.events[event] = callback\r\n    }\r\n    else if (_.isArray(this.events[event])){\r\n      console.log(`请使用 listen 来监听 ${event} 事件`);\r\n    }\r\n    else {\r\n      console.log(event + \" 监听器重名\");\r\n    }\r\n  }\r\n  emit(event, params) {\r\n    const eventDeal = this.events[event]\r\n    if (!eventDeal){\r\n      console.log(event + \"未使用on 注册\")\r\n      return;\r\n    }\r\n    if (_.isArray(eventDeal)){\r\n      console.log(event + \"被listen注册, 应使用dispatch触发\")\r\n      return\r\n    }\r\n  \r\n    eventDeal(params)\r\n  }\r\n  off(event) {\r\n    this.events[event] = undefined;\r\n  }\r\n  clear(){\r\n    this.events = {}\r\n  }\r\n\r\n  $getAllListener(){\r\n    return Object.entries(this.events)\r\n  }\r\n}\r\n\r\nconst eventBus = new EventBus();\r\nwindow.$simpleEventBus = eventBus;\r\nexport default eventBus","const uploadUrl = \"file/upload/\";\r\nconst eventBusEvent = {\r\n  //配置文件加载完成\r\n  \"CONFIG_FILE_LOADED\": \"config_file_loaded\",\r\n  \r\n  //seatDesign 有关的事件\r\n  \"KEY_DELETE\": \"key_delete\",\r\n  \"KEY_CTRL_D\":\"key_ctrl_d\",\r\n  \"BODY_EMPTY_CLICK\": \"body_empty_click\",\r\n  \"SEAT_POP\": \"seat_pop\",\r\n  \"GET_ACTIVE_SEAT\": \"get_active_seat\",\r\n  \"CLEAN_ALL_SEAT_NUM\": \"clean_all_seat_num\",\r\n  \"CLEAN_SELECT_SEAT_NUM\": \"clean_select_seat_num\",\r\n  \"AFTER_QUICK_ORDER\": \"after_quick_order\",\r\n  \r\n  //seatView 有关的事件\r\n  \"PERSON_REVERT_TREE\": \"person_revert_tree\",\r\n  \"LEFT_CLICK_SEAT\": \"left_click_seat\",\r\n  \"AUTO_SEAT\": \"auto_seat\",\r\n  \r\n  //printingDesign 有关的事件\r\n  \"LEVEL_UP\": \"level_up\",\r\n  \"LEVEL_DOWN\": \"level_down\"\r\n}\r\nexport {\r\n  uploadUrl,\r\n  eventBusEvent\r\n}","import {eventBusEvent, uploadUrl} from './constant'\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\n\r\n/*seatDesign 里面使用的方法*/\r\nexport function uploadImg(formData, callback) {\r\n  const self = this;\r\n  const config = {\r\n    headers: {'Content-Type': 'multipart/form-data'},\r\n    transformRequest: [function (data, headers) {\r\n      return data;\r\n    }],\r\n  };\r\n  \r\n  let loadingIndex = dsf.layer.loading();\r\n  self.$http.post(uploadUrl, formData, config)\r\n    .done(res => {\r\n      if (!dsf.isDef(res.data) || !res.success) {\r\n        dsf.layer.message(res.message, false);\r\n        callback && callback(\"error\")\r\n        return false\r\n      }\r\n      \r\n      callback && callback(res.data);\r\n    })\r\n    .error(err => {\r\n      dsf.layer.message(\"上传图片失败\", false);\r\n      callback && callback(\"error\");\r\n    })\r\n    .always(() => {\r\n      dsf.layer.closeLoading(loadingIndex);\r\n    })\r\n}\r\n\r\nexport function updateGroupMemberPosition(group) {\r\n  const member = group.member[0];\r\n  let totalTop = group.height - member.height * group.rows;\r\n  let totalLeft = group.width - member.width * group.cols;\r\n  let eachTop = group.rows > 1 ? totalTop / (group.rows - 1) : 0;\r\n  let eachLeft = group.cols > 1 ? totalLeft / (group.cols - 1) : 0;\r\n  group.member.forEach(item => {\r\n    if (item.rowIndex > 0) item.top = _.floor((item.height + eachTop) * item.rowIndex, 2);\r\n    if (item.colIndex > 0) item.left = _.floor((item.width + eachLeft) * item.colIndex, 2);\r\n  })\r\n}\r\n\r\nexport function getMemberSpaceLeft(group) {\r\n  const member = group.member[0];\r\n  let totalLeft = group.width - member.width * group.cols;\r\n  return group.cols === 1 ? 0 : _.floor(totalLeft / (group.cols - 1), 2)\r\n}\r\n\r\nexport function getMemberSpaceTop(group) {\r\n  const member = group.member[0];\r\n  let totalTop = group.height - member.height * group.rows;\r\n  return group.rows === 1 ? 0 : _.floor(totalTop / (group.rows - 1), 2)\r\n}\r\n\r\n//冻结其他对象(未被激活对象)的样式渲染\r\nexport function forzenOtherItems(isForzenMemberSty = true) {\r\n  this.items.forEach(el => {\r\n    el.isFrozenSty = true;\r\n    this.selectedItems.forEach(select => {\r\n      if (el.id === select.id) {\r\n        el.isFrozenSty = false\r\n      }\r\n    })\r\n  })\r\n  if (this?.groups?.length > 0) {\r\n    this.groups.forEach(el => {\r\n      el.isFrozenSty = true;\r\n      el.isFrozenMemberSty = true;\r\n      this.selectedItems.forEach(select => {\r\n        if (el.id === select.id) {\r\n          el.isFrozenSty = false\r\n          !isForzenMemberSty && (el.isFrozenMemberSty = false)\r\n        }\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\n//解冻所有对象,重新渲染\r\nexport function unForzenAllItems() {\r\n  this.items.forEach(el => {\r\n    el.isFrozenSty = false\r\n  })\r\n  this.groups.forEach(el => {\r\n    el.isFrozenSty = false;\r\n    el.isFrozenMemberSty = false;\r\n  })\r\n}\r\n\r\nexport function createUploadFileInput(inputName = \"dsf-seat-upload\") {\r\n  $(`input[name='${inputName}']`).remove();\r\n  let upDOM = document.createElement(\"input\");\r\n  upDOM.type = \"file\";\r\n  upDOM.accept = \"image/*\";\r\n  upDOM.style.display = \"none\"\r\n  upDOM.name = inputName;\r\n  document.body.appendChild(upDOM);\r\n  return upDOM\r\n}\r\n\r\nexport function changePanelSizeForBgImage() {\r\n  const self = this;\r\n  if (_.isEmpty(self.postData.backgroundImage)) return; //如果没有背景则返回\r\n  let bg_w = self.postData.backgroundImage.width;\r\n  let bg_h = self.postData.backgroundImage.height;\r\n  let box_w = self.postData.canvasSet.width || $(\".seat-designer-page\").width();   //若画布宽没有设置值\r\n  let scale = box_w / bg_w;\r\n  \r\n  self.postData.canvasSet.width = box_w;\r\n  self.postData.canvasSet.height = bg_h * scale;\r\n  $(\"#panel_bg\").css(\"background-image\", \"url(\" + self.postData.backgroundImage.absolutePath + \")\");\r\n}\r\n\r\nexport function sysBindShortKey(keyStack, stopList) {\r\n  let keyCode;\r\n  const keyNum2Str = (keyCode) => {\r\n    switch (keyCode) {\r\n    case 17:\r\n      keyCode = \"ctrl\";\r\n      break;\r\n    case 68:\r\n      keyCode = \"d\";\r\n      break;\r\n    case 65:\r\n      keyCode = \"a\";\r\n      break;\r\n    case 46:\r\n      keyCode = \"delete\";\r\n      break;\r\n    case 16:\r\n      keyCode = \"shift\";\r\n      break;\r\n    case 83:\r\n      keyCode = \"s\";\r\n      break;\r\n    default:\r\n      keyCode = null;\r\n    }\r\n    return keyCode\r\n  }\r\n  \r\n  $(\"body\").on(\"keydown\", function (evt) {\r\n    keyCode = keyNum2Str(evt.keyCode);\r\n    if (!keyCode) return;\r\n    let index = keyStack.indexOf(keyCode);\r\n    if (index === -1) keyStack.push(keyCode);\r\n    let keyStr = keyStack.join(\"-\");\r\n    if (stopList.includes(keyStr)) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n    }\r\n    \r\n    if (keyStr === \"ctrl-d\") {\r\n      eventBus.emit(eventBusEvent.KEY_CTRL_D);\r\n    }\r\n    if (keyStr === \"delete\") {\r\n      eventBus.emit(eventBusEvent.KEY_DELETE)\r\n    }\r\n  });\r\n  $(\"body\").on(\"keyup\", function (evt) {\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n    keyCode = keyNum2Str(evt.keyCode);\r\n    _.pull(keyStack, keyCode);   //删除对应的keyCode\r\n  });\r\n}\r\n\r\n\r\n/*seatView 里面使用的方法*/\r\n//创建一条新的人员入座记录\r\nexport function newRelative(seat, person) {\r\n  return {\r\n    id: seat.id,\r\n    pid: seat.parentId,\r\n    belong: seat.belong,\r\n    currentState: seat.stateList[1],\r\n    person: person,\r\n    seatNum: seat.seatNum\r\n  }\r\n}","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names-external').f;\n\n// eslint-disable-next-line es/no-object-getownpropertynames -- required for testing\nvar FAILS_ON_PRIMITIVES = fails(function () { return !Object.getOwnPropertyNames(1); });\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  getOwnPropertyNames: getOwnPropertyNames\n});\n","/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","export default class ConfigBuilder {\r\n  constructor(config, business) {\r\n    this.config = config;\r\n    if (!business){\r\n      this.alert(\"url里面缺少必要的opt参数\");\r\n    }\r\n    if (!this.config[business]) {\r\n      this.alert(`[${this.config.name}] url里面的opt参数没有对应的配置项`);\r\n    }\r\n    Object.getOwnPropertyNames(this.config[business]).forEach(key => {\r\n      this[key] = this.config[business][key];\r\n    })\r\n  }\r\n  \r\n  alert(msg){\r\n    dsf.layer.alert({\r\n      title: \"警告\",\r\n      type: \"warning\",\r\n      message: msg\r\n    });\r\n    throw new Error(msg)\r\n  }\r\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=style&index=0&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"003b4b0c\", content, false, {\"sourceMap\":false,\"shadowMode\":false});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=style&index=0&lang=scss&\", function() {\n     var newContent = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=style&index=0&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.italics` method\n// https://tc39.es/ecma262/#sec-string.prototype.italics\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('italics') }, {\n  italics: function italics() {\n    return createHTML(this, 'i', '', '');\n  }\n});\n","module.exports = __webpack_public_path__ + \"modules/platform/img/image.png\";","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-2!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--5-oneOf-1-4!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\nexport {};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ds-designer ds-seat-container ds-seat-design\" },\n    [\n      _c(\n        \"div\",\n        { staticClass: \"designer-head\" },\n        [\n          _c(\n            \"top-tools\",\n            _vm._b(\n              { on: { \"save-layout\": _vm.saveLayout } },\n              \"top-tools\",\n              _vm.postData,\n              false,\n              true\n            )\n          )\n        ],\n        1\n      ),\n      _c(\"div\", { staticClass: \"designer-content\" }, [\n        _c(\n          \"div\",\n          { staticClass: \"seat-designer-center\" },\n          [\n            _c(\"left-tools\"),\n            _c(\"print-canvas\", {\n              scopedSlots: _vm._u([\n                {\n                  key: \"seat\",\n                  fn: function() {\n                    return [\n                      _c(\n                        \"seat-item\",\n                        _vm._b({}, \"seat-item\", _vm.postData, false, true)\n                      )\n                    ]\n                  },\n                  proxy: true\n                }\n              ])\n            }),\n            _c(\"right-tools\")\n          ],\n          1\n        )\n      ])\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"designer_tools\" },\n    [\n      _vm._l(_vm.layout.buttons, function(button, $index) {\n        return _c(\"DsfButton\", {\n          key: $index,\n          attrs: {\n            icon: button.icon,\n            text: button.text,\n            \"btn-style\": \"icon-text\"\n          },\n          on: {\n            click: function($event) {\n              return button.handler($event, button)\n            }\n          }\n        })\n      }),\n      _c(\n        \"div\",\n        { staticClass: \"switch-warp\" },\n        [\n          _c(\"el-switch\", {\n            attrs: { value: _vm.showBorderLine },\n            on: { change: _vm.changeShowBorder }\n          }),\n          _c(\"span\", { class: { active: _vm.showBorderLine } }, [\n            _vm._v(\"边线框\")\n          ])\n        ],\n        1\n      ),\n      _c(\"width-input\", {\n        attrs: { \"canvas-set\": _vm.canvasSet, \"has-bg\": _vm.hasBg }\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"input-box\" },\n    [\n      _c(\n        \"el-form\",\n        {\n          staticClass: \"demo-form-inline\",\n          attrs: { inline: true, model: _vm.canvasSet, \"label-width\": \"100px\" }\n        },\n        [\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"画布宽\" } },\n            [\n              _c(\"el-input-number\", {\n                attrs: { controls: false, precision: 0, placeholder: \"自适应\" },\n                model: {\n                  value: _vm.canvasSet.width,\n                  callback: function($$v) {\n                    _vm.$set(_vm.canvasSet, \"width\", $$v)\n                  },\n                  expression: \"canvasSet.width\"\n                }\n              })\n            ],\n            1\n          ),\n          _c(\n            \"el-form-item\",\n            { attrs: { label: \"画布高\" } },\n            [\n              _c(\"el-input-number\", {\n                attrs: {\n                  controls: false,\n                  disabled: _vm.hasBg,\n                  precision: 0,\n                  placeholder: \"自适应\"\n                },\n                model: {\n                  value: _vm.canvasSet.height,\n                  callback: function($$v) {\n                    _vm.$set(_vm.canvasSet, \"height\", $$v)\n                  },\n                  expression: \"canvasSet.height\"\n                }\n              })\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"input-box\">\r\n    <el-form :inline=\"true\" :model=\"canvasSet\" label-width=\"100px\" class=\"demo-form-inline\">\r\n      <el-form-item label=\"画布宽\">\r\n        <el-input-number v-model=\"canvasSet.width\" :controls=\"false\" :precision=\"0\" placeholder=\"自适应\"></el-input-number>\r\n      </el-form-item>\r\n      \r\n      <el-form-item label=\"画布高\">\r\n        <el-input-number v-model=\"canvasSet.height\" :controls=\"false\" :disabled=\"hasBg\" :precision=\"0\" placeholder=\"自适应\"></el-input-number>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"WidthInput\",\r\n  props:{\r\n    canvasSet: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    hasBg:{\r\n      type: Boolean\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n\r\n    }\r\n  },\r\n  watch: {\r\n    canvasSet: {\r\n      handler(val) {\r\n        const self = this;\r\n        const {width, height} = val;\r\n        const lef = $(\".seat-designer-page\").offset().left;\r\n        const top = $(\".seat-designer-page\").offset().top;\r\n        const screenHit = $(window).height();\r\n        const screenWid = $(window).width();\r\n        if (width && (width + lef > screenWid)) {\r\n          $(\".seat-designer-center\").css({\"overflow-x\": \"scroll\"});\r\n        } else {\r\n          $(\".seat-designer-center\").css({\"overflow-x\": \"auto\"});\r\n        }\r\n        if (height && (height + top > screenHit)) {\r\n          $(\".seat-designer-center\").css(\"overflow-y\", \"scroll\");\r\n        } else {\r\n          $(\".seat-designer-center\").css(\"overflow-y\", \"auto\");\r\n        }\r\n        self.$store.commit(\"printingDesign/changeCompelPanelSize\", val);\r\n      },\r\n      deep: true\r\n    },\r\n  },\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widthInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./widthInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./widthInput.vue?vue&type=template&id=11e374fc&\"\nimport script from \"./widthInput.vue?vue&type=script&lang=js&\"\nexport * from \"./widthInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('11e374fc')) {\n      api.createRecord('11e374fc', component.options)\n    } else {\n      api.reload('11e374fc', component.options)\n    }\n    module.hot.accept(\"./widthInput.vue?vue&type=template&id=11e374fc&\", function () {\n      api.rerender('11e374fc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/widthInput.vue\"\nexport default component.exports","<template>\r\n  <div class=\"designer_tools\">\r\n    <DsfButton\r\n      v-for=\"(button, $index) in layout.buttons\"\r\n      :key=\"$index\"\r\n      :icon=\"button.icon\"\r\n      :text=\"button.text\"\r\n      btn-style=\"icon-text\"\r\n      @click=\"button.handler($event, button)\"\r\n    />\r\n    \r\n    <div class=\"switch-warp\">\r\n      <el-switch\r\n        :value=\"showBorderLine\"\r\n        @change=\"changeShowBorder\"\r\n      />\r\n      <span :class=\"{active: showBorderLine}\">边线框</span>\r\n    </div>\r\n    \r\n    <width-input :canvas-set=\"canvasSet\" :has-bg=\"hasBg\"></width-input>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport html2canvas from 'html2canvas';\r\nimport {createUploadFileInput, uploadImg} from '../func'\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/designer/seat/constant\";\r\nimport {mapState} from 'vuex';\r\nimport widthInput from \"_platform/designer/seat/printingDesign/widthInput\";\r\n  \r\nexport default {\r\n  name: \"TopTools\",\r\n  props: {\r\n    backgroundImage: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          url: \"\",\r\n          width: 0,\r\n          height: 0,\r\n        }\r\n      }\r\n    },\r\n    canvasSet:{\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          width: undefined,\r\n          height: undefined,\r\n        }\r\n      }\r\n    },\r\n    hasBg: {\r\n      type: Boolean,\r\n      default: false\r\n    },   //是否有底图\r\n  },\r\n  components: {\r\n    widthInput,\r\n  },\r\n  data() {\r\n    return {\r\n      //普通情况下的按钮\r\n      normalButtons: [\r\n        {text: \"保存\", icon: \"baocun\", handler: this.saveLayout},\r\n        {text: \"底图\", icon: \"tupiantianjia\", handler: this.updateBG},\r\n        {text: \"复位\", icon: \"shuaxin\", handler: this.restoreLayout},\r\n        {text: \"上一层\", icon: \"zhiding1\", handler: this.levelUp},\r\n        {text: \"下一层\", icon: \"zhidi\", handler: this.levelDown},\r\n        {text: \"回退\", icon: \"shangyibu1\", handler: this.backStep},\r\n        {text: \"导出\", icon: \"yunduanxiazai\", handler: this.exportImage},\r\n      ],\r\n      layout: {\r\n        buttons: [],\r\n      },\r\n    }\r\n  },\r\n    \r\n  computed: {\r\n    ...mapState(\"printingDesign\", [\r\n      \"compelPanelSize\",\r\n      \"showBorderLine\"\r\n    ])\r\n  },\r\n  watch: {\r\n    \"canvasSet.width\"(val) {\r\n      if (!this.hasBg) return;\r\n      if (!val) {\r\n        this.$nextTick(() => {\r\n          let boxWid = $(\".seat-designer-page\").width();\r\n          let scale = boxWid / this.backgroundImage.width;\r\n          this.canvasSet.height = this.backgroundImage.height * scale;\r\n        });\r\n        return;\r\n      }\r\n      let scale = val / this.backgroundImage.width;\r\n      this.canvasSet.height = this.backgroundImage.height * scale;\r\n    },\r\n  },\r\n  created() {\r\n    this.layout.buttons = this.normalButtons;\r\n  },\r\n  methods: {\r\n    backStep() {\r\n    },\r\n    saveLayout() {\r\n      this.$emit(\"save-layout\")\r\n    },\r\n    restoreLayout() {\r\n      const panelSize = {\r\n        width: this.compelPanelSize.width,\r\n        height: this.compelPanelSize.height,\r\n        scale: 1,\r\n        left: 0,\r\n        top: 0,\r\n      }\r\n      this.$store.commit(\"printingDesign/changePanelSize\", panelSize);\r\n    },\r\n    updateBG() {\r\n      const self = this;\r\n      let upDOM = createUploadFileInput(\"dsf-seat-bg-upload\");\r\n      $(upDOM).on('change', function () {\r\n        if (!upDOM.files || upDOM.files.length === 0) return false;\r\n        const formData = new FormData();\r\n        formData.append(\"file\", upDOM.files[0]);\r\n        const callback = result => {\r\n          //清除创建的input\r\n          $(upDOM).val(\"\");\r\n          $(upDOM).remove();\r\n          upDOM = null;\r\n            \r\n          if (result === \"error\") {\r\n            self.$emit(\"update:hasBg\", false);\r\n            return false;\r\n          }\r\n          setBgImage2Panel.call(self, result[0]);\r\n        };\r\n        uploadImg.call(self, formData, callback)\r\n      })\r\n      $(upDOM).click();\r\n    },\r\n    levelUp(){\r\n      eventBus.emit(eventBusEvent.LEVEL_UP)\r\n    },\r\n    levelDown(){\r\n      eventBus.emit(eventBusEvent.LEVEL_DOWN)\r\n    },\r\n    changeShowBorder(val){\r\n      this.$store.commit(\"printingDesign/changeShowBorderLine\", val)\r\n    },\r\n    exportImage(){\r\n      const loader = dsf.layer.loading();\r\n      $(\".seat-designer-page .seat-box.border-dash\").addClass(\"border-none\");\r\n      const panelEl = document.getElementById(\"panel_outer\")\r\n      html2canvas(panelEl).then(function(canvas) {\r\n        const dataUrl = canvas.toDataURL(\"image/png\")\r\n        const a = document.createElement(\"a\");\r\n        a.style.display = \"none\"\r\n        a.download = \"证书套打.png\"\r\n        a.href = dataUrl;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        $(\".seat-designer-page .seat-box.border-dash\").removeClass(\"border-none\");\r\n        dsf.layer.closeLoading(loader);\r\n      });\r\n    }\r\n  }\r\n}\r\n  \r\nfunction setBgImage2Panel(data) {\r\n  const self = this;\r\n  let image = new Image();\r\n  image.src = dsf.url.getWebPath(data.relativePath);\r\n  image.onload = function () {\r\n    self.$emit(\"update:hasBg\", true);\r\n    self.$emit(\"update:backgroundImage\", {\r\n      width: image.naturalWidth,\r\n      height: image.naturalHeight,\r\n      relativePath: data.relativePath,\r\n      absolutePath: data.absolutePath\r\n    })\r\n  };\r\n  image.onerror = function () {\r\n    dsf.layer.message(\"图片加载失败\", false);\r\n    self.$emit(\"update:hasBg\", false);\r\n  }\r\n}\r\n\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topTools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./topTools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./topTools.vue?vue&type=template&id=114223de&\"\nimport script from \"./topTools.vue?vue&type=script&lang=js&\"\nexport * from \"./topTools.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('114223de')) {\n      api.createRecord('114223de', component.options)\n    } else {\n      api.reload('114223de', component.options)\n    }\n    module.hot.accept(\"./topTools.vue?vue&type=template&id=114223de&\", function () {\n      api.rerender('114223de', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/topTools.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"designer-left\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"designer-left-tools\" },\n      _vm._l(_vm.leftMenu.group, function(group, $index) {\n        return _c(\n          \"el-collapse\",\n          {\n            key: $index,\n            model: {\n              value: _vm.leftMenu.activeName,\n              callback: function($$v) {\n                _vm.$set(_vm.leftMenu, \"activeName\", $$v)\n              },\n              expression: \"leftMenu.activeName\"\n            }\n          },\n          [\n            _c(\n              \"el-collapse-item\",\n              { attrs: { title: group.title, name: group.title } },\n              [\n                _c(\n                  \"div\",\n                  {\n                    staticClass: \"ds-tools-group-content\",\n                    staticStyle: { padding: \"10px\" }\n                  },\n                  _vm._l(group.items, function(item, itemindex) {\n                    return _c(\n                      \"div\",\n                      {\n                        key: itemindex,\n                        staticClass: \"ds-tool-item\",\n                        attrs: { name: item.name, \"data-type\": item.type }\n                      },\n                      [_vm._v(\" \" + _vm._s(item.name) + \" \")]\n                    )\n                  }),\n                  0\n                )\n              ]\n            )\n          ],\n          1\n        )\n      }),\n      1\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"designer-left\">\r\n    <div class=\"designer-left-tools\">\r\n      <el-collapse v-for=\"(group, $index) in leftMenu.group\" :key=\"$index\" v-model=\"leftMenu.activeName\">\r\n        <el-collapse-item :title=\"group.title\" :name=\"group.title\">\r\n          <div class=\"ds-tools-group-content\" style=\"padding: 10px;\">\r\n            <div v-for=\"(item, itemindex) in group.items\" :key=\"itemindex\" class=\"ds-tool-item\" :name=\"item.name\" :data-type=\"item.type\">\r\n              {{ item.name }}\r\n            </div>\r\n          </div>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\n\r\nexport default {\r\n  name: \"LeftTools\",\r\n  data() {\r\n    return {\r\n      leftMenu: {\r\n        activeName: [\"对象\", \"辅助对象\", \"自定义对象\"],\r\n        group: [\r\n          {\r\n            title: '对象',\r\n            items: [\r\n              {\r\n                name: \"文字\",\r\n                type: \"text\"\r\n              },\r\n              {\r\n                name: \"图片\",\r\n                type: \"image\",\r\n              }\r\n            ]\r\n          },\r\n        ]\r\n      },\r\n      originWidth: 150,\r\n      originHeight: 150,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(\"printingDesign\", {\r\n      panelSize: \"panelSize\",\r\n      compelPanelSize: \"compelPanelSize\"\r\n    }),\r\n  },\r\n  mounted() {\r\n    const self = this;\r\n    $(\".ds-tool-item\").draggable({\r\n      addClasses: false,\r\n      helper() {\r\n        let txt = $(this).text();\r\n        return $(`<div class=\"drag-item\">${txt}</div>`)\r\n      },\r\n      cursor: \"default\",\r\n      cursorAt: {\r\n        top: -5,\r\n        left: -5\r\n      },\r\n      stop(evt, ui) {\r\n        //获取鼠标在画框里的位置\r\n        const pos = dsf.math.convertLocalCoordinate(\".seat-designer-page\", { x: evt.pageX, y: evt.pageY });\r\n        const canvasWid = self.compelPanelSize.width || $(\".seat-designer-page\").width();\r\n        const canvasHit = self.compelPanelSize.height || $(\".seat-designer-page\").height();\r\n\r\n        //判断鼠标位置是否处于画框区域\r\n        if ((pos.x >= 0 && pos.x <= canvasWid) && (pos.y >= 0 && pos.y <= canvasHit)) {\r\n          const type = $(evt.target).data(\"type\");\r\n\r\n          //获取创建seat时，鼠标在panel_outer 里面得位置\r\n          const pos = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n            x: evt.pageX,\r\n            y: evt.pageY\r\n          }, self.panelSize.scale);\r\n\r\n          const basic = {\r\n            id: dsf.uuid(),\r\n            type: type,\r\n            left: pos.x,\r\n            top: pos.y,\r\n            width: self.originWidth,\r\n            height: self.originHeight,\r\n            angle: 0,\r\n            isFrozenSty: false,   //是否冻结style\r\n            zIndex: 1\r\n          }\r\n\r\n          let temp;\r\n          if (type === \"image\") {\r\n            temp = {\r\n              bgImg: \"\",\r\n            }\r\n            Object.assign(basic, temp)\r\n          }\r\n          if (type === \"text\") {\r\n            temp = {\r\n              text: \"\",\r\n              fontFamily: \"Microsoft YaHei\",\r\n              fontSize: 20,\r\n              letterSpacing: 2,\r\n              lineHeight: 15,\r\n              color: \"#000\",\r\n              textAlign: \"center\",\r\n              bold: false,\r\n              italic: false,\r\n              underline: false,\r\n              fontStyFrozen: false,\r\n            }\r\n            Object.assign(basic, temp)\r\n          }\r\n\r\n          //添加seat到panel\r\n          self.$store.commit(\"printingDesign/addSeat2Panel\", basic);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./leftTools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./leftTools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./leftTools.vue?vue&type=template&id=016d87ec&\"\nimport script from \"./leftTools.vue?vue&type=script&lang=js&\"\nexport * from \"./leftTools.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('016d87ec')) {\n      api.createRecord('016d87ec', component.options)\n    } else {\n      api.reload('016d87ec', component.options)\n    }\n    module.hot.accept(\"./leftTools.vue?vue&type=template&id=016d87ec&\", function () {\n      api.rerender('016d87ec', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/leftTools.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.showTool\n    ? _c(\"div\", { staticClass: \"right-tool-box\" }, [\n        _c(\n          \"div\",\n          {\n            staticClass: \"box-item\",\n            on: {\n              click: function($event) {\n                return _vm.showGroup(0)\n              }\n            }\n          },\n          [\n            _c(\n              \"el-popover\",\n              {\n                attrs: {\n                  value: _vm.groupVisible[0],\n                  placement: \"left-start\",\n                  width: \"360\",\n                  trigger: \"manual\",\n                  \"popper-class\": \"ds-seat-design-popover\"\n                }\n              },\n              [\n                _c(\"div\", { staticClass: \"header\" }, [\n                  _vm._v(\" 度量 \"),\n                  _c(\"i\", {\n                    staticClass: \"el-icon-arrow-right\",\n                    on: {\n                      click: function($event) {\n                        return _vm.closeGroup(0)\n                      }\n                    }\n                  })\n                ]),\n                _c(\"div\", { staticClass: \"inner\" }, [\n                  _c(\"div\", { staticClass: \"title\" }, [\n                    _c(\"label\", { staticClass: \"label-box\" }, [\n                      _vm._v(\"当前对象：\")\n                    ]),\n                    _c(\"span\", {\n                      domProps: { textContent: _vm._s(_vm.getInfoTypeName()) }\n                    })\n                  ]),\n                  _c(\n                    \"div\",\n                    { staticClass: \"inner-item\" },\n                    [\n                      _c(\"label\", { staticClass: \"label-box\" }, [_vm._v(\"X\")]),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.left,\n                          size: \"mini\",\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return (_vm.info.left = v)\n                          }\n                        }\n                      }),\n                      _c(\n                        \"label\",\n                        {\n                          staticClass: \"label-box\",\n                          staticStyle: { \"margin-left\": \"5px\" }\n                        },\n                        [_vm._v(\"Y\")]\n                      ),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.top,\n                          size: \"mini\",\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return (_vm.info.top = v)\n                          }\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _c(\n                    \"div\",\n                    { staticClass: \"inner-item\" },\n                    [\n                      _c(\"label\", { staticClass: \"label-box\" }, [_vm._v(\"宽\")]),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.width,\n                          size: \"mini\",\n                          min: 0,\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return _vm.updateWidth(v)\n                          }\n                        }\n                      }),\n                      _c(\n                        \"label\",\n                        {\n                          staticClass: \"label-box\",\n                          staticStyle: { \"margin-left\": \"5px\" }\n                        },\n                        [_vm._v(\"高\")]\n                      ),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.height,\n                          size: \"mini\",\n                          min: 0,\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return _vm.updateHeight(v)\n                          }\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _c(\n                    \"div\",\n                    { staticClass: \"inner-item\" },\n                    [\n                      _c(\"label\", { staticClass: \"label-box\" }, [\n                        _vm._v(\"角度\")\n                      ]),\n                      _c(\"el-input-number\", {\n                        attrs: {\n                          value: _vm.info.angle,\n                          size: \"mini\",\n                          min: 0,\n                          max: 360,\n                          controls: false\n                        },\n                        on: {\n                          change: function(v) {\n                            return (_vm.info.angle = v)\n                          }\n                        }\n                      })\n                    ],\n                    1\n                  )\n                ]),\n                _c(\"i\", {\n                  staticClass: \"iconfont icon-resize-\",\n                  attrs: { slot: \"reference\" },\n                  slot: \"reference\"\n                })\n              ]\n            )\n          ],\n          1\n        ),\n        _vm.info.type === \"text\"\n          ? _c(\n              \"div\",\n              {\n                staticClass: \"box-item\",\n                on: {\n                  click: function($event) {\n                    return _vm.showGroup(1)\n                  }\n                }\n              },\n              [\n                _c(\n                  \"el-popover\",\n                  {\n                    attrs: {\n                      value: _vm.groupVisible[1],\n                      placement: \"left\",\n                      width: \"360\",\n                      trigger: \"manual\",\n                      \"popper-class\": \"ds-seat-design-popover\"\n                    }\n                  },\n                  [\n                    _c(\"div\", { staticClass: \"header\" }, [\n                      _vm._v(\" 属性 \"),\n                      _c(\"i\", {\n                        staticClass: \"el-icon-arrow-right\",\n                        on: {\n                          click: function($event) {\n                            return _vm.closeGroup(1)\n                          }\n                        }\n                      })\n                    ]),\n                    _c(\"div\", { staticClass: \"inner\" }, [\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"字体\")\n                          ]),\n                          _c(\n                            \"el-select\",\n                            {\n                              attrs: { value: _vm.info.fontFamily },\n                              on: {\n                                change: function(v) {\n                                  _vm.info.fontStyFrozen = false\n                                  _vm.info.fontFamily = v\n                                }\n                              }\n                            },\n                            _vm._l(_vm.fontFamilyList, function(item, it) {\n                              return _c(\"el-option\", {\n                                key: item.val,\n                                attrs: { value: item.val, label: item.text }\n                              })\n                            }),\n                            1\n                          )\n                        ],\n                        1\n                      ),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"颜色\")\n                          ]),\n                          _c(\"el-color-picker\", {\n                            attrs: { value: _vm.info.color },\n                            on: {\n                              \"active-change\": function(v) {\n                                _vm.info.fontStyFrozen = false\n                                _vm.info.color = v\n                              }\n                            }\n                          })\n                        ],\n                        1\n                      ),\n                      _c(\"div\", { staticClass: \"inner-item item-fill-row\" }, [\n                        _c(\"label\", { staticClass: \"label-box\" }, [\n                          _vm._v(\"大小\")\n                        ]),\n                        _c(\n                          \"div\",\n                          { staticClass: \"slider-warp\" },\n                          [\n                            _c(\"el-slider\", {\n                              attrs: {\n                                value: _vm.info.fontSize,\n                                \"show-input\": \"\",\n                                \"show-input-controls\": false\n                              },\n                              on: {\n                                input: function(v) {\n                                  _vm.info.fontStyFrozen = false\n                                  _vm.info.fontSize = v\n                                }\n                              }\n                            })\n                          ],\n                          1\n                        )\n                      ]),\n                      _c(\"div\", { staticClass: \"inner-item item-fill-row\" }, [\n                        _c(\"label\", { staticClass: \"label-box\" }, [\n                          _vm._v(\"行间距\")\n                        ]),\n                        _c(\n                          \"div\",\n                          { staticClass: \"slider-warp\" },\n                          [\n                            _c(\"el-slider\", {\n                              attrs: {\n                                value: _vm.info.lineHeight,\n                                \"show-input\": \"\",\n                                \"show-input-controls\": false,\n                                min: 10,\n                                max: 50\n                              },\n                              on: {\n                                input: function(v) {\n                                  _vm.info.fontStyFrozen = false\n                                  _vm.info.lineHeight = v\n                                }\n                              }\n                            })\n                          ],\n                          1\n                        )\n                      ]),\n                      _c(\"div\", { staticClass: \"inner-item item-fill-row\" }, [\n                        _c(\"label\", { staticClass: \"label-box\" }, [\n                          _vm._v(\"字间距\")\n                        ]),\n                        _c(\n                          \"div\",\n                          { staticClass: \"slider-warp\" },\n                          [\n                            _c(\"el-slider\", {\n                              attrs: {\n                                value: _vm.info.letterSpacing,\n                                \"show-input\": \"\",\n                                \"show-input-controls\": false,\n                                max: 50\n                              },\n                              on: {\n                                input: function(v) {\n                                  _vm.info.fontStyFrozen = false\n                                  _vm.info.letterSpacing = v\n                                }\n                              }\n                            })\n                          ],\n                          1\n                        )\n                      ]),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"效果\")\n                          ]),\n                          _c(\n                            \"el-button-group\",\n                            [\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: { active: _vm.info.italic },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.italic = !_vm.info.italic\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"zitixieti\" }\n                                  })\n                                ],\n                                1\n                              ),\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: { active: _vm.info.bold },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.bold = !_vm.info.bold\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"zitijiacu\" }\n                                  })\n                                ],\n                                1\n                              ),\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: { active: _vm.info.underline },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.underline = !_vm.info.underline\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"zitixiahuaxian\" }\n                                  })\n                                ],\n                                1\n                              )\n                            ],\n                            1\n                          )\n                        ],\n                        1\n                      ),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"对齐\")\n                          ]),\n                          _c(\n                            \"el-button-group\",\n                            [\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: {\n                                    active: _vm.info.textAlign === \"left\"\n                                  },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.textAlign = \"left\"\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"zuoduiqi\" }\n                                  })\n                                ],\n                                1\n                              ),\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: {\n                                    active: _vm.info.textAlign === \"center\"\n                                  },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.textAlign = \"center\"\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"juzhongduiqi\" }\n                                  })\n                                ],\n                                1\n                              ),\n                              _c(\n                                \"el-button\",\n                                {\n                                  class: {\n                                    active: _vm.info.textAlign === \"right\"\n                                  },\n                                  attrs: { size: \"mini\" },\n                                  on: {\n                                    click: function(v) {\n                                      _vm.info.fontStyFrozen = false\n                                      _vm.info.textAlign = \"right\"\n                                    }\n                                  }\n                                },\n                                [\n                                  _c(\"dsf-icon\", {\n                                    attrs: { name: \"youduiqi\" }\n                                  })\n                                ],\n                                1\n                              )\n                            ],\n                            1\n                          )\n                        ],\n                        1\n                      ),\n                      _c(\n                        \"div\",\n                        { staticClass: \"inner-item item-fill-row\" },\n                        [\n                          _c(\"label\", { staticClass: \"label-box\" }, [\n                            _vm._v(\"内容\")\n                          ]),\n                          _c(\"el-input\", {\n                            attrs: { type: \"textarea\", rows: 4 },\n                            model: {\n                              value: _vm.info.text,\n                              callback: function($$v) {\n                                _vm.$set(_vm.info, \"text\", $$v)\n                              },\n                              expression: \"info.text\"\n                            }\n                          })\n                        ],\n                        1\n                      )\n                    ]),\n                    _c(\"i\", {\n                      staticClass: \"iconfont icon-xingzhuang-wenzi\",\n                      attrs: { slot: \"reference\" },\n                      slot: \"reference\"\n                    })\n                  ]\n                )\n              ],\n              1\n            )\n          : _vm._e(),\n        _vm.info.type === \"image\"\n          ? _c(\n              \"div\",\n              {\n                staticClass: \"box-item\",\n                on: {\n                  click: function($event) {\n                    return _vm.showGroup(2)\n                  }\n                }\n              },\n              [\n                _c(\n                  \"el-popover\",\n                  {\n                    attrs: {\n                      value: _vm.groupVisible[2],\n                      placement: \"left-start\",\n                      width: \"365\",\n                      trigger: \"manual\",\n                      \"popper-class\": \"ds-seat-design-popover\"\n                    }\n                  },\n                  [\n                    _c(\"div\", { staticClass: \"header\" }, [\n                      _vm._v(\" 上传 \"),\n                      _c(\"i\", {\n                        staticClass: \"el-icon-arrow-right\",\n                        on: {\n                          click: function($event) {\n                            return _vm.closeGroup(2)\n                          }\n                        }\n                      })\n                    ]),\n                    _c(\"div\", { staticClass: \"inner\" }, [\n                      _c(\n                        \"div\",\n                        {\n                          staticClass: \"single-upload-box\",\n                          on: { click: _vm.uploadSingle }\n                        },\n                        [\n                          _vm.info.bgImg\n                            ? _c(\"img\", {\n                                attrs: {\n                                  src: _vm.getImagePath(_vm.info.bgImg),\n                                  alt: \"\"\n                                }\n                              })\n                            : _vm._e()\n                        ]\n                      )\n                    ]),\n                    _c(\"i\", {\n                      staticClass: \"iconfont icon-tupiantianjia\",\n                      attrs: { slot: \"reference\" },\n                      slot: \"reference\"\n                    })\n                  ]\n                )\n              ],\n              1\n            )\n          : _vm._e()\n      ])\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"showTool\" class=\"right-tool-box\">\r\n    <div class=\"box-item\" @click=\"showGroup(0)\">\r\n      <el-popover\r\n        :value=\"groupVisible[0]\"\r\n        placement=\"left-start\"\r\n        width=\"360\"\r\n        trigger=\"manual\"\r\n        popper-class=\"ds-seat-design-popover\"\r\n      >\r\n        <div class=\"header\">\r\n          度量\r\n          <i class=\"el-icon-arrow-right\" @click=\"closeGroup(0)\"></i>\r\n        </div>\r\n        <div class=\"inner\">\r\n          <div class=\"title\">\r\n            <label class=\"label-box\">当前对象：</label>\r\n            <span v-text=\"getInfoTypeName()\"></span>\r\n          </div>\r\n          <div class=\"inner-item\">\r\n            <label class=\"label-box\">X</label>\r\n            <el-input-number\r\n              :value=\"info.left\"\r\n              size=\"mini\"\r\n              :controls=\"false\"\r\n              @change=\"v => info.left = v\"\r\n            ></el-input-number>\r\n            <label style=\"margin-left: 5px\" class=\"label-box\">Y</label>\r\n            <el-input-number\r\n              :value=\"info.top\"\r\n              size=\"mini\"\r\n              :controls=\"false\"\r\n              @change=\"v => info.top = v\"\r\n            ></el-input-number>\r\n          </div>\r\n          <div class=\"inner-item\">\r\n            <label class=\"label-box\">宽</label>\r\n            <el-input-number\r\n              :value=\"info.width\"\r\n              size=\"mini\"\r\n              :min=\"0\"\r\n              :controls=\"false\"\r\n              @change=\"v => updateWidth(v)\"\r\n            ></el-input-number>\r\n            <label style=\"margin-left: 5px\" class=\"label-box\">高</label>\r\n            <el-input-number\r\n              :value=\"info.height\"\r\n              size=\"mini\"\r\n              :min=\"0\"\r\n              :controls=\"false\"\r\n              @change=\"v => updateHeight(v)\"\r\n            ></el-input-number>\r\n          </div>\r\n          <div class=\"inner-item\">\r\n            <label class=\"label-box\">角度</label>\r\n            <el-input-number\r\n              :value=\"info.angle\"\r\n              size=\"mini\"\r\n              :min=\"0\"\r\n              :max=\"360\"\r\n              :controls=\"false\"\r\n              @change=\"v => info.angle = v\"\r\n            ></el-input-number>\r\n          </div>\r\n        </div>\r\n        <i slot=\"reference\" class=\"iconfont icon-resize-\"></i>\r\n      </el-popover>\r\n    </div>\r\n    <div class=\"box-item\" v-if=\"info.type === 'text'\" @click=\"showGroup(1)\">\r\n      <el-popover\r\n        :value=\"groupVisible[1]\"\r\n        placement=\"left\"\r\n        width=\"360\"\r\n        trigger=\"manual\"\r\n        popper-class=\"ds-seat-design-popover\"\r\n      >\r\n        <div class=\"header\">\r\n          属性\r\n          <i class=\"el-icon-arrow-right\" @click=\"closeGroup(1)\"></i>\r\n        </div>\r\n        <div class=\"inner\">\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">字体</label>\r\n            <el-select :value=\"info.fontFamily\" @change=\"v => {info.fontStyFrozen=false; info.fontFamily = v}\">\r\n              <el-option\r\n                v-for=\"(item, it) in fontFamilyList\"\r\n                :value=\"item.val\"\r\n                :label=\"item.text\"\r\n                :key=\"item.val\"></el-option>\r\n            </el-select>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">颜色</label>\r\n            <el-color-picker :value=\"info.color\" @active-change=\"v => {info.fontStyFrozen = false; info.color=v}\"></el-color-picker>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">大小</label>\r\n            <div class=\"slider-warp\">\r\n              <el-slider\r\n                :value=\"info.fontSize\"\r\n                show-input\r\n                :show-input-controls=\"false\"\r\n                @input=\"v => {info.fontStyFrozen = false; info.fontSize = v}\"></el-slider>\r\n            </div>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">行间距</label>\r\n            <div class=\"slider-warp\">\r\n              <el-slider\r\n                :value=\"info.lineHeight\"\r\n                show-input\r\n                :show-input-controls=\"false\"\r\n                :min=\"10\"\r\n                :max=\"50\"\r\n                @input=\"v => {info.fontStyFrozen = false; info.lineHeight = v}\"></el-slider>\r\n            </div>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">字间距</label>\r\n            <div class=\"slider-warp\">\r\n              <el-slider\r\n                :value=\"info.letterSpacing\"\r\n                show-input\r\n                :show-input-controls=\"false\"\r\n                :max=\"50\"\r\n                @input=\"v => {info.fontStyFrozen = false; info.letterSpacing = v}\"></el-slider>\r\n            </div>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">效果</label>\r\n            <el-button-group>\r\n              <el-button size=\"mini\" :class=\"{active: info.italic}\" @click=\"v => {info.fontStyFrozen = false; info.italic = !info.italic}\">\r\n                <dsf-icon name=\"zitixieti\"></dsf-icon>\r\n              </el-button>\r\n              <el-button size=\"mini\" :class=\"{active: info.bold}\" @click=\"v => {info.fontStyFrozen = false; info.bold = !info.bold}\">\r\n                <dsf-icon name=\"zitijiacu\"></dsf-icon>\r\n              </el-button>\r\n              <el-button size=\"mini\" :class=\"{active: info.underline}\" @click=\"v => {info.fontStyFrozen = false; info.underline = !info.underline}\">\r\n                <dsf-icon name=\"zitixiahuaxian\"></dsf-icon>\r\n              </el-button>\r\n            </el-button-group>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">对齐</label>\r\n            <el-button-group>\r\n              <el-button size=\"mini\" :class=\"{active: info.textAlign === 'left'}\" @click=\"v => {info.fontStyFrozen = false; info.textAlign = 'left'}\">\r\n                <dsf-icon name=\"zuoduiqi\"></dsf-icon>\r\n              </el-button>\r\n              <el-button size=\"mini\" :class=\"{active: info.textAlign === 'center'}\" @click=\"v => {info.fontStyFrozen = false; info.textAlign = 'center'}\">\r\n                <dsf-icon name=\"juzhongduiqi\"></dsf-icon>\r\n              </el-button>\r\n              <el-button size=\"mini\" :class=\"{active: info.textAlign === 'right'}\" @click=\"v => {info.fontStyFrozen = false; info.textAlign = 'right'}\">\r\n                <dsf-icon name=\"youduiqi\"></dsf-icon>\r\n              </el-button>\r\n            </el-button-group>\r\n          </div>\r\n          <div class=\"inner-item item-fill-row\">\r\n            <label class=\"label-box\">内容</label>\r\n            <el-input type=\"textarea\" :rows=\"4\" v-model=\"info.text\"></el-input>\r\n          </div>\r\n        </div>\r\n        <i slot=\"reference\" class=\"iconfont icon-xingzhuang-wenzi\"></i>\r\n      </el-popover>\r\n    </div>\r\n    <div class=\"box-item\" v-if=\"info.type === 'image'\" @click=\"showGroup(2)\">\r\n      <el-popover\r\n        :value=\"groupVisible[2]\"\r\n        placement=\"left-start\"\r\n        width=\"365\"\r\n        trigger=\"manual\"\r\n        popper-class=\"ds-seat-design-popover\"\r\n      >\r\n        <div class=\"header\">\r\n          上传\r\n          <i class=\"el-icon-arrow-right\" @click=\"closeGroup(2)\"></i>\r\n        </div>\r\n        <div class=\"inner\">\r\n          <div class=\"single-upload-box\" @click=\"uploadSingle\">\r\n            <img v-if=\"info.bgImg\" :src=\"getImagePath(info.bgImg)\" alt=\"\">\r\n          </div>\r\n        </div>\r\n        <i slot=\"reference\" class=\"iconfont icon-tupiantianjia\"></i>\r\n      </el-popover>\r\n    </div>\r\n  \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/designer/seat/constant\";\r\nimport {\r\n  uploadImg,\r\n  createUploadFileInput\r\n} from \"../func\"\r\nimport {mapState} from \"vuex\"\r\n  \r\nexport default {\r\n  name: \"RightTools\",\r\n  props: {},\r\n  data() {\r\n    return {\r\n      showTool: false,\r\n      info: {},\r\n      groupVisible: [false, false, false],\r\n      visiblePointer: null,\r\n      oldVisibleStatus: false,\r\n      fontFamilyList: [\r\n        {val: \"SimSun\", text: \"宋体\"},\r\n        {val: \"FangSong\", text: \"仿宋\"},\r\n        {val: \"KaiTi\", text: \"楷书\"},\r\n        {val: \"SimHei\", text: \"黑体\"},\r\n        {val: \"Microsoft YaHei\", text: \"微软雅黑\"},\r\n        {val: \"YouYuan\", text: \"幼圆\"},\r\n        {val: \"LiSu\", text: \"隶书\"},\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(\"printingDesign\", {\r\n      activeId: \"activeId\",\r\n    }),\r\n  },\r\n  watch: {\r\n    activeId(val) {\r\n      if (!val) {\r\n        this.showTool = false;\r\n        const arr = new Array(3);\r\n        this.groupVisible = _.fill(arr, false);\r\n      } else {\r\n        eventBus.emit(eventBusEvent.GET_ACTIVE_SEAT, seat => {\r\n          this.info = seat;\r\n        });\r\n          \r\n        this.showTool = true;\r\n        this.$nextTick(() => {\r\n          this.$set(this.groupVisible, this.visiblePointer, this.oldVisibleStatus);\r\n        })\r\n      }\r\n    },\r\n      \r\n    info: {\r\n      handler(val) {\r\n        this.$store.commit(\"printingDesign/changeSeatInfo\", val);\r\n      },\r\n      deep: false\r\n    }\r\n  },\r\n  methods: {\r\n    uploadSingle() {\r\n      const self = this;\r\n      let upDOM = createUploadFileInput();\r\n      $(upDOM).on(\"change\", function () {\r\n        if (!upDOM.files || upDOM.files.length === 0) return false;\r\n          \r\n        const formData = new FormData();\r\n        formData.append(\"file\", upDOM.files[0]);\r\n        const callback = result => {\r\n          //清除创建的input\r\n          $(upDOM).val(\"\");\r\n          $(upDOM).remove();\r\n          upDOM = null;\r\n            \r\n          if (result === \"error\") return false;\r\n          self.info.bgImg = result[0].relativePath;\r\n        };\r\n        uploadImg.call(self, formData, callback);\r\n      })\r\n      $(upDOM).click();\r\n    },\r\n    closeGroup(pointer) {\r\n      this.visiblePointer = pointer;\r\n      this.$set(this.groupVisible, pointer, false);\r\n      this.oldVisibleStatus = false;\r\n    },\r\n    showGroup(pointer) {\r\n      this.visiblePointer = pointer;\r\n      const arr = new Array(3);\r\n      this.groupVisible = _.fill(arr, false);\r\n      this.$set(this.groupVisible, pointer, true);\r\n      this.oldVisibleStatus = true;\r\n    },\r\n    getImagePath(path) {\r\n      return path ? dsf.url.getWebPath(path) : null;\r\n    },\r\n    getInfoTypeName() {\r\n      switch (this.info.type) {\r\n      case 'text':\r\n        return '文本'\r\n      case 'image':\r\n        return '图片'\r\n      }\r\n    },\r\n    updateWidth(width) {\r\n      this.info.width = width;\r\n    },\r\n    updateHeight(height) {\r\n      this.info.height = height;\r\n    },\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightTools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./rightTools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rightTools.vue?vue&type=template&id=8a433a12&\"\nimport script from \"./rightTools.vue?vue&type=script&lang=js&\"\nexport * from \"./rightTools.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('8a433a12')) {\n      api.createRecord('8a433a12', component.options)\n    } else {\n      api.reload('8a433a12', component.options)\n    }\n    module.hot.accept(\"./rightTools.vue?vue&type=template&id=8a433a12&\", function () {\n      api.rerender('8a433a12', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/rightTools.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"seat-designer-page\",\n      style: _vm.canvasCss,\n      on: {\n        mousedown: function($event) {\n          if (\n            !$event.type.indexOf(\"key\") &&\n            _vm._k($event.keyCode, \"left\", 37, $event.key, [\n              \"Left\",\n              \"ArrowLeft\"\n            ])\n          ) {\n            return null\n          }\n          if (\"button\" in $event && $event.button !== 0) {\n            return null\n          }\n          return _vm.preRegion.apply(null, arguments)\n        }\n      }\n    },\n    [\n      _c(\"region\", {\n        attrs: { visible: _vm.regionVisible, region: _vm.regionRect }\n      }),\n      _c(\n        \"div\",\n        { style: _vm.panelSty, attrs: { id: \"panel_outer\" } },\n        [\n          _vm._t(\"seat\"),\n          _c(\"div\", {\n            staticClass: \"ds_seat_panel_bg\",\n            attrs: { id: \"panel_bg\" }\n          })\n        ],\n        2\n      ),\n      _vm._t(\"seatPop\")\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.visible\n    ? _c(\"div\", { staticClass: \"region\", style: _vm.regionSty })\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"visible\" class=\"region\" :style=\"regionSty\"></div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Region\",\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    region: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      test: false\r\n    }\r\n  },\r\n  computed: {\r\n    regionSty() {\r\n      return {\r\n        left: this.region.left + \"px\",\r\n        top: this.region.top + \"px\",\r\n        width: this.region.width + \"px\",\r\n        height: this.region.height + \"px\",\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./region.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./region.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./region.vue?vue&type=template&id=7251ee4c&\"\nimport script from \"./region.vue?vue&type=script&lang=js&\"\nexport * from \"./region.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7251ee4c')) {\n      api.createRecord('7251ee4c', component.options)\n    } else {\n      api.reload('7251ee4c', component.options)\n    }\n    module.hot.accept(\"./region.vue?vue&type=template&id=7251ee4c&\", function () {\n      api.rerender('7251ee4c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/region.vue\"\nexport default component.exports","<template>\r\n  <div class=\"seat-designer-page\" :style=\"canvasCss\" @mousedown.left=\"preRegion\">\r\n    <region :visible=\"regionVisible\" :region=\"regionRect\"></region>\r\n    <div id=\"panel_outer\" :style=\"panelSty\">\r\n      <slot name=\"seat\"></slot>\r\n      <div id=\"panel_bg\" class=\"ds_seat_panel_bg\"></div>\r\n    </div>\r\n    <slot name=\"seatPop\"></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex';\r\nimport region from \"_platform/designer/seat/printingDesign/region\"\r\n\r\nexport default {\r\n  name: \"Canvas\",\r\n  components: {\r\n    region,\r\n  },\r\n  data() {\r\n    return {\r\n      regionVisible: false,\r\n      regionRect: {},   //框选\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('printingDesign', {\r\n      compelPanelSize: \"compelPanelSize\",\r\n      panelSize: \"panelSize\",\r\n      canvasCss(state) {\r\n        const {width, height} = state.compelPanelSize;\r\n        let _wid = width ? `${width}px` : '100%';\r\n        let _hit = height ? `${height}px` : '100%';\r\n        return {width: _wid, height: _hit}\r\n      },\r\n      panelParentSize(state) {\r\n        let {width, height} = state.compelPanelSize;\r\n        console.log(width)\r\n        console.log(height)\r\n        width = width || $(\".seat-designer-page\").width();\r\n        height = height || $(\".seat-designer-page\").height();\r\n        return {\r\n          width: width,\r\n          height: height\r\n        }\r\n      }\r\n    }),\r\n    panelSty() {\r\n      return {\r\n        width: this.panelSize.width ? this.panelSize.width + \"px\" : \"100%\",\r\n        height: this.panelSize.height ? this.panelSize.height + \"px\" : \"100%\",\r\n        left: this.panelSize.left + \"px\",\r\n        top: this.panelSize.top + \"px\"\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    \"compelPanelSize\": {\r\n      handler({width, height}) {\r\n        const panelSize = {\r\n          width: width,\r\n          height: height,\r\n          scale: 1,\r\n          left: 0,\r\n          top: 0\r\n        }\r\n\r\n        this.$store.commit(\"printingDesign/changePanelSize\", panelSize);\r\n      },\r\n      deep: true\r\n\r\n    },\r\n  },\r\n  mounted() {\r\n    const self = this;\r\n    $(\".seat-designer-page\")[0].addEventListener('mousewheel', self.handleScroll);\r\n\r\n  },\r\n  methods: {\r\n    handleScroll(evt) {\r\n      if (!evt.ctrlKey) return;\r\n      const self = this;\r\n      let wheelAction = evt.wheelDelta < 0 ? \"down\" : \"up\";\r\n\r\n      //获取鼠标在panel_outer中的位置\r\n      let pos = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n        x: evt.pageX,\r\n        y: evt.pageY\r\n      });\r\n\r\n      let {width: pWid, height: pHit} = self.panelParentSize;\r\n\r\n      //获取当前的实际宽度\r\n      let w = pWid * self.panelSize.scale;\r\n      let h = pHit * self.panelSize.scale;\r\n\r\n      //获取鼠标位置和宽度高度的比例值\r\n      let rw = pos.x / w;\r\n      let rh = pos.y / h;\r\n\r\n      let newS = self.panelSize.scale;\r\n      if (wheelAction === \"up\") {\r\n        newS += 0.1;\r\n      } else if (wheelAction === \"down\") {\r\n        newS -= 0.1;\r\n      }\r\n\r\n      //缩放比例最小0.1\r\n      if (newS >= 0.1) {\r\n        let panel = $(\"#panel_outer\");\r\n        let sw = pWid * newS;\r\n        let sh = pHit * newS;\r\n        let l = panel.position().left + pos.x - (sw * rw);\r\n        let t = panel.position().top + pos.y - (sh * rh);\r\n        const panelSize = {\r\n          scale: Math.round(newS * 10) / 10,\r\n          width: Math.floor(sw),\r\n          height: Math.floor(sh),\r\n          left: Math.floor(l),\r\n          top: Math.floor(t)\r\n        };\r\n        self.$store.commit(\"printingDesign/changePanelSize\", panelSize);\r\n      }\r\n\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n    },\r\n    preRegion(evt) {\r\n      const self = this;\r\n      self.$store.commit(\"printingDesign/changeActiveId\", \"\");\r\n      let downPos = dsf.math.convertLocalCoordinate('.seat-designer-page', { x: evt.pageX, y: evt.pageY });\r\n      function handleMouseMove(evt){\r\n        self.regionVisible = true;\r\n        let movePos = dsf.math.convertLocalCoordinate('.seat-designer-page', { x: evt.pageX, y: evt.pageY });\r\n        self.$set(self.regionRect, \"left\", downPos.x > movePos.x? movePos.x: downPos.x);\r\n        self.$set(self.regionRect, \"top\", downPos.y > movePos.y? movePos.y: downPos.y);\r\n        self.$set(self.regionRect, \"width\", Math.abs(movePos.x - downPos.x));\r\n        self.$set(self.regionRect, \"height\",Math.abs(movePos.y - downPos.y));\r\n      }\r\n      function handleMouseUp(){\r\n        $(document).off(\"mousemove.region\");\r\n        self.$store.commit(\"printingDesign/changeRegionPosition\", self.regionRect);\r\n        self.regionVisible = false;\r\n        self.regionRect = {};\r\n      }\r\n\r\n      $(document).off(\"mousemove.region\");\r\n      $(document).on(\"mousemove.region\", function (evt) {\r\n        handleMouseMove(evt);\r\n      })\r\n      $(document).one(\"mouseup.region\", function () {\r\n        handleMouseUp();\r\n      })\r\n\r\n    },\r\n  },\r\n\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./canvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./canvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./canvas.vue?vue&type=template&id=402e6ab0&\"\nimport script from \"./canvas.vue?vue&type=script&lang=js&\"\nexport * from \"./canvas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('402e6ab0')) {\n      api.createRecord('402e6ab0', component.options)\n    } else {\n      api.reload('402e6ab0', component.options)\n    }\n    module.hot.accept(\"./canvas.vue?vue&type=template&id=402e6ab0&\", function () {\n      api.rerender('402e6ab0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/canvas.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"seat-item-container normal\" },\n    [\n      _vm.verLine.visible\n        ? _c(\"div\", { staticClass: \"vertical-line\", style: _vm.verLineSty })\n        : _vm._e(),\n      _vm.horLine.visible\n        ? _c(\"div\", { staticClass: \"horizontal-line\", style: _vm.horLineSty })\n        : _vm._e(),\n      _vm.selectPosition.visible\n        ? _c(\n            \"div\",\n            {\n              staticClass: \"selected-box\",\n              style: _vm.selectSty,\n              on: {\n                mousedown: function($event) {\n                  if (\n                    !$event.type.indexOf(\"key\") &&\n                    _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                      \"Left\",\n                      \"ArrowLeft\"\n                    ])\n                  ) {\n                    return null\n                  }\n                  if (\"button\" in $event && $event.button !== 0) {\n                    return null\n                  }\n                  return _vm.selectMove.apply(null, arguments)\n                }\n              }\n            },\n            [\n              _c(\"div\", { staticClass: \"select\" }, [\n                _c(\"div\", {\n                  staticClass: \"anchor circle\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectRotate.apply(null, arguments)\n                    }\n                  }\n                }),\n                _c(\"div\", { staticClass: \"anchor line\" }),\n                _c(\"div\", {\n                  staticClass: \"anchor lt\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"lt\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor t\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"t\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor rt\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"rt\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor l\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"l\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor r\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"r\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor lb\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"lb\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor b\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"b\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor rb\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.selectScale($event, \"rb\")\n                    }\n                  }\n                }),\n                _c(\"div\", { staticClass: \"anchor info\" }, [\n                  _vm._v(\n                    \" 宽:\" +\n                      _vm._s(_vm.selectPosition.width) +\n                      \";高:\" +\n                      _vm._s(_vm.selectPosition.height) +\n                      \";角度:\" +\n                      _vm._s(_vm.selectPosition.angle) +\n                      \" \"\n                  )\n                ])\n              ])\n            ]\n          )\n        : _vm._e(),\n      _vm._l(_vm.items, function(item) {\n        return _c(\n          \"div\",\n          {\n            key: item.id,\n            staticClass: \"seat-box\",\n            class: {\n              active: _vm.activeId === item.id,\n              \"border-dash\": !_vm.showBorderLine && _vm.activeId !== item.id\n            },\n            style: _vm.getItemSty(item),\n            on: {\n              mousedown: function($event) {\n                if (\n                  !$event.type.indexOf(\"key\") &&\n                  _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                    \"Left\",\n                    \"ArrowLeft\"\n                  ])\n                ) {\n                  return null\n                }\n                if (\"button\" in $event && $event.button !== 0) {\n                  return null\n                }\n                return _vm.preMove($event, item)\n              }\n            }\n          },\n          [\n            _c(\n              \"div\",\n              {\n                staticClass: \"seat\",\n                on: {\n                  dblclick: function($event) {\n                    $event.stopPropagation()\n                    return _vm.openEdit($event, item)\n                  }\n                }\n              },\n              [\n                _c(\"div\", {\n                  staticClass: \"anchor circle\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preRotate($event, item)\n                    }\n                  }\n                }),\n                _c(\"div\", { staticClass: \"anchor line\" }),\n                _c(\"div\", {\n                  staticClass: \"anchor lt\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"lt\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor t\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"t\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor rt\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"rt\")\n                    }\n                  }\n                }),\n                item.type === \"text\"\n                  ? _c(\"p\", { style: _vm.getFontSty(item) }, [\n                      _vm._v(_vm._s(item.text))\n                    ])\n                  : _vm._e(),\n                _c(\"div\", {\n                  staticClass: \"anchor l\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"l\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor r\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"r\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor lb\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"lb\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor b\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"b\")\n                    }\n                  }\n                }),\n                _c(\"div\", {\n                  staticClass: \"anchor rb\",\n                  on: {\n                    mousedown: function($event) {\n                      if (\n                        !$event.type.indexOf(\"key\") &&\n                        _vm._k($event.keyCode, \"left\", 37, $event.key, [\n                          \"Left\",\n                          \"ArrowLeft\"\n                        ])\n                      ) {\n                        return null\n                      }\n                      if (\"button\" in $event && $event.button !== 0) {\n                        return null\n                      }\n                      return _vm.preScale($event, item, \"rb\")\n                    }\n                  }\n                }),\n                _c(\"div\", { staticClass: \"anchor info\" }, [\n                  _vm._v(\n                    \"宽:\" +\n                      _vm._s(item.width) +\n                      \";高:\" +\n                      _vm._s(item.height) +\n                      \";角度:\" +\n                      _vm._s(item.angle)\n                  )\n                ])\n              ]\n            )\n          ]\n        )\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"seat-item-container normal\">\r\n    <!--参考线-->\r\n    <div v-if=\"verLine.visible\" class=\"vertical-line\" :style=\"verLineSty\"></div>\r\n    <div v-if=\"horLine.visible\" class=\"horizontal-line\" :style=\"horLineSty\"></div>\r\n    \r\n    <!--select框-->\r\n    <div v-if=\"selectPosition.visible\" class=\"selected-box\" :style=\"selectSty\" @mousedown.left=\"selectMove\">\r\n      <div class=\"select\">\r\n        <div class=\"anchor circle\" @mousedown.left=\"selectRotate\"></div>\r\n        <div class=\"anchor line\"></div>\r\n        <div class=\"anchor lt\" @mousedown.left=\"selectScale($event, 'lt')\"></div>\r\n        <div class=\"anchor t\" @mousedown.left=\"selectScale($event, 't')\"></div>\r\n        <div class=\"anchor rt\" @mousedown.left=\"selectScale($event, 'rt')\"></div>\r\n        <div class=\"anchor l\" @mousedown.left=\"selectScale($event, 'l')\"></div>\r\n        <div class=\"anchor r\" @mousedown.left=\"selectScale($event, 'r')\"></div>\r\n        <div class=\"anchor lb\" @mousedown.left=\"selectScale($event, 'lb')\"></div>\r\n        <div class=\"anchor b\" @mousedown.left=\"selectScale($event, 'b')\"></div>\r\n        <div class=\"anchor rb\" @mousedown.left=\"selectScale($event, 'rb')\"></div>\r\n        <div class=\"anchor info\">\r\n          宽:{{ selectPosition.width }};高:{{ selectPosition.height }};角度:{{ selectPosition.angle }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!--seat-->\r\n    <div\r\n      v-for=\"(item) in items\"\r\n      :key=\"item.id\"\r\n      class=\"seat-box\"\r\n      :style=\"getItemSty(item)\"\r\n      :class=\"{active: activeId === item.id, 'border-dash': !showBorderLine && (activeId !== item.id)}\"\r\n      @mousedown.left=\"preMove($event, item)\"\r\n    >\r\n      <div class=\"seat\" @dblclick.stop=\"openEdit($event, item)\">\r\n        <div class=\"anchor circle\" @mousedown.left=\"preRotate($event, item)\"></div>\r\n        <div class=\"anchor line\"></div>\r\n        <div class=\"anchor lt\" @mousedown.left=\"preScale($event, item, 'lt')\"></div>\r\n        <div class=\"anchor t\" @mousedown.left=\"preScale($event, item, 't')\"></div>\r\n        <div class=\"anchor rt\" @mousedown.left=\"preScale($event, item, 'rt')\"></div>\r\n        <p v-if=\"item.type === 'text' \" :style=\"getFontSty(item)\">{{ item.text }}</p>\r\n        <div class=\"anchor l\" @mousedown.left=\"preScale($event, item, 'l')\"></div>\r\n        <div class=\"anchor r\" @mousedown.left=\"preScale($event, item, 'r')\"></div>\r\n        <div class=\"anchor lb\" @mousedown.left=\"preScale($event, item, 'lb')\"></div>\r\n        <div class=\"anchor b\" @mousedown.left=\"preScale($event, item, 'b')\"></div>\r\n        <div class=\"anchor rb\" @mousedown.left=\"preScale($event, item, 'rb')\"></div>\r\n        <div class=\"anchor info\">宽:{{ item.width }};高:{{ item.height }};角度:{{ item.angle }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex';\r\nimport eventBus from \"_platform/designer/seat/util/eventBus\";\r\nimport {eventBusEvent} from \"_platform/designer/seat/constant\";\r\nimport {forzenOtherItems} from \"_platform/designer/seat/func\";\r\n  \r\nexport default {\r\n  name: \"SeatItem\",\r\n  props: {\r\n    //所有座位\r\n    items: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      selectedItems: [],  //被选中座位(注:selectedItems各项与items各项引用的是同一个对象，改变selectedItems就会影响到items)\r\n      rectMinSize: [40, 40],    //缩放seat时的最小宽高\r\n      selectPosition: {   //框选的位置\r\n        top: 0,\r\n        left: 0,\r\n        width: 0,\r\n        height: 0,\r\n        visible: false\r\n      },\r\n      //垂直对齐线\r\n      verLine: {\r\n        left: 0,\r\n        visible: false\r\n      },\r\n      //水平对齐线\r\n      horLine: {\r\n        top: 0,\r\n        visible: false\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(\"printingDesign\", {\r\n      panelSize: \"panelSize\",\r\n      newSeatItem: \"newSeatItem\",\r\n      activeId: \"activeId\",\r\n      regionPosition: \"regionPosition\",\r\n      seatInfo: \"seatInfo\",\r\n      showBorderLine: \"showBorderLine\"\r\n    }),\r\n    selectSty() {\r\n      const {scale} = this.panelSize;\r\n      return {\r\n        width: this.selectPosition.width * scale + \"px\",\r\n        height: this.selectPosition.height * scale + \"px\",\r\n        left: this.selectPosition.left * scale + \"px\",\r\n        top: this.selectPosition.top * scale + \"px\",\r\n        transform: `rotate(${this.selectPosition.angle}deg)`\r\n      }\r\n    },\r\n    verLineSty() {\r\n      return {\r\n        left: `${this.verLine.left * this.panelSize.scale}` + \"px\"\r\n      }\r\n    },\r\n    horLineSty() {\r\n      return {\r\n        top: `${this.horLine.top * this.panelSize.scale}` + \"px\"\r\n      }\r\n    },\r\n  },\r\n    \r\n  watch: {\r\n    newSeatItem(val) {\r\n      //冻结style, 避免重复渲染\r\n      forzenOtherItems.call(this);\r\n      //这里复制一个新的seat对象, 避免 vue里面 newSeatItem的迷之改变行为\r\n      const seatItem = _.assign({}, val);\r\n      this.items.push(seatItem);\r\n    },\r\n    regionPosition(val) {\r\n      const self = this;\r\n      //如果 regionPosition 的范围大小为0\r\n      if (_.isEmpty(val) || val.width === 0 || val.height === 0) {\r\n        forzenOtherItems.call(self);\r\n        self.selectedItems = [];\r\n        restSelectPostion.call(self);\r\n        return;\r\n      }\r\n        \r\n      self.selectedItems = _.filter(self.items, item => judgePos.call(self, item));\r\n      forzenOtherItems.call(self);\r\n        \r\n      if (self.selectedItems.length === 0) return;\r\n        \r\n      if (self.selectedItems.length === 1) {\r\n        self.$store.commit(\"printingDesign/changeActiveId\", self.selectedItems[0].id)\r\n      } else if (self.selectedItems.length > 1) {\r\n        self.selectPosition = getSelectPosition(self.selectedItems);\r\n      }\r\n    },\r\n    seatInfo: {\r\n      handler(val, oldVal) {\r\n        let index = _.findIndex(this.items, item => item.id === val.id);\r\n        this.$set(this.items, index, val);\r\n      },\r\n      deep: false\r\n    },\r\n    selectedItems(val) {\r\n      if (val && val.length > 0) {\r\n        this.$store.commit(\"printingDesign/changeHaveSelectedItems\", true)\r\n      } else {\r\n        this.$store.commit(\"printingDesign/changeHaveSelectedItems\", false)\r\n      }\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    $(document).off(\"mouseup.scaleSeatItem\");\r\n    $(document).off(\"mousemove.scaleSeatItem\");\r\n  },\r\n  mounted() {\r\n    eventBus.on(eventBusEvent.KEY_CTRL_D, () => {\r\n      restSelectPostion.call(this);\r\n      this.selectedItems = [];\r\n      this.$store.commit(\"printingDesign/changeActiveId\", \"\");\r\n    })\r\n    eventBus.on(eventBusEvent.KEY_DELETE, () => {\r\n      this.deleteActiveSeatItem();\r\n    })\r\n    eventBus.on(eventBusEvent.GET_ACTIVE_SEAT, (callback) => {\r\n      const seat = this.items.find(item => item.id === this.activeId);\r\n      callback && callback(seat);\r\n    })\r\n    eventBus.on(eventBusEvent.LEVEL_UP, ()=>{\r\n      if (!_.isArray(this.selectedItems) || this.selectedItems.length === 0) return;\r\n      forzenOtherItems.call(this);\r\n      this.selectedItems.forEach(a => a.zIndex += 1);\r\n    })\r\n    eventBus.on(eventBusEvent.LEVEL_DOWN, ()=>{\r\n      if (!_.isArray(this.selectedItems) || this.selectedItems.length === 0) return;\r\n      forzenOtherItems.call(this);\r\n      this.selectedItems.forEach(a => a.zIndex = a.zIndex>1 ? a.zIndex-1: 1);\r\n    })\r\n  },\r\n  methods: {\r\n    getItemSty(item) {\r\n      if (item.isFrozenSty) return item.style;\r\n      const scale = this.panelSize.scale;\r\n      const sty = {\r\n        width: item.width * scale + \"px\",\r\n        height: item.height * scale + \"px\",\r\n        left: item.left * scale + \"px\",\r\n        top: item.top * scale + \"px\",\r\n        zIndex: item.zIndex,\r\n        transform: `rotate(${item.angle}deg)`\r\n      }\r\n      if (item.type !== \"text\") {\r\n        sty.background = getBgSty(item);\r\n      }\r\n      item.style = sty;\r\n      return sty\r\n    },\r\n    getFontSty(item) {\r\n      const scale = this.panelSize.scale;\r\n      if (item.fontStyFrozen) return item.fontSty;\r\n      console.log(\"重新计算font样式\")\r\n  \r\n      const style = {\r\n        color: item.color,\r\n        whiteSpace: 'pre-wrap',\r\n        fontSize : item.fontSize * scale + \"px\",\r\n        letterSpacing : item.letterSpacing * scale + \"px\",\r\n        lineHeight : (item.lineHeight / 10) * item.fontSize * scale + \"px\",\r\n        textAlign : item.textAlign,\r\n        fontStyle : item.italic? 'italic': 'normal',\r\n        fontWeight : item.bold? 'bold': 'normal',\r\n        fontFamily : item.fontFamily,\r\n        textDecoration : item.underline? 'underline': 'none',\r\n      }\r\n      item.fontSty = style;\r\n      item.fontStyFrozen = true;\r\n      return style\r\n    },\r\n    clearSelectedItems() {\r\n      this.selectedItems = [];\r\n      restSelectPostion.call(this);\r\n      this.$store.commit(\"printingDesign/changeActiveId\", \"\");\r\n    },\r\n    preScale(event, seatItem, action) {\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n      const self = this;\r\n      //重新计算style\r\n      forzenOtherItems.call(self, false);\r\n      const oldRect = _.assign({}, seatItem);\r\n      const newRect = _.assign({}, seatItem);\r\n        \r\n      //获取seat 缩放时参考的锚点\r\n      const basePoint = getRectBasePointByScale(oldRect, action);\r\n        \r\n      function handleScale(evt) {\r\n        if (!action || !basePoint) return;\r\n        let mousePosition = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        let afterScaleRect = scaleRect(\r\n          basePoint, oldRect, newRect, mousePosition, action, self.rectMinSize\r\n        );\r\n        _.assign(seatItem, afterScaleRect);\r\n      }\r\n        \r\n      function handleUp() {\r\n        forzenOtherItems.call(self);\r\n        $(document).off(\"mousemove.scaleSeatItem\");\r\n      }\r\n        \r\n      $(document).off(\"mousemove.scaleSeatItem\");\r\n      $(document).on(\"mousemove.scaleSeatItem\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleScale(evt);\r\n      }, 5));\r\n      $(document).one(\"mouseup.scaleSeatItem\", function () {\r\n        handleUp();\r\n      })\r\n    },\r\n    preMove(evt, seat) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      const self = this;\r\n      setRect2Active.call(self, seat);\r\n      forzenOtherItems.call(self);\r\n  \r\n      self.verLine.visible = false;\r\n      self.horLine.visible = false;\r\n        \r\n      const _otherSeatPoints = getOtherSeatPoints.call(self);\r\n      const otherSeatXy = getPointsXy(_otherSeatPoints);\r\n        \r\n      //用于计算seat的位置\r\n      const old_x = seat.left;\r\n      const old_y = seat.top;\r\n      let downPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n        x: evt.pageX,\r\n        y: evt.pageY\r\n      }, self.panelSize.scale);\r\n        \r\n      function handleMove(evt) {\r\n        let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        let moveDir = {\r\n          x: localPos.x - downPos.x,\r\n          y: localPos.y - downPos.y\r\n        };\r\n        seat.left = parseInt(old_x + moveDir.x);\r\n        seat.top = parseInt(old_y + moveDir.y);\r\n          \r\n        //计算对齐线位置\r\n        self.verLine.visible = false;\r\n        self.horLine.visible = false;\r\n        const _seatPoints = getRectPoint(seat, ['lt']);\r\n        const seatXy = getPointsXy(_seatPoints);\r\n        let a = computeAlignLine(seatXy, otherSeatXy, seat);\r\n        if (!a) return;\r\n        self.horLine.top = a.top;\r\n        self.horLine.visible = _.isNumber(a.top);\r\n        self.verLine.left = a.left;\r\n        self.verLine.visible = _.isNumber(a.left);\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(document).off(\"mousemove.moveSeatItem\");\r\n        forzenOtherItems.call(self);\r\n        self.verLine.visible = false;\r\n        self.horLine.visible = false;\r\n      }\r\n        \r\n      $(document).off(\"mousemove.moveSeatItem\");\r\n      $(document).on(\"mousemove.moveSeatItem\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleMove(evt)\r\n      }, 5));\r\n      $(document).one(\"mouseup.moveSeatItem\", function () {\r\n        handleUp()\r\n      })\r\n    },\r\n    preRotate(event, seat) {\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n      $(\".ds-seat-design\").addClass(\"is-rotating\");\r\n      const self = this;\r\n      forzenOtherItems.call(self);\r\n        \r\n      const center = getRectCenter(seat);\r\n        \r\n      function handleRotate(evt) {\r\n        let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        seat.angle = rotateRect(center, localPos);\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(document).off(\"mousemove.rotateSeatItem\");\r\n        forzenOtherItems.call(self);\r\n        $(\".ds-seat-design\").removeClass(\"is-rotating\");\r\n          \r\n      }\r\n        \r\n      $(document).off(\"mousemove.rotateSeatItem\");\r\n      $(document).on(\"mousemove.rotateSeatItem\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleRotate(evt);\r\n      }, 5));\r\n      $(document).one(\"mouseup.rotateSeatItem\", function () {\r\n        handleUp()\r\n      })\r\n    },\r\n    selectRotate(evt) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n      $(\".ds-seat-design\").addClass(\"is-rotating\");\r\n      const self = this;\r\n      forzenOtherItems.call(self);\r\n      const oldRect = _.assign({}, self.selectPosition);\r\n      const center = getRectCenter(oldRect);\r\n      const seatObj = {};\r\n      self.items.forEach(seat => {\r\n        seatObj[seat.id] = _.assign({}, seat);\r\n      });\r\n        \r\n      function handleRotate(evt) {\r\n        let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        let angle = rotateRect(center, localPos);\r\n        let offsetAngle = angle - oldRect.angle;\r\n        self.selectPosition.angle = angle;\r\n          \r\n        //旋转被框选的seat\r\n        self.selectedItems.forEach(seat => {\r\n          let oldSeat = seatObj[seat.id];\r\n          let p = dsf.math.getRotatedPiont(oldSeat.left, oldSeat.top, center.x, center.y, angle);\r\n          let l = p.x + oldSeat.width / 2;\r\n          let t = p.y + oldSeat.height / 2;\r\n          let c = dsf.math.getRotatedPiont(l, t, p.x, p.y, angle);\r\n          p = dsf.math.getRotatedPiont(p.x, p.y, c.x, c.y, -angle);\r\n          seat.top = parseInt(p.y);\r\n          seat.left = parseInt(p.x);\r\n          seat.angle = (oldSeat.angle + offsetAngle) % 360;\r\n          if (oldSeat.angle < 0) seat.angle = 360 + oldSeat.angle;\r\n        })\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(\".ds-seat-design\").removeClass(\"is-rotating\");\r\n        self.selectPosition = getSelectPosition(self.selectedItems);\r\n        $(document).off(\"mousemove.rotateSelect\")\r\n        forzenOtherItems.call(self);\r\n      }\r\n        \r\n      $(document).off(\"mousemove.rotateSelect\");\r\n      $(document).on(\"mousemove.rotateSelect\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleRotate(evt)\r\n      }, 5))\r\n      $(document).one(\"mouseup.rotateSelect\", function () {\r\n        handleUp()\r\n      })\r\n        \r\n    },\r\n    selectScale(evt, action) {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n      const self = this;\r\n      forzenOtherItems.call(self);\r\n      const oldRect = _.assign({}, self.selectPosition);\r\n      const newRect = _.assign({}, self.selectPosition);\r\n        \r\n      //各个座位的信息\r\n      const seatObj = {};\r\n      self.items.forEach(seat => {\r\n        seatObj[seat.id] = _.assign({}, seat);\r\n      });\r\n        \r\n      //获取选框缩放时参考的锚点\r\n      const basePoint = getRectBasePointByScale(oldRect, action);\r\n      //获取seat与选框的宽高比\r\n      const ratio = getRatioBySeat2SelectBox(self.selectedItems, self.selectPosition);\r\n        \r\n      function handleScale(evt) {\r\n        if (!action || !basePoint) return;\r\n        let mousePosition = dsf.math.convertLocalCoordinate(\"#panel_outer\", {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        self.selectPosition = scaleRect(basePoint, oldRect, newRect, mousePosition, action, self.rectMinSize);\r\n          \r\n        //缩放被框选的seat\r\n        self.selectedItems.forEach(item => {\r\n          let newSeat = getNewSize(seatObj[item.id], oldRect, self.selectPosition, action, ratio);\r\n          _.assign(item, newSeat)\r\n        })\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(document).off(\"mousemove.scaleSelect\");\r\n        forzenOtherItems.call(self);\r\n        self.selectPosition = getSelectPosition(self.selectedItems);\r\n      }\r\n        \r\n      $(document).off(\"mousemove.scaleSelect\");\r\n      $(document).on(\"mousemove.scaleSelect\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleScale(evt);\r\n      }, 5));\r\n      $(document).one(\"mouseup.scaleSelect\", function () {\r\n        handleUp();\r\n      })\r\n        \r\n    },\r\n    selectMove(evt) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      const self = this;\r\n      forzenOtherItems.call(self);\r\n      const old_x = self.selectPosition.left;\r\n      const old_y = self.selectPosition.top;\r\n        \r\n      //各个座位的信息\r\n      const seatObj = {};\r\n      self.items.forEach(seat => {\r\n        seatObj[seat.id] = _.assign({}, seat);\r\n      });\r\n      let downPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n        x: evt.pageX,\r\n        y: evt.pageY\r\n      }, self.panelSize.scale);\r\n        \r\n      function handleMove(evt) {\r\n        let localPos = dsf.math.convertLocalCoordinate('#panel_outer', {\r\n          x: evt.pageX,\r\n          y: evt.pageY\r\n        }, self.panelSize.scale);\r\n        let moveDir = {\r\n          x: localPos.x - downPos.x,\r\n          y: localPos.y - downPos.y\r\n        };\r\n        let left = old_x + moveDir.x;\r\n        let top = old_y + moveDir.y;\r\n        self.selectPosition.left = parseInt(left);\r\n        self.selectPosition.top = parseInt(top);\r\n          \r\n        self.selectedItems.forEach(item => {\r\n          item.left = parseInt(seatObj[item.id].left + moveDir.x);\r\n          item.top = parseInt(seatObj[item.id].top + moveDir.y);\r\n        })\r\n      }\r\n        \r\n      function handleUp() {\r\n        $(document).off(\"mousemove.moveSelect\");\r\n        forzenOtherItems.call(self);\r\n      }\r\n        \r\n      $(document).off(\"mousemove.moveSelect\");\r\n      $(document).on(\"mousemove.moveSelect\", _.debounce(function (evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        handleMove(evt)\r\n      }, 5));\r\n      $(document).one(\"mouseup.moveSelect\", function () {\r\n        handleUp()\r\n      })\r\n    },\r\n    deleteActiveSeatItem() {\r\n      if (this.selectedItems.length === 0) return;\r\n      const items = _.differenceWith(this.items, this.selectedItems, (a, b) => {\r\n        return a.id === b.id\r\n      })\r\n        \r\n      this.$emit(\"update:items\", items);\r\n      this.clearSelectedItems()\r\n    },\r\n    openEdit(e, item) {\r\n      if (item.type==='image' || $(e.target).hasClass(\"anchor\")) return;\r\n      let textArea = document.createElement(\"textarea\");\r\n      const _submit = (val) => {\r\n        item.text = val;\r\n        $(textArea).remove();\r\n        textArea = null;\r\n      }\r\n      $(e.target).append(textArea)\r\n      $(textArea).val(item.text);\r\n      $(textArea).on(\"blur\", function () {\r\n        _submit($(this).val());\r\n      })\r\n      $(textArea).bind(\"keypress\", function (event) {\r\n        if (event.keyCode === 13) _submit($(this).val())\r\n      })\r\n      $(textArea).focus();\r\n    },\r\n  },\r\n}\r\n  \r\n  \r\n//激活单个座位\r\nfunction setRect2Active(seat) {\r\n  if (this.activeId === seat.id) return;\r\n  //重置selectPosition\r\n  restSelectPostion.call(this);\r\n  //清空已选的座位\r\n  this.selectedItems = [seat];\r\n  this.$store.commit(\"printingDesign/changeActiveId\", seat.id);\r\n}\r\n  \r\n//判断座位是否处于region 边界内\r\nfunction judgePos(seat) {\r\n  let seatPoints = getRectPoint(seat);\r\n  let pointRange = getPointRange(seatPoints);\r\n  let {left, top, scale} = this.panelSize;\r\n  let {left: regionLeft, top: regionTop, width: regionWid, height: regionHit} = this.regionPosition;\r\n    \r\n  let anchor = $(\".seat-designer-page\").offset();\r\n  let small_position = {\r\n    x: regionLeft + anchor.left,\r\n    y: regionTop + anchor.top\r\n  }\r\n  let large_position = {\r\n    x: regionLeft + anchor.left + regionWid,\r\n    y: regionTop + anchor.top + regionHit\r\n  }\r\n  small_position = dsf.math.convertLocalCoordinate(\"#panel_outer\", small_position, scale);\r\n  large_position = dsf.math.convertLocalCoordinate(\"#panel_outer\", large_position, scale);\r\n    \r\n  let a = pointRange.min_x >= small_position.x;\r\n  let b = pointRange.max_x <= large_position.x;\r\n  let c = pointRange.min_y >= small_position.y;\r\n  let d = pointRange.max_y <= large_position.y;\r\n  return a && b && c && d\r\n}\r\n  \r\n/**\r\n   * 获取对象上下左右四个边界点\r\n   * tar [lt|rt|rb|lb]\r\n   */\r\nfunction getRectPoint(obj, tar = ['lt', 'rt', 'rb', 'lb']) {\r\n  let angle = obj.angle;\r\n  let left = obj.left;\r\n  let top = obj.top;\r\n  let right = obj.left + obj.width;\r\n  let bottom = obj.top + obj.height;\r\n    \r\n  let pos = {\r\n    lt: 0,\r\n    lb: 0,\r\n    rt: 0,\r\n    rb: 0\r\n  };\r\n    \r\n  let xCenter = (right - left) * 0.5 + left;\r\n  let yCenter = (bottom - top) * 0.5 + top;\r\n  tar.includes('lt') && (pos.lt = dsf.math.getRotatedPiont(left, top, xCenter, yCenter, angle))\r\n  tar.includes('rt') && (pos.rt = dsf.math.getRotatedPiont(right, top, xCenter, yCenter, angle))\r\n  tar.includes('rb') && (pos.rb = dsf.math.getRotatedPiont(right, bottom, xCenter, yCenter, angle))\r\n  tar.includes('lb') && (pos.lb = dsf.math.getRotatedPiont(left, bottom, xCenter, yCenter, angle))\r\n  return pos;\r\n}\r\n  \r\n//获取rect 缩放时参考的锚点\r\nfunction getRectBasePointByScale(rect, action) {\r\n  let basePoint = {};\r\n  if (action.length > 1) {\r\n    if (action.indexOf(\"l\") >= 0) {\r\n      basePoint.x = rect.left + rect.width;\r\n    } else {\r\n      basePoint.x = rect.left;\r\n    }\r\n    if (action.indexOf(\"t\") >= 0) {\r\n      basePoint.y = rect.top + rect.height;\r\n    } else {\r\n      basePoint.y = rect.top;\r\n    }\r\n  } else {\r\n    if (action === \"r\" || action === \"b\") {\r\n      basePoint.x = rect.left;\r\n      basePoint.y = rect.top;\r\n    } else if (action === \"l\" || action === \"t\") {\r\n      basePoint.x = rect.left + rect.width;\r\n      basePoint.y = rect.top + rect.height;\r\n    }\r\n  }\r\n    \r\n  let center = {\r\n    x: rect.left + rect.width / 2,\r\n    y: rect.top + rect.height / 2\r\n  };\r\n  basePoint = dsf.math.getRotatedPiont(basePoint.x, basePoint.y, center.x, center.y, rect.angle);\r\n  return basePoint\r\n}\r\n  \r\n/**\r\n   * 此函数用于求出Rect缩放之后的 left/top/width/height\r\n   * basePoint Rect缩放时的参考点\r\n   * oldRect rect缩放前的拷贝，此对象不变\r\n   * newRect 初始值等于rect缩放前的拷贝，此对象用于计算缩放后的rect\r\n   * 这里传两个rect是为了不在 scaleRect函数每次运行的时候都去声明 newRect，节约性能\r\n   * mousePosition 当前鼠标在 #panel_outer当中的坐标\r\n   * action 缩放的具体动作\r\n   * minSize [minWidth, minHeight]  最小宽高\r\n   * */\r\nfunction scaleRect(basePoint, oldRect, newRect, mousePosition, action, minSize) {\r\n  let dist = dsf.math.getDistance(basePoint, mousePosition);\r\n  let angle = dsf.math.getRadina(basePoint, mousePosition, -dsf.math.a2r(oldRect.angle));\r\n  let pos = {\r\n    x: Math.cos(angle) * dist + oldRect.left,\r\n    y: Math.sin(angle) * dist + oldRect.top\r\n  };\r\n    \r\n  let w, h;\r\n  if (action.indexOf(\"r\") >= 0) {\r\n    w = pos.x - oldRect.left;\r\n  } else if (action.indexOf(\"l\") >= 0) {\r\n    w = oldRect.left - pos.x;\r\n  }\r\n  if (action.indexOf(\"b\") >= 0) {\r\n    h = pos.y - oldRect.top;\r\n  } else if (action.indexOf(\"t\") >= 0) {\r\n    h = oldRect.top - pos.y;\r\n  }\r\n  //四个对角度\r\n  if (action.length > 1) {\r\n    let sc = w / oldRect.width;\r\n    newRect.width = oldRect.width * sc;\r\n    newRect.height = oldRect.height * sc;\r\n  } else {\r\n    if (dsf.isDef(w)) {\r\n      newRect.width = w;\r\n    } else {\r\n      newRect.width = oldRect.width;\r\n    }\r\n    if (dsf.isDef(h)) {\r\n      newRect.height = h;\r\n    } else {\r\n      newRect.height = oldRect.height;\r\n    }\r\n  }\r\n  if (newRect.width < minSize[0]) {\r\n    newRect.width = minSize[0];\r\n  }\r\n  if (newRect.height < minSize[1]) {\r\n    newRect.height = minSize[1]\r\n  }\r\n    \r\n  let U = {};\r\n  if (action.length > 1) {\r\n    if (action.indexOf(\"r\") >= 0) {\r\n      U.x = basePoint.x + newRect.width;\r\n    } else {\r\n      if (action.indexOf(\"l\") >= 0) {\r\n        U.x = basePoint.x - newRect.width;\r\n      } else {\r\n        U.x = basePoint.x;\r\n      }\r\n    }\r\n    if (action.indexOf(\"b\") >= 0) {\r\n      U.y = basePoint.y + newRect.height;\r\n    } else {\r\n      if (action.indexOf(\"t\") >= 0) {\r\n        U.y = basePoint.y - newRect.height;\r\n      } else {\r\n        U.y = basePoint.y;\r\n      }\r\n    }\r\n  } else {\r\n    if (action === \"r\" || action === \"b\") {\r\n      U.x = basePoint.x + newRect.width;\r\n      U.y = basePoint.y + newRect.height;\r\n    } else if (action === \"l\" || action === \"t\") {\r\n      U.x = basePoint.x - newRect.width;\r\n      U.y = basePoint.y - newRect.height;\r\n    }\r\n  }\r\n    \r\n  //获取对角距离\r\n  let K = dsf.math.getRotatedPiont(U.x, U.y, basePoint.x, basePoint.y, oldRect.angle)\r\n  //获取旋转中心点\r\n  let M = {\r\n    x: 0.5 * (basePoint.x + K.x),\r\n    y: 0.5 * (basePoint.y + K.y)\r\n  };\r\n    \r\n  let S = dsf.math.getRotatedPiont(basePoint.x, basePoint.y, M.x, M.y, -oldRect.angle);\r\n    \r\n  if (action.length > 1) {\r\n    if (action.indexOf(\"r\") >= 0) {\r\n      newRect.left = S.x;\r\n    } else {\r\n      if (action.indexOf(\"l\") >= 0) {\r\n        newRect.left = S.x - newRect.width;\r\n      } else {\r\n        newRect.left = S.x - newRect.width / 2;\r\n      }\r\n    }\r\n    if (action.indexOf(\"b\") >= 0) {\r\n      newRect.top = S.y\r\n    } else {\r\n      if (action.indexOf(\"t\") >= 0) {\r\n        newRect.top = S.y - newRect.height;\r\n      } else {\r\n        newRect.top = S.y - newRect.height / 2;\r\n      }\r\n    }\r\n  } else {\r\n    if (action === \"r\" || action === \"b\") {\r\n      newRect.left = S.x;\r\n      newRect.top = S.y;\r\n    } else if (action === \"l\" || action === \"t\") {\r\n      newRect.left = S.x - newRect.width;\r\n      newRect.top = S.y - newRect.height;\r\n    }\r\n  }\r\n    \r\n  __parseIntSize(newRect);\r\n    \r\n  return newRect;\r\n}\r\n  \r\n/**此函数用于求出Rect旋转之后的 angle\r\n   *center 旋转中心点\r\n   * mousePosition 当前鼠标在 #panel_outer当中的坐标\r\n   * */\r\nfunction rotateRect(center, mousePosition) {\r\n  let d = dsf.math.getRadina(center, mousePosition);\r\n  let angle = 360 - 270 + (dsf.math.r2a(d));\r\n  angle = Math.ceil(angle) % 360;\r\n  return angle\r\n}\r\n  \r\n//获取seat与选框的宽高比\r\nfunction getRatioBySeat2SelectBox(seats, selectBox) {\r\n  const ratio = {};\r\n  _.forEach(seats, item => {\r\n    let obj = _.assign({}, item);\r\n    ratio[item.id] = {\r\n      left: (obj.left - selectBox.left) / selectBox.width,\r\n      top: (obj.top - selectBox.top) / selectBox.height,\r\n      width: obj.width / selectBox.width,\r\n      height: obj.height / selectBox.height\r\n    }\r\n  })\r\n  return ratio\r\n}\r\n  \r\n//在选框大小变化之后获取座位新的size\r\nfunction getNewSize(seat, oldSelectBox, newSelectBox, action, ratio) {\r\n  const _seat = _.assign({}, seat);\r\n  let ratioSize = ratio[_seat.id];\r\n  _seat.left = newSelectBox.left + newSelectBox.width * ratioSize.left;\r\n  _seat.top = newSelectBox.top + newSelectBox.height * ratioSize.top;\r\n    \r\n  //如果拖动的是4个端点\r\n  if (action.length === 2) {\r\n    let sc = newSelectBox.width / oldSelectBox.width;\r\n    let sc1 = newSelectBox.height / oldSelectBox.height;\r\n    sc = 0.5 * (sc + sc1);\r\n    _seat.width = sc * seat.width;\r\n    _seat.height = sc * seat.height;\r\n  } else if (action.length === 1) {\r\n    _seat.width = newSelectBox.width * ratioSize.width;\r\n    _seat.height = newSelectBox.height * ratioSize.height;\r\n  }\r\n    \r\n  __roundSize(_seat);\r\n  return _seat;\r\n}\r\n  \r\n//获取rect的中心锚点\r\nfunction getRectCenter(rect) {\r\n  return {\r\n    x: rect.left + rect.width / 2,\r\n    y: rect.top + rect.height / 2\r\n  }\r\n}\r\n  \r\n//获取rect 当中4个点中最小的x,y 和最大的x,y\r\nfunction getPointRange(rectPoints) {\r\n  let min_x, max_x, min_y, max_y;\r\n  _.forIn(rectPoints, val => {\r\n    //第一次取值\r\n    min_x = min_x || val.x;\r\n    max_x = max_x || val.x;\r\n    min_y = min_y || val.y;\r\n    max_y = max_y || val.y;\r\n      \r\n    min_x = min_x <= val.x ? min_x : val.x;\r\n    max_x = max_x >= val.x ? max_x : val.x;\r\n    min_y = min_y <= val.y ? min_y : val.y;\r\n    max_y = max_y >= val.y ? max_y : val.y;\r\n  })\r\n    \r\n  return {min_x: min_x, min_y: min_y, max_x: max_x, max_y: max_y}\r\n}\r\n  \r\n//取整\r\nfunction __parseIntSize(rect) {\r\n  rect.top = parseInt(rect.top);\r\n  rect.left = parseInt(rect.left);\r\n  rect.width = parseInt(rect.width);\r\n  rect.height = parseInt(rect.height);\r\n}\r\n  \r\nfunction __roundSize(rect) {\r\n  rect.top = Math.round(rect.top);\r\n  rect.left = Math.round(rect.left);\r\n  rect.width = Math.round(rect.width);\r\n  rect.height = Math.round(rect.height);\r\n}\r\n  \r\n//获取选框的位置\r\nfunction getSelectPosition(selectedItems) {\r\n  let min_x, max_x, min_y, max_y, rectPoints;\r\n  _.forEach(selectedItems, item => {\r\n    rectPoints = getRectPoint(item);\r\n    _.forIn(rectPoints, val => {\r\n      //第一次取值\r\n      min_x = min_x || val.x;\r\n      max_x = max_x || val.x;\r\n      min_y = min_y || val.y;\r\n      max_y = max_y || val.y;\r\n        \r\n      min_x = min_x <= val.x ? min_x : val.x;\r\n      max_x = max_x >= val.x ? max_x : val.x;\r\n      min_y = min_y <= val.y ? min_y : val.y;\r\n      max_y = max_y >= val.y ? max_y : val.y;\r\n    })\r\n  });\r\n  return {\r\n    left: getExtNum(min_x),\r\n    top: getExtNum(min_y),\r\n    width: getExtNum(max_x - min_x),\r\n    height: getExtNum(max_y - min_y),\r\n    angle: 0,\r\n    visible: true\r\n  }\r\n}\r\n  \r\n//小于等于0取floor, 大于0取ceil\r\nfunction getExtNum(num) {\r\n  return num < 0 ? Math.floor(num) : Math.ceil(num)\r\n}\r\n  \r\n//重置selectPosition\r\nfunction restSelectPostion() {\r\n  this.selectPosition = {\r\n    top: 0,\r\n    left: 0,\r\n    width: 0,\r\n    height: 0,\r\n    angle: 0,\r\n    visible: false\r\n  }\r\n}\r\n  \r\n//获取除了activeSeat之外，其它所有seats的各个点位置\r\nfunction getOtherSeatPoints() {\r\n  const otherSeat = _.filter(this.items, seat => seat.id !== this.activeId);\r\n  return otherSeat.map(seat => getRectPoint(seat, ['lt']));\r\n}\r\n  \r\n//计算对齐线的位置\r\nfunction computeAlignLine(xy, otherXy, seat) {\r\n  let obj = {}, times = 0;\r\n  for (let i = 0; i < otherXy.length; i++) {\r\n    if (xy.left >= otherXy[i].left - 3 && xy.left <= otherXy[i].left + 3) {\r\n      obj.left = otherXy[i].left;\r\n      times += 1;\r\n      if (seat.angle === 0) {\r\n        seat.left = obj.left;\r\n      }\r\n    }\r\n      \r\n    if (xy.top >= otherXy[i].top - 3 && xy.top <= otherXy[i].top + 3) {\r\n      obj.top = otherXy[i].top;\r\n      times += 1;\r\n      if (seat.angle === 0) {\r\n        seat.top = obj.top;\r\n      }\r\n    }\r\n      \r\n    if (times === 2) break;\r\n  }\r\n  return (obj.left || obj.top) ? obj : null\r\n}\r\n  \r\n//将points的x, y坐标提取出来\r\nfunction getPointsXy(points) {\r\n  let res = [], obj = {};\r\n  if (_.isArray(points)) {\r\n    _.forEach(points, item => {\r\n      obj = {\r\n        left: Math.round(item.lt.x),\r\n        top: Math.round(item.lt.y)\r\n      }\r\n      res.push(obj);\r\n    })\r\n    return _.uniqWith(res, _.isEqual);\r\n  } else if (_.isObject(points)) {\r\n    return {\r\n      left: Math.round(points.lt.x),\r\n      top: Math.round(points.lt.y)\r\n    }\r\n  }\r\n}\r\n  \r\n//获取seat背景的样式\r\nfunction getBgSty(obj) {\r\n  const dynamicUrl = dsf.url.getAbsolutePath(obj.bgImg);\r\n  // const staticUrl = dsf.url.getWebPath(\"$/img/image.png\")\r\n  const staticUrl = require(\"_platform/assets/styles/themes/seatDesign/image.png\")\r\n  const url = obj.bgImg ? dynamicUrl : staticUrl;\r\n  return `center / contain no-repeat url(${url})`\r\n}\r\n</script>","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seatItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./seatItem.vue?vue&type=template&id=01adc810&\"\nimport script from \"./seatItem.vue?vue&type=script&lang=js&\"\nexport * from \"./seatItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('01adc810')) {\n      api.createRecord('01adc810', component.options)\n    } else {\n      api.reload('01adc810', component.options)\n    }\n    module.hot.accept(\"./seatItem.vue?vue&type=template&id=01adc810&\", function () {\n      api.rerender('01adc810', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign/seatItem.vue\"\nexport default component.exports","<template>\r\n  <div class=\"ds-designer ds-seat-container ds-seat-design\">\r\n    <div class=\"designer-head\">\r\n      <top-tools v-bind.sync=\"postData\" @save-layout=\"saveLayout\"></top-tools>\r\n    </div>\r\n    <div class=\"designer-content\">\r\n      <div class=\"seat-designer-center\">\r\n        <left-tools></left-tools>\r\n        <print-canvas>\r\n          <template v-slot:seat>\r\n            <seat-item v-bind.sync=\"postData\"></seat-item>\r\n          </template>\r\n        </print-canvas>\r\n        <right-tools></right-tools>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport topTools from \"_platform/designer/seat/printingDesign/topTools.vue\";\r\nimport leftTools from \"_platform/designer/seat/printingDesign/leftTools.vue\";\r\nimport rightTools from \"_platform/designer/seat/printingDesign/rightTools.vue\"\r\nimport canvas from \"_platform/designer/seat/printingDesign/canvas.vue\";\r\nimport seatItem from \"_platform/designer/seat/printingDesign/seatItem\";\r\n  \r\nimport {changePanelSizeForBgImage, sysBindShortKey} from \"_platform/designer/seat/func\";\r\nimport ConfigBuilder from \"_platform/designer/seat/util/configBuilder.js\";\r\n\r\n\r\nexport default {\r\n  name: \"DsfSeatDesign\",\r\n  components: {\r\n    topTools,\r\n    leftTools,\r\n    rightTools,\r\n    \"PrintCanvas\": canvas,\r\n    seatItem,\r\n  },\r\n  data() {\r\n    return {\r\n      keyStack: [],\r\n        \r\n      //下面这些为提供给子组件的props\r\n      postData: {\r\n        _id: \"\",\r\n          \r\n        //用于top-tools组件的\r\n        backgroundImage: {},\r\n        canvasSet: {\r\n          width: undefined,\r\n          height: undefined\r\n        },\r\n        hasBg: false,\r\n          \r\n        //用于seat-item组件的\r\n        items: [],\r\n      }\r\n    }\r\n  },\r\n  computed: {},\r\n  watch:{\r\n    \"postData.backgroundImage\"(){\r\n      changePanelSizeForBgImage.call(this);\r\n    }\r\n  },\r\n    \r\n  created() {\r\n    const layoutUrl = dsf.url.getWebPath(\"$/seat_config/seat/printingDesign.js\");\r\n      \r\n    this.$http.importFiles(layoutUrl).then((res) => {\r\n      \r\n      this.layoutConfig = new ConfigBuilder(printingDesignConfig, this.$route.query.opt);\r\n      this.bindShortKey();\r\n      this.getSeatInfo();\r\n    });\r\n  },\r\n  beforeDestroy() {\r\n    $(document).off(\"keydown\");\r\n    $(document).off(\"keyup\");\r\n  },\r\n    \r\n  methods: {\r\n    saveLayout() {\r\n      if(process.env.NODE_ENV === \"development\"){\r\n        this.saveByDev();\r\n      }\r\n      else {\r\n        this.saveByPub();\r\n      }\r\n    },\r\n    bindShortKey() {\r\n      const stopList = [\"ctrl\", \"ctrl-d\", \"ctrl-s\"];\r\n      sysBindShortKey(this.keyStack, stopList);\r\n    },\r\n    saveByDev(){\r\n      const purePostData = getPurePostData.call(this);\r\n      const id = this.$route.query.id || dsf.uuid();\r\n      purePostData._id = id;\r\n        \r\n      localStorage.setItem(\"printing_\"+id, JSON.stringify(purePostData));\r\n      const originQuery = this.$route.query;\r\n      const _query = Object.assign({}, originQuery, {id: id})\r\n      this.$router.replace({path: this.$route.path, query: _query})\r\n    },\r\n    saveByPub(){\r\n      const purePostData = getPurePostData.call(this);\r\n      const data = {\r\n        \"pageName\": \"edit\",\r\n        \"namespace\": \"dsfa.printing.designcontent\",\r\n        \"data\": JSON.stringify(purePostData)\r\n      }\r\n      const loadVm = dsf.layer.loading();\r\n      this.$http.post(this.layoutConfig.saveLayoutUrl, data)\r\n        .done(res => {\r\n          if (!res.success) {\r\n            dsf.layer.message(\"证书套打保存失败\", false);\r\n            return\r\n          }\r\n            \r\n          this.postData._id = res.data._id;\r\n          this.$router.replace({path: this.$route.path, query: {id: res.data._id}})\r\n          dsf.layer.message(\"保存成功\");\r\n        })\r\n        .error(err => {\r\n          dsf.layer.message(\"证书套打保存失败\", false);\r\n        })\r\n        .always(() => {\r\n          dsf.layer.closeLoading(loadVm);\r\n        })\r\n    },\r\n      \r\n    getSeatInfo() {\r\n      if (process.env.NODE_ENV === \"development\"){\r\n        this.getInfoDev()\r\n      }\r\n      else {\r\n        this.getInfoPub()\r\n      }\r\n    },\r\n    getInfoDev(){\r\n      const id = this.$route.query.id;\r\n      if (!id) return;\r\n      const data = JSON.parse(localStorage.getItem(\"printing_\" + id));\r\n      if (data){\r\n        if (_.isEmpty(data.canvasSet)){\r\n          data.canvasSet = {\r\n            width: undefined,\r\n            height: undefined\r\n          }\r\n        }\r\n        this.postData = data;\r\n      }\r\n    },\r\n    getInfoPub(){\r\n      const id = this.$route.query.id;\r\n    }\r\n  },\r\n}\r\n  \r\nfunction getPurePostData() {\r\n  const purePostData = _.cloneDeep(this.postData);\r\n  purePostData.items.forEach(el => {\r\n    el.isFrozenSty = false\r\n  })\r\n  return purePostData;\r\n}\r\n\r\n</script>\r\n\r\n<style type=\"text/scss\" lang=\"scss\">\r\n  @import \"~_platform/assets/styles/designer/seatDesign.scss\";\r\n</style>","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./printingDesign.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./printingDesign.vue?vue&type=template&id=df668332&\"\nimport script from \"./printingDesign.vue?vue&type=script&lang=js&\"\nexport * from \"./printingDesign.vue?vue&type=script&lang=js&\"\nimport style0 from \"./printingDesign.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"I:\\\\web-project\\\\dream\\\\dsf-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('df668332')) {\n      api.createRecord('df668332', component.options)\n    } else {\n      api.reload('df668332', component.options)\n    }\n    module.hot.accept(\"./printingDesign.vue?vue&type=template&id=df668332&\", function () {\n      api.rerender('df668332', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"designer/seat/printingDesign.vue\"\nexport default component.exports"],"sourceRoot":""}